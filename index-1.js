!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=102)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.shouldLog=function(){try{if("undefined"==typeof window||void 0===window.localStorage)return!1;var e=window.localStorage.getItem("loglevel");return!(!e||"trace"!==e.toLowerCase())}catch(e){return!1}},e.setLevel=function(t){if("undefined"!=typeof window&&void 0!==window.localStorage)try{window.localStorage.setItem("loglevel",t),e.proxyMethodsCreated=void 0,e.createProxyMethods()}catch(e){return}},e.createProxyMethods=function(){if(void 0===e.proxyMethodsCreated){e.proxyMethodsCreated=!0;for(var t={log:"debug",trace:"trace",info:"info",warn:"warn",error:"error"},n=0,i=Object.keys(t);n<i.length;n++){var r=i[n],o=void 0!==console[r],s=t[r],a=o&&(e.shouldLog()||"error"===s);e[s]=a?console[r].bind(console):function(){}}}},e}();t.default=i,i.createProxyMethods()},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(73),a=n(72),u=n(3),c=n(21),l=n(29),d=o(n(28)),f=o(n(5)),p=o(n(6)),h=function(){function e(){}return e.getBuildEnv=function(){return s.BuildEnvironmentKind.Production},e.getIntegration=function(t){return i(this,void 0,void 0,function(){var n,i;return r(this,function(r){switch(r.label){case 0:if(f.default.isSafari())return[2,l.IntegrationKind.Secure];if(n=window===window.top,i="https:"===window.location.protocol,void 0===t){if("undefined"==typeof OneSignal||!OneSignal.context||!OneSignal.context.appConfig)throw new c.InvalidArgumentError("usingProxyOrigin",c.InvalidArgumentReason.Empty);t=!!OneSignal.context.appConfig.subdomain}return n?i?[2,t?l.IntegrationKind.SecureProxy:l.IntegrationKind.Secure]:!p.default.isLocalhostAllowedAsSecureOrigin()||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname?[2,l.IntegrationKind.InsecureProxy]:[2,l.IntegrationKind.Secure]:[3,1];case 1:return i?[4,e.isFrameContextInsecure()]:[3,3];case 2:return r.sent()?[2,l.IntegrationKind.InsecureProxy]:[2,t?l.IntegrationKind.SecureProxy:l.IntegrationKind.Secure];case 3:return[2,l.IntegrationKind.InsecureProxy];case 4:return[2]}})})},e.isFrameContextInsecure=function(){return i(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return window!==window.top&&"serviceWorker"in navigator&&void 0!==navigator.serviceWorker.getRegistration?[4,d.default.getRegistration()]:[2,!1];case 1:return[2,!e.sent()]}})})},e.isInsecureOrigin=function(){return"http:"===window.location.protocol},e.getWindowEnv=function(){return"undefined"==typeof window?"undefined"!=typeof self&&void 0!==self.registration?u.WindowEnvironmentKind.ServiceWorker:u.WindowEnvironmentKind.Unknown:window===window.top?-1!==location.href.indexOf("initOneSignal")||"/subscribe"===location.pathname&&""===location.search&&(location.hostname.endsWith(".onesignal.com")||location.hostname.endsWith(".os.tc")||-1!==location.hostname.indexOf(".localhost")&&e.getBuildEnv()===s.BuildEnvironmentKind.Development)?u.WindowEnvironmentKind.OneSignalSubscriptionPopup:u.WindowEnvironmentKind.Host:"/webPushIframe"===location.pathname?u.WindowEnvironmentKind.OneSignalProxyFrame:"/webPushModal"===location.pathname?u.WindowEnvironmentKind.OneSignalSubscriptionModal:u.WindowEnvironmentKind.CustomIframe},e.getTestEnv=function(){return a.TestEnvironmentKind.None},e.getBuildEnvPrefix=function(t){switch(void 0===t&&(t=e.getBuildEnv()),t){case s.BuildEnvironmentKind.Development:return"Dev-";case s.BuildEnvironmentKind.Staging:return"Staging-";case s.BuildEnvironmentKind.Production:return"";default:throw new c.InvalidArgumentError("buildEnv",c.InvalidArgumentReason.EnumOutOfRange)}},e.getOneSignalApiUrl=function(t){switch(void 0===t&&(t=e.getBuildEnv()),t){case s.BuildEnvironmentKind.Development:return new URL("https://localhost:3001/api/v1");case s.BuildEnvironmentKind.Staging:return new URL("https://"+window.location.host+"/api/v1");case s.BuildEnvironmentKind.Production:return new URL("https://onesignal.com/api/v1");default:throw new c.InvalidArgumentError("buildEnv",c.InvalidArgumentReason.EnumOutOfRange)}},e.getOneSignalResourceUrlPath=function(t){void 0===t&&(t=e.getBuildEnv());var n,i=e.getOneSignalApiUrl(t).origin;switch(t){case s.BuildEnvironmentKind.Development:case s.BuildEnvironmentKind.Staging:case s.BuildEnvironmentKind.Production:n="/sdks";break;default:throw new c.InvalidArgumentError("buildEnv",c.InvalidArgumentReason.EnumOutOfRange)}return new URL(i+n)},e.getOneSignalCssFileName=function(t){void 0===t&&(t=e.getBuildEnv());switch(t){case s.BuildEnvironmentKind.Development:return"Dev-OneSignalSDKStyles.css";case s.BuildEnvironmentKind.Staging:return"Staging-OneSignalSDKStyles.css";case s.BuildEnvironmentKind.Production:return"OneSignalSDKStyles.css";default:throw new c.InvalidArgumentError("buildEnv",c.InvalidArgumentReason.EnumOutOfRange)}},e}();t.default=h},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(5)),a=o(n(1)),u=n(3),c=o(n(0)),l=o(n(10)),d=["notifyButtonHovering","notifyButtonHover","notifyButtonButtonClick","notifyButtonLauncherClick","animatedElementHiding","animatedElementHidden","animatedElementShowing","animatedElementShown","activeAnimatedElementActivating","activeAnimatedElementActive","activeAnimatedElementInactivating","activeAnimatedElementInactive","dbRetrieved","dbSet","testEvent"],f=["onesignal.prompt.custom.clicked","onesignal.prompt.native.permissionchanged","onesignal.subscription.changed","onesignal.internal.subscriptionset","dbRebuilt","initialize","subscriptionSet","sendWelcomeNotification","subscriptionChange","notificationPermissionChange","dbSet","register","notificationDisplay","notificationDismiss","notificationClick","permissionPromptDisplay","testWouldDisplay","testInitOptionDisabled","popupWindowTimeout"],p={notificationPermissionChange:"onesignal.prompt.native.permissionchanged",subscriptionChange:"onesignal.subscription.changed",customPromptClick:"onesignal.prompt.custom.clicked"},h=function(){function e(){}return e.trigger=function(t,n,o){return void 0===o&&(o=null),i(this,void 0,void 0,function(){var i,h,g;return r(this,function(r){switch(r.label){case 0:if(l.default.contains(d,t)||(i=n,h=l.default.capitalize(a.default.getWindowEnv().toString()),o&&(h=h+" â¬¸ "+l.default.capitalize(o)),i||!1===i?c.default.debug("("+h+") Â» %c"+t+":",l.default.getConsoleStyle("event"),i):c.default.debug("("+h+") Â» %c"+t,l.default.getConsoleStyle("event"))),!s.default.isBrowser())return[3,2];if(t===OneSignal.EVENTS.SDK_INITIALIZED){if(OneSignal.initialized)return[2];OneSignal.initialized=!0}return[4,OneSignal.emitter.emit(t,n)];case 1:r.sent(),r.label=2;case 2:return p.hasOwnProperty(t)&&(g=p[t],e._triggerLegacy(g,n)),!s.default.isBrowser()||a.default.getWindowEnv()!==u.WindowEnvironmentKind.OneSignalSubscriptionPopup&&a.default.getWindowEnv()!==u.WindowEnvironmentKind.OneSignalProxyFrame||(opener||parent?l.default.contains(f,t)&&(a.default.getWindowEnv()===u.WindowEnvironmentKind.OneSignalSubscriptionPopup?OneSignal.subscriptionPopup.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,{eventName:t,eventData:n}):OneSignal.proxyFrame.retriggerRemoteEvent(t,n)):c.default.error("Could not send event '"+t+"' back to host page because no creator (opener or parent) found!")),[2]}})})},e._triggerLegacy=function(e,t){var n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});window.dispatchEvent(n)},e}();t.default=h},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.WindowEnvironmentKind||(t.WindowEnvironmentKind={})).ServiceWorker="ServiceWorker",i.Host="Host",i.OneSignalSubscriptionPopup="Popup",i.OneSignalSubscriptionModal="Modal",i.OneSignalProxyFrame="ProxyFrame",i.CustomIframe="CustomFrame",i.Unknown="Unknown"},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(9)),a=o(n(1)),u=n(3),c=o(n(8)),l=o(n(0)),d=n(6),f=n(26),p=n(67),h=n(10);function g(e){return"[object Array]"===Object.prototype.toString.call(e)}function b(){return d.OneSignalUtils.redetectBrowserUserAgent()}function v(){return d.OneSignalUtils.isUsingSubscriptionWorkaround()}function m(){return Promise.resolve()}function S(){return l.default.warn("OneSignal: Unsubscribing from push."),a.default.getWindowEnv()!==u.WindowEnvironmentKind.ServiceWorker?self.registration.pushManager.getSubscription().then(function(e){if(e)return e.unsubscribe();throw new Error("Cannot unsubscribe because not subscribed.")}):v()?new Promise(function(e,t){l.default.debug("Unsubscribe from push got called, and we're going to remotely execute it in HTTPS iFrame."),OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH,null,function(n){l.default.debug("Unsubscribe from push succesfully remotely executed."),n.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?e():t("Failed to remotely unsubscribe from push.")})}):navigator.serviceWorker&&navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(function(e){return e.pushManager}).then(function(e){return e.getSubscription()}).then(function(e){return e?e.unsubscribe():Promise.resolve()}):Promise.resolve()}function y(){return l.default.warn("OneSignal: Unregistering service worker."),a.default.getWindowEnv()===u.WindowEnvironmentKind.OneSignalProxyFrame?Promise.resolve():navigator.serviceWorker&&navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(function(e){return e.unregister()}):Promise.resolve()}function w(){return window.__oneSignalSdkLoadCount||0}t.isArray=g,t.decodeHtmlEntities=function(e){return p.BrowserUtils.decodeHtmlEntities(e)},t.redetectBrowserUserAgent=b,t.isPushNotificationsSupported=function(){if(void 0===window.Promise)return!1;var e=b(),t=navigator.userAgent||"";if((e.chrome||e.chromium)&&!1===window.isSecureContext&&void 0===navigator.serviceWorker)return!0;if(e.firefox&&Number(e.version)<48&&(e.mobile||e.tablet))return!1;if(e.firefox&&Number(e.version)>=44)return!(["20160725105554","20160905130425","20161031153904","20161129180326","20161209150850","20170118123525","20170227085837","20170227131422","20170301181722","20170303022339","20170316213902","20170323110425","20170410145022","20170411115307","20170412142208","20170417065206","20170504112025","20170517122419","20170607123825","20170627155318","20170801170322","20170802111520","20170917103825","20170921064520","20171005074949","20171106172903","20171107091003","20171128121223","20171206101620","20171226003912","20180116134019","20180118122319","20180307131617","20180313134936","20180315163333","20180322140748","20180426000307","20180427183532","20180427222832","20180430140610","20180503092946","20180503164101","20180516032417","20180605153619","20180605174236","20180605201706","20180619102821","20180619173714","20180621064021","20180621121604","20180830204350","20180903060751","20180920175354","20181001135620","20181017185317"].indexOf(navigator.buildID)>-1);return!(!e.safari&&void 0===navigator.serviceWorker||e.ios||e.ipod||e.iphone||e.ipad||e.msie||!(e.msedge&&Number(e.version)>=17.17063)&&(t.indexOf("FBAN")>-1||t.indexOf("FBAV")>-1||navigator.appVersion.match(/ wv/)||!(e.safari&&Number(e.version)>=7.1)&&!(e.samsungBrowser&&Number(e.version)>=4)&&!((e.chrome||e.chromium)&&Number(e.version)>=42)&&!(e.yandexbrowser&&Number(e.version)>=15.12)&&!(e.opera&&(e.mobile||e.tablet)&&Number(e.version)>=37||e.opera&&Number(e.version)>=42)&&!e.vivaldi))},t.isChromeLikeBrowser=function(){return s.default.chrome||s.default.chromium||s.default.opera||s.default.yandexbrowser},t.removeDomElement=function(e){var t=document.querySelectorAll(e);if(t.length>0)for(var n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])},t.isLocalhostAllowedAsSecureOrigin=function(){return d.OneSignalUtils.isLocalhostAllowedAsSecureOrigin()},t.awaitOneSignalInitAndSupported=function(){return i(this,void 0,void 0,function(){return r(this,function(e){return[2,new Promise(function(e){OneSignal.initialized?e():OneSignal.emitter.once(OneSignal.EVENTS.SDK_INITIALIZED,e)})]})})},t.isUsingSubscriptionWorkaround=v,t.triggerNotificationPermissionChanged=function(e){return void 0===e&&(e=!1),i(this,void 0,void 0,function(){return r(this,function(t){return[2,f.PermissionUtils.triggerNotificationPermissionChanged(e)]})})},t.stringify=function(e){return h.Utils.stringify(e)},t.executeCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e)return e.apply(null,t)},t.logMethodCall=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return d.OneSignalUtils.logMethodCall.apply(d.OneSignalUtils,[e].concat(t))},t.isValidEmail=function(e){return!!e&&!!e.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)},t.addDomElement=function(e,t,n){if("string"==typeof e)document.querySelector(e).insertAdjacentHTML(t,n);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");e.insertAdjacentHTML(t,n)}},t.clearDomElementChildren=function(e){if("string"==typeof e){var t=document.querySelector(e);if(null===t)throw new Error('Cannot find element with selector "'+e+'"');for(;t.firstChild;)t.removeChild(t.firstChild)}else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");for(;e.firstChild;)e.removeChild(e.firstChild)}},t.addCssClass=function(e,t){if("string"==typeof e){var n=document.querySelector(e);if(null===n)throw new Error('Cannot find element with selector "'+e+'"');n.classList.add(t)}else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");e.classList.add(t)}},t.removeCssClass=function(e,t){if("string"==typeof e){var n=document.querySelector(e);if(null===n)throw new Error('Cannot find element with selector "'+e+'"');n.classList.remove(t)}else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");e.classList.remove(t)}},t.hasCssClass=function(e,t){if("string"==typeof e){var n=document.querySelector(e);if(null===n)throw new Error('Cannot find element with selector "'+e+'"');return n.classList.contains(t)}if("object"==typeof e)return e.classList.contains(t);throw new Error(e+" must be a CSS selector string or DOM Element object.")},t.getConsoleStyle=function(e){return h.Utils.getConsoleStyle(e)},t.delay=function(e){return new Promise(function(t){setTimeout(t,e)})},t.nothing=m,t.timeoutPromise=function(e,t){return h.Utils.timeoutPromise(e,t)},t.when=function(e,t,n){return void 0===t&&(t=m()),void 0===n&&(n=m()),e?t:n},t.contains=function(e,t){return h.Utils.contains(e,t)},t.trimUndefined=function(e){return h.Utils.trimUndefined(e)},t.getRandomUuid=function(){return d.OneSignalUtils.getRandomUuid()},t.isValidUuid=function(e){return d.OneSignalUtils.isValidUuid(e)},t.getUrlQueryParam=function(e){var t=window.location.href;t=t.toLowerCase(),e=e.replace(/[\[\]]/g,"\\$&").toLowerCase();var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},t.wipeIndexedDb=function(){return l.default.warn("OneSignal: Wiping IndexedDB data."),Promise.all([c.default.remove("Ids"),c.default.remove("NotificationOpened"),c.default.remove("Options")])},t.capitalize=function(e){return h.Utils.capitalize(e)},t.unsubscribeFromPush=S,t.wipeServiceWorker=y,t.wipeServiceWorkerAndUnsubscribe=function(){return Promise.all([S(),y()])},t.wait=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.substringAfter=function(e,t){return e.substr(e.indexOf(t)+t.length)},t.once=function e(t,n,i,r){if(void 0===r&&(r=!1),n||l.default.error("Cannot call on() with no event: ",n),i||l.default.error("Cannot call on() with no task: ",i),"string"==typeof t){var o=document.querySelectorAll(t);if(o.length>0)for(var s=0;s<o.length;s++)e(o[s],n,i)}else if(g(t))for(s=0;s<t.length;s++)e(t[s],n,i);else{if("object"!=typeof t)throw new Error(t+" must be a CSS selector string or DOM Element object.");var a=function(e){var n=function(){t.removeEventListener(e.type,a)};r||n(),i(e,n)};t.addEventListener(n,a)}},t.getSdkLoadCount=w,t.awaitSdkEvent=function(e,t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){OneSignal.emitter.once(e,function(e){t?t(e)&&n(e):n(e)})})];case 1:return[2,n.sent()]}})})},t.incrementSdkLoadCount=function(){window.__oneSignalSdkLoadCount=w()+1},t.prepareEmailForHashing=function(e){return e.replace(/\s/g,"").toLowerCase()},t.encodeHashAsUriComponent=function(e){return h.Utils.encodeHashAsUriComponent(e)}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(1)),o=n(3),s=i(n(9)),a=function(){function e(){}return e.isBrowser=function(){return"undefined"!=typeof window},e.isSafari=function(){return e.isBrowser()&&s.default.safari},e.version=function(){return Number(150505)},Object.defineProperty(e,"TRADITIONAL_CHINESE_LANGUAGE_TAG",{get:function(){return["tw","hant"]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SIMPLIFIED_CHINESE_LANGUAGE_TAG",{get:function(){return["cn","hans"]},enumerable:!0,configurable:!0}),e.getLanguage=function(){var t=navigator.language;if(t){var n=(t=t.toLowerCase()).split("-");if("zh"==n[0]){for(var i=0,r=e.TRADITIONAL_CHINESE_LANGUAGE_TAG;i<r.length;i++){var o=r[i];if(-1!==n.indexOf(o))return"zh-Hant"}for(var s=0,a=e.SIMPLIFIED_CHINESE_LANGUAGE_TAG;s<a.length;s++){var u=a[s];if(-1!==n.indexOf(u))return"zh-Hans"}return"zh-Hant"}return n[0].substring(0,2)}return"en"},e.supportsServiceWorkers=function(){switch(r.default.getWindowEnv()){case o.WindowEnvironmentKind.ServiceWorker:return!0;default:return"undefined"!=typeof navigator&&"serviceWorker"in navigator}},e.getSdkStylesVersionHash=function(){return"667d417dfeaee00d71566761c096042f"},e}();t.default=a},function(e,t,n){"use strict";(function(e){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(9)),o=i(n(1)),s=n(3),a=i(n(0)),u=n(10),c=function(){function t(){}return t.getBaseUrl=function(){return location.origin},t.isLocalhostAllowedAsSecureOrigin=function(){return OneSignal.config&&OneSignal.config.userConfig&&!0===OneSignal.config.userConfig.allowLocalhostAsSecureOrigin},t.isUsingSubscriptionWorkaround=function(){var e=o.default.getWindowEnv();if(!OneSignal.config)throw new Error("("+e.toString()+") isUsingSubscriptionWorkaround() cannot be called until OneSignal.config exists.");return!r.default.safari&&((!t.isLocalhostAllowedAsSecureOrigin()||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname)&&!(e!==s.WindowEnvironmentKind.Host&&e!==s.WindowEnvironmentKind.CustomIframe||!OneSignal.config.subdomain&&"http:"!==location.protocol))},t.redetectBrowserUserAgent=function(){return""===r.default.name&&""===r.default.version?r.default._detect(navigator.userAgent):r.default},t.isValidUuid=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(e)},t.getRandomUuid=function(){var t="undefined"==typeof window?e.crypto:window.crypto||window.msCrypto;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t?function(e){var n=t.getRandomValues(new Uint8Array(1))[0]%16|0;return("x"==e?n:3&n|8).toString(16)}:function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},t.logMethodCall=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return a.default.debug("Called %c"+e+"("+t.map(u.Utils.stringify).join(", ")+")",u.Utils.getConsoleStyle("code"),".")},t}();t.OneSignalUtils=c,t.default=c}).call(this,n(70))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){void 0===n&&(n="");var i=e.call(this,n)||this;return Object.defineProperty(i,"message",{configurable:!0,enumerable:!1,value:n,writable:!0}),Object.defineProperty(i,"name",{configurable:!0,enumerable:!1,value:i.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(i,i.constructor),i):(Object.defineProperty(i,"stack",{configurable:!0,enumerable:!1,value:new Error(n).stack,writable:!0}),Object.setPrototypeOf(i,t.prototype),i)}return r(t,e),t}(Error);t.default=o},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(27)),u=o(n(69)),c=n(97),l=n(96),d=n(40),f=n(72),p=n(3),h=n(68),g=o(n(1)),b=o(n(6));!function(e){e[e.SET=0]="SET"}(s||(s={}));var v=function(){function e(e){this.databaseName=e,this.emitter=new a.default,this.database=new u.default(this.databaseName)}return e.resetInstance=function(){e.databaseInstance=null},Object.defineProperty(e,"singletonInstance",{get:function(){return e.databaseInstanceName||(e.databaseInstanceName="ONE_SIGNAL_SDK_DB"),e.databaseInstance||(e.databaseInstance=new e(e.databaseInstanceName)),e.databaseInstance},enumerable:!0,configurable:!0}),e.applyDbResultFilter=function(e,t,n){switch(e){case"Options":return n&&t?n.value:n&&!t?n:null;case"Ids":return n&&t?n.id:n&&!t?n:null;case"NotificationOpened":return n&&t?{data:n.data,timestamp:n.timestamp}:n&&!t?n:null;default:return n||null}},e.prototype.get=function(t,n){return i(this,void 0,void 0,function(){var o,s=this;return r(this,function(a){switch(a.label){case 0:return g.default.getWindowEnv()!==p.WindowEnvironmentKind.ServiceWorker&&b.default.isUsingSubscriptionWorkaround()&&g.default.getTestEnv()===f.TestEnvironmentKind.None?[4,new Promise(function(e){return i(s,void 0,void 0,function(){return r(this,function(i){return OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET,[{table:t,key:n}],function(t){var n=t.data[0];e(n)}),[2]})})})]:[3,2];case 1:return[2,a.sent()];case 2:return[4,this.database.get(t,n)];case 3:return o=a.sent(),[2,e.applyDbResultFilter(t,n,o)]}})})},e.prototype.put=function(t,n){return i(this,void 0,void 0,function(){var o=this;return r(this,function(s){switch(s.label){case 0:return[4,new Promise(function(e,s){return i(o,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return g.default.getWindowEnv()!==p.WindowEnvironmentKind.ServiceWorker&&b.default.isUsingSubscriptionWorkaround()&&g.default.getTestEnv()===f.TestEnvironmentKind.None?(OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT,[{table:t,keypath:n}],function(i){i.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?e():s("(Database) Attempted remote IndexedDB put("+t+", "+n+"), but did not get success response.")}),[3,3]):[3,1];case 1:return[4,this.database.put(t,n)];case 2:i.sent(),e(),i.label=3;case 3:return[2]}})})})];case 1:return s.sent(),this.emitter.emit(e.EVENTS.SET,n),[2]}})})},e.prototype.remove=function(e,t){return g.default.getWindowEnv()!==p.WindowEnvironmentKind.ServiceWorker&&b.default.isUsingSubscriptionWorkaround()&&g.default.getTestEnv()===f.TestEnvironmentKind.None?new Promise(function(n,i){OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE,[{table:e,keypath:t}],function(r){r.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?n():i("(Database) Attempted remote IndexedDB remove("+e+", "+t+"), but did not get success response.")})}):this.database.remove(e,t)},e.prototype.getAppConfig=function(){return i(this,void 0,void 0,function(){var e,t,n,i,o;return r(this,function(r){switch(r.label){case 0:return e={},[4,this.get("Ids","appId")];case 1:return t=r.sent(),e.appId=t,n=e,[4,this.get("Options","subdomain")];case 2:return n.subdomain=r.sent(),i=e,[4,this.get("Options","vapidPublicKey")];case 3:return i.vapidPublicKey=r.sent(),o=e,[4,this.get("Options","emailAuthRequired")];case 4:return o.emailAuthRequired=r.sent(),[2,e]}})})},e.prototype.setAppConfig=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e.appId?[4,this.put("Ids",{type:"appId",id:e.appId})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.subdomain?[4,this.put("Options",{key:"subdomain",value:e.subdomain})]:[3,4];case 3:t.sent(),t.label=4;case 4:return!0!==e.httpUseOneSignalCom?[3,6]:[4,this.put("Options",{key:"httpUseOneSignalCom",value:!0})];case 5:return t.sent(),[3,8];case 6:return!1!==e.httpUseOneSignalCom?[3,8]:[4,this.put("Options",{key:"httpUseOneSignalCom",value:!1})];case 7:t.sent(),t.label=8;case 8:return!0!==e.emailAuthRequired?[3,10]:[4,this.put("Options",{key:"emailAuthRequired",value:!0})];case 9:return t.sent(),[3,12];case 10:return!1!==e.emailAuthRequired?[3,12]:[4,this.put("Options",{key:"emailAuthRequired",value:!1})];case 11:t.sent(),t.label=12;case 12:return e.vapidPublicKey?[4,this.put("Options",{key:"vapidPublicKey",value:e.vapidPublicKey})]:[3,14];case 13:t.sent(),t.label=14;case 14:return[2]}})})},e.prototype.getAppState=function(){return i(this,void 0,void 0,function(){var e,t,n,i,o;return r(this,function(r){switch(r.label){case 0:return e=new c.AppState,t=e,[4,this.get("Options","defaultUrl")];case 1:return t.defaultNotificationUrl=r.sent(),n=e,[4,this.get("Options","defaultTitle")];case 2:return n.defaultNotificationTitle=r.sent(),i=e,[4,this.get("Options","isPushEnabled")];case 3:return i.lastKnownPushEnabled=r.sent(),o=e,[4,this.get("NotificationOpened")];case 4:return o.clickedNotifications=r.sent(),[2,e]}})})},e.prototype.setAppState=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,s;return r(this,function(r){switch(r.label){case 0:return e.defaultNotificationUrl?[4,this.put("Options",{key:"defaultUrl",value:e.defaultNotificationUrl})]:[3,2];case 1:r.sent(),r.label=2;case 2:return e.defaultNotificationTitle||""===e.defaultNotificationTitle?[4,this.put("Options",{key:"defaultTitle",value:e.defaultNotificationTitle})]:[3,4];case 3:r.sent(),r.label=4;case 4:return null==e.lastKnownPushEnabled?[3,6]:[4,this.put("Options",{key:"isPushEnabled",value:e.lastKnownPushEnabled})];case 5:r.sent(),r.label=6;case 6:if(!e.clickedNotifications)return[3,12];t=Object.keys(e.clickedNotifications),n=0,i=t,r.label=7;case 7:return n<i.length?(o=i[n],(s=e.clickedNotifications[o])?[4,this.put("NotificationOpened",{url:o,data:s.data,timestamp:s.timestamp})]:[3,9]):[3,12];case 8:return r.sent(),[3,11];case 9:return null!==s?[3,11]:[4,this.remove("NotificationOpened",o)];case 10:r.sent(),r.label=11;case 11:return n++,[3,7];case 12:return[2]}})})},e.prototype.getServiceWorkerState=function(){return i(this,void 0,void 0,function(){var e,t,n,i;return r(this,function(r){switch(r.label){case 0:return e=new l.ServiceWorkerState,t=e,[4,this.get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION")];case 1:return t.workerVersion=r.sent(),n=e,[4,this.get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION")];case 2:return n.updaterWorkerVersion=r.sent(),i=e,[4,this.get("Ids","backupNotification")];case 3:return i.backupNotification=r.sent(),[2,e]}})})},e.prototype.setServiceWorkerState=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e.workerVersion?[4,this.put("Ids",{type:"WORKER1_ONE_SIGNAL_SW_VERSION",id:e.workerVersion})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.updaterWorkerVersion?[4,this.put("Ids",{type:"WORKER2_ONE_SIGNAL_SW_VERSION",id:e.updaterWorkerVersion})]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.backupNotification?[4,this.put("Ids",{type:"backupNotification",id:e.backupNotification})]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2]}})})},e.prototype.getSubscription=function(){return i(this,void 0,void 0,function(){var e,t,n,i,o,s,a;return r(this,function(r){switch(r.label){case 0:return e=new d.Subscription,t=e,[4,this.get("Ids","userId")];case 1:return t.deviceId=r.sent(),n=e,[4,this.get("Ids","registrationId")];case 2:return n.subscriptionToken=r.sent(),[4,this.get("Options","optedOut")];case 3:return i=r.sent(),[4,this.get("Options","subscription")];case 4:return o=r.sent(),[4,this.get("Options","subscriptionCreatedAt")];case 5:return s=r.sent(),[4,this.get("Options","subscriptionExpirationTime")];case 6:return a=r.sent(),e.optedOut=null!=i?i:null!=o&&!o,e.createdAt=s,e.expirationTime=a,[2,e]}})})},e.prototype.setSubscription=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e.deviceId?[4,this.put("Ids",{type:"userId",id:e.deviceId})]:[3,2];case 1:t.sent(),t.label=2;case 2:return void 0===e.subscriptionToken?[3,4]:[4,this.put("Ids",{type:"registrationId",id:e.subscriptionToken})];case 3:t.sent(),t.label=4;case 4:return null==e.optedOut?[3,6]:[4,this.put("Options",{key:"optedOut",value:e.optedOut})];case 5:t.sent(),t.label=6;case 6:return null==e.createdAt?[3,8]:[4,this.put("Options",{key:"subscriptionCreatedAt",value:e.createdAt})];case 7:t.sent(),t.label=8;case 8:return null==e.expirationTime?[3,10]:[4,this.put("Options",{key:"subscriptionExpirationTime",value:e.expirationTime})];case 9:return t.sent(),[3,12];case 10:return[4,this.remove("Options","subscriptionExpirationTime")];case 11:t.sent(),t.label=12;case 12:return[2]}})})},e.prototype.getEmailProfile=function(){return i(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return[4,this.get("Ids","emailProfile")];case 1:return(e=t.sent())?[2,h.EmailProfile.deserialize(e)]:[2,new h.EmailProfile]}})})},e.prototype.setEmailProfile=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e?[4,this.put("Ids",{type:"emailProfile",id:e.serialize()})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.setProvideUserConsent=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,this.put("Options",{key:"userConsent",value:e})];case 1:return t.sent(),[2]}})})},e.prototype.getProvideUserConsent=function(){return i(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.get("Options","userConsent")];case 1:return[2,e.sent()]}})})},e.rebuild=function(){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,Promise.all([e.singletonInstance.remove("Ids"),e.singletonInstance.remove("NotificationOpened"),e.singletonInstance.remove("Options")])]})})},e.on=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i(this,void 0,void 0,function(){return r(this,function(n){return[2,e.singletonInstance.emitter.on.apply(e.singletonInstance.emitter,t)]})})},e.setEmailProfile=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.singletonInstance.setEmailProfile(t)];case 1:return[2,n.sent()]}})})},e.getEmailProfile=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,e.singletonInstance.getEmailProfile()];case 1:return[2,t.sent()]}})})},e.setSubscription=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.singletonInstance.setSubscription(t)];case 1:return[2,n.sent()]}})})},e.getSubscription=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,e.singletonInstance.getSubscription()];case 1:return[2,t.sent()]}})})},e.setProvideUserConsent=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.singletonInstance.setProvideUserConsent(t)];case 1:return[2,n.sent()]}})})},e.getProvideUserConsent=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,e.singletonInstance.getProvideUserConsent()];case 1:return[2,t.sent()]}})})},e.setServiceWorkerState=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.singletonInstance.setServiceWorkerState(t)];case 1:return[2,n.sent()]}})})},e.getServiceWorkerState=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,e.singletonInstance.getServiceWorkerState()];case 1:return[2,t.sent()]}})})},e.setAppState=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.singletonInstance.setAppState(t)];case 1:return[2,n.sent()]}})})},e.getAppState=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,e.singletonInstance.getAppState()];case 1:return[2,t.sent()]}})})},e.setAppConfig=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.singletonInstance.setAppConfig(t)];case 1:return[2,n.sent()]}})})},e.getAppConfig=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,e.singletonInstance.getAppConfig()];case 1:return[2,t.sent()]}})})},e.remove=function(t,n){return i(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,e.singletonInstance.remove(t,n)];case 1:return[2,i.sent()]}})})},e.put=function(t,n){return i(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,e.singletonInstance.put(t,n)];case 1:return[2,i.sent()]}})})},e.get=function(t,n){return i(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,e.singletonInstance.get(t,n)];case 1:return[2,i.sent()]}})})},e}();t.default=v,v.EVENTS=s},function(e,t,n){var i;i=function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}var i,r,o,s=n(/(ipod|iphone|ipad)/i).toLowerCase(),a=!/like android/i.test(t)&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),c=!u&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),d=/silk/i.test(t),f=/sailfish/i.test(t),p=/tizen/i.test(t),h=/(web|hpw)os/i.test(t),g=/windows phone/i.test(t),b=(/SamsungBrowser/i.test(t),!g&&/windows/i.test(t)),v=!s&&!d&&/macintosh/i.test(t),m=!a&&!f&&!p&&!h&&/linux/i.test(t),S=n(/edge\/(\d+(\.\d+)?)/i),y=n(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(t)&&!/tablet pc/i.test(t),O=!w&&/[^-]mobi/i.test(t),_=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:e,version:y||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:e,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:e,version:y||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:e,version:y||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:e,version:y||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(i={name:"Windows Phone",windowsphone:e},S?(i.msedge=e,i.version=S):(i.msie=e,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?i={name:"Chrome",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?i={name:"Microsoft Edge",msedge:e,version:S}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||y}:f?i={name:"Sailfish",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=e)):d?i={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",blackberry:e,version:y||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(i={name:"WebOS",webos:e,version:y||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=e)):/bada/i.test(t)?i={name:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}:/chromium/i.test(t)?i={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:y}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:e},y&&(i.version=y)):s?(i={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"},y&&(i.version=y)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||y}:{name:n(/^(.*)\/(.*) /),version:(r=/^(.*)\/(.*) /,o=t.match(r),o&&o.length>1&&o[2]||"")},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=e):(i.name=i.name||"Webkit",i.webkit=e),!i.version&&y&&(i.version=y)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=e,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||i.msedge||!a&&!i.silk?i.windowsphone||i.msedge||!s?v?i.mac=e:_?i.xbox=e:b?i.windows=e:m&&(i.linux=e):(i[s]=e,i.ios=e):i.android=e;var P="";i.windows?P=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?P=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?P=(P=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):s?P=(P=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):a?P=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?P=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?P=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?P=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(P=n(/tizen[\/\s](\d+(\.\d+)*)/i)),P&&(i.osversion=P);var E=!i.windows&&P.split(".")[0];return w||c||"ipad"==s||a&&(3==E||E>=4&&!O)||i.silk?i.tablet=e:(O||"iphone"==s||"ipod"==s||a||u||i.blackberry||i.webos||i.bada)&&(i.mobile=e),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=e:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=e:i.x=e,i}var n=t("undefined"!=typeof navigator&&navigator.userAgent||"");function i(e){return e.split(".").length}function r(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function o(e){for(var t=Math.max(i(e[0]),i(e[1])),n=r(e,function(e){var n=t-i(e);return r((e+=new Array(n+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--t>=0;){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(0===t)return 0}}function s(e,i,r){var s=n;"string"==typeof i&&(r=i,i=void 0),void 0===i&&(i=!1),r&&(s=t(r));var a=""+s.version;for(var u in e)if(e.hasOwnProperty(u)&&s[u]){if("string"!=typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return o([a,e[u]])<0}return i}return n.test=function(e){for(var t=0;t<e.length;++t){var i=e[t];if("string"==typeof i&&i in n)return!0}return!1},n.isUnsupportedBrowser=s,n.compareVersions=o,n.check=function(e,t,n){return!s(e,t,n)},n._detect=t,n},void 0!==e&&e.exports?e.exports=i():n(99)("bowser",i)},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(98)),o=function(){function e(){}return e.contains=function(e,t){return!!e&&-1!==e.indexOf(t)},e.getConsoleStyle=function(e){return"code"==e?'padding: 0 1px 1px 5px;border: 1px solid #ddd;border-radius: 3px;font-family: Monaco,"DejaVu Sans Mono","Courier New",monospace;color: #444;':"bold"==e?"font-weight: 600;color: rgb(51, 51, 51);":"alert"==e?"font-weight: 600;color: red;":"event"==e?"color: green;":"postmessage"==e?"color: orange;":"serviceworkermessage"==e?"color: purple;":""},e.trimUndefined=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0===e[t]&&delete e[t];return e},e.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.stringify=function(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?"[Function]":t},4)},e.encodeHashAsUriComponent=function(e){for(var t="",n=0,i=Object.keys(e);n<i.length;n++){var r=i[n],o=e[r];t+=encodeURIComponent(r)+"="+encodeURIComponent(o)}return t},e.timeoutPromise=function(e,t){var n=new Promise(function(e,n){setTimeout(function(){n(new r.default)},t)});return Promise.race([e,n])},e.getValueOrDefault=function(e,t){return void 0!==e&&null!==e?e:t},e.enforceAppId=function(e){if(!e)throw new Error("App id cannot be empty")},e.enforcePlayerId=function(e){if(!e)throw new Error("Player id cannot be empty")},e}();t.Utils=o,t.default=o},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(7)),u=n(71);(s=t.InvalidStateReason||(t.InvalidStateReason={}))[s.MissingAppId=0]="MissingAppId",s[s.RedundantPermissionMessage=1]="RedundantPermissionMessage",s[s.PushPermissionAlreadyGranted=2]="PushPermissionAlreadyGranted",s[s.UnsupportedEnvironment=3]="UnsupportedEnvironment",s[s.MissingDomElement=4]="MissingDomElement",s[s.ServiceWorkerNotActivated=5]="ServiceWorkerNotActivated",s[s.NoProxyFrame=6]="NoProxyFrame";var InvalidStateError=function(e){function InvalidStateError(n,i){var r=this;switch(n){case t.InvalidStateReason.MissingAppId:r=e.call(this,"Missing required app ID.")||this;break;case t.InvalidStateReason.RedundantPermissionMessage:var o="";i&&i.permissionPromptType&&(o="("+u.PermissionPromptType[i.permissionPromptType]+")"),r=e.call(this,"Another permission message "+o+" is being displayed.")||this;break;case t.InvalidStateReason.PushPermissionAlreadyGranted:r=e.call(this,"Push permission has already been granted.")||this;break;case t.InvalidStateReason.UnsupportedEnvironment:r=e.call(this,"The current environment does not support this operation.")||this;break;case t.InvalidStateReason.ServiceWorkerNotActivated:r=e.call(this,"The service worker must be activated first.")||this;break;case t.InvalidStateReason.NoProxyFrame:r=e.call(this,"No proxy frame.")||this}return r.description=t.InvalidStateReason[n],r.reason=n,Object.setPrototypeOf(r,InvalidStateError.prototype),r}return r(InvalidStateError,e),InvalidStateError}(a.default);t.InvalidStateError=InvalidStateError},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),a=o(n(2)),u=o(n(1)),c=o(n(8)),l=o(n(35)),d=o(n(0)),f=n(15),p=n(16),h=n(6),g=n(26),b=n(10),v=function(){function e(){}return e.fixWordpressManifestIfMisplaced=function(){var e=document.querySelectorAll("link[rel=manifest]");if(e&&!(e.length<=1))for(var t=0;t<e.length;t++){var n=e[t],i=n.href;if(b.Utils.contains(i,"gcm_sender_id")){var r=document.querySelector("head");r.insertBefore(n,r.children[0]),d.default.info("OneSignal: Moved the WordPress push <manifest> to the first element in <head>.")}}},e.getCurrentNotificationType=function(){return i(this,void 0,void 0,function(){var e,t;return r(this,function(n){switch(n.label){case 0:return[4,OneSignal.context.permissionManager.getNotificationPermission(OneSignal.context.appConfig.safariWebId)];case 1:return(e=n.sent())===p.NotificationPermission.Default?[2,f.SubscriptionStateKind.Default]:e===p.NotificationPermission.Denied?[2,h.OneSignalUtils.isUsingSubscriptionWorkaround()?f.SubscriptionStateKind.Default:f.SubscriptionStateKind.NotSubscribed]:[4,OneSignal.context.subscriptionManager.isAlreadyRegisteredWithOneSignal()];case 2:return t=n.sent(),e===p.NotificationPermission.Granted&&t?[4,OneSignal.privateIsPushNotificationsEnabled()]:[3,4];case 3:return[2,n.sent()?f.SubscriptionStateKind.Subscribed:f.SubscriptionStateKind.MutedByApi];case 4:return[2,f.SubscriptionStateKind.Default]}})})},e.getNotificationTypeFromOptIn=function(e){return 1==e||null==e?f.SubscriptionStateKind.Subscribed:f.SubscriptionStateKind.MutedByApi},e.wasHttpsNativePromptDismissed=function(){return"dismissed"===l.default.getItem("onesignal-notification-prompt")},e.markHttpPopoverShown=function(){sessionStorage.setItem("ONESIGNAL_HTTP_PROMPT_SHOWN","true")},e.isHttpPromptAlreadyShown=function(){return"true"==sessionStorage.getItem("ONESIGNAL_HTTP_PROMPT_SHOWN")},e.checkAndTriggerNotificationPermissionChanged=function(){return i(this,void 0,void 0,function(){var e,t;return r(this,function(n){switch(n.label){case 0:return[4,c.default.get("Options","notificationPermission")];case 1:return e=n.sent(),[4,OneSignal.getNotificationPermission()];case 2:return t=n.sent(),e===t?[3,5]:[4,g.PermissionUtils.triggerNotificationPermissionChanged()];case 3:return n.sent(),[4,c.default.put("Options",{key:"notificationPermission",value:t})];case 4:n.sent(),n.label=5;case 5:return[2]}})})},e.getNotificationIcons=function(){return i(this,void 0,void 0,function(){var t,n,i;return r(this,function(r){switch(r.label){case 0:return[4,e.getAppId()];case 1:if(!(t=r.sent()))throw new s.InvalidStateError(s.InvalidStateReason.MissingAppId);return n=u.default.getOneSignalApiUrl().toString()+"/apps/"+t+"/icon",[4,fetch(n)];case 2:return[4,r.sent().json()];case 3:if((i=r.sent()).errors)throw d.default.error("API call %c"+n,b.Utils.getConsoleStyle("code"),"failed with:",i.errors),new Error("Failed to get notification icons.");return[2,i]}})})},e.getSlidedownPermissionMessageOptions=function(){var e="We'd like to show you notifications for the latest news and updates.",t=OneSignal.config.userConfig.promptOptions;return t?t.slidedown?{autoPrompt:t.slidedown.autoPrompt,actionMessage:t.slidedown.actionMessage||e,acceptButtonText:t.slidedown.acceptButtonText||"Allow",cancelButtonText:t.slidedown.cancelButtonText||"No Thanks"}:{autoPrompt:!1,actionMessage:t.actionMessage||e,acceptButtonText:t.acceptButtonText||"Allow",cancelButtonText:t.cancelButtonText||"No Thanks"}:{autoPrompt:!1,actionMessage:e,acceptButtonText:"Allow",cancelButtonText:"No Thanks"}},e.getFullscreenPermissionMessageOptions=function(){var e=OneSignal.config.userConfig.promptOptions;return e?e.fullscreen?{autoAcceptTitle:e.fullscreen.autoAcceptTitle,actionMessage:e.fullscreen.actionMessage,exampleNotificationTitleDesktop:e.fullscreen.title,exampleNotificationTitleMobile:e.fullscreen.title,exampleNotificationMessageDesktop:e.fullscreen.message,exampleNotificationMessageMobile:e.fullscreen.message,exampleNotificationCaption:e.fullscreen.caption,acceptButtonText:e.fullscreen.acceptButton,cancelButtonText:e.fullscreen.cancelButton}:e:null},e.getPromptOptionsQueryString=function(){var t="";if(e.getFullscreenPermissionMessageOptions())for(var n=e.getPromptOptionsPostHash(),i=0,r=Object.keys(n);i<r.length;i++){var o=r[i];t+="&"+o+"="+n[o]}return t},e.getPromptOptionsPostHash=function(){var t=e.getFullscreenPermissionMessageOptions();if(t){for(var n={exampleNotificationTitleDesktop:"exampleNotificationTitle",exampleNotificationMessageDesktop:"exampleNotificationMessage",exampleNotificationTitleMobile:"exampleNotificationTitle",exampleNotificationMessageMobile:"exampleNotificationMessage"},i=0,r=Object.keys(n);i<r.length;i++){var o=r[i],s=n[o];t[o]&&(t[s]=t[o])}for(var a=["autoAcceptTitle","siteName","autoAcceptTitle","subscribeText","showGraphic","actionMessage","exampleNotificationTitle","exampleNotificationMessage","exampleNotificationCaption","acceptButtonText","cancelButtonText","timeout"],u={},c=0;c<a.length;c++){var l=a[c],d=t[l],f=encodeURIComponent(d);(d||!1===d||""===d)&&(u[l]=f)}}return u},e.triggerCustomPromptClicked=function(e){a.default.trigger(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED,{result:e})},e.getAppId=function(){return i(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return OneSignal.config.appId?[2,Promise.resolve(OneSignal.config.appId)]:[3,1];case 1:return[4,c.default.get("Ids","appId")];case 2:return[2,e.sent()]}})})},e}();t.default=v},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(7));(s=t.PushPermissionNotGrantedErrorReason||(t.PushPermissionNotGrantedErrorReason={}))[s.Blocked=0]="Blocked",s[s.Dismissed=1]="Dismissed",s[s.Default=2]="Default";var PushPermissionNotGrantedError=function(e){function PushPermissionNotGrantedError(n){var i=this;switch(n){case t.PushPermissionNotGrantedErrorReason.Dismissed:i=e.call(this,"The user dismissed the permission prompt.")||this;break;case t.PushPermissionNotGrantedErrorReason.Blocked:i=e.call(this,"Notification permissions are blocked.")||this;break;case t.PushPermissionNotGrantedErrorReason.Default:i=e.call(this,"Notification permissions have not been granted yet.")||this}return i.reason=n,Object.setPrototypeOf(i,PushPermissionNotGrantedError.prototype),i}return r(PushPermissionNotGrantedError,e),PushPermissionNotGrantedError}(a.default);t.default=PushPermissionNotGrantedError},function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(5)),u=s(n(1)),c=s(n(27)),l=s(n(0)),d=n(10),f=n(6),p=function(){function e(e,t,n){if(this.windowReference=e,this.sendToOrigin=t,this.receiveFromOrigin=n,!window||!window.postMessage)throw new Error("Must pass in a valid window reference supporting postMessage():"+e);if(!t||!n)throw new Error("Invalid origin. Must be set.");this.emitter=new c.default,this.channel=new MessageChannel,this.messagePort=null,this.isListening=!1,this.isConnected=!1,this.replies={}}return Object.defineProperty(e,"HANDSHAKE_MESSAGE",{get:function(){return"onesignal.postmam.handshake"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CONNECTED_MESSAGE",{get:function(){return"onesignal.postmam.connected"},enumerable:!0,configurable:!0}),e.prototype.listen=function(){l.default.debug("(Postmam) Called listen()."),this.isListening?l.default.debug("(Postmam) Already listening for Postmam connections."):a.default.isBrowser()&&(this.isListening=!0,l.default.debug("(Postmam) Listening for Postmam connections.",this),window.addEventListener("message",this.onWindowMessagePostmanConnectReceived.bind(this)))},e.prototype.startPostMessageReceive=function(){window.addEventListener("message",this.onWindowPostMessageReceived.bind(this))},e.prototype.stopPostMessageReceive=function(){window.removeEventListener("message",this.onWindowPostMessageReceived)},e.prototype.destroy=function(){this.stopPostMessageReceive(),this.emitter.removeAllListeners()},e.prototype.onWindowPostMessageReceived=function(t){if(this.isSafeOrigin(t.origin)){var n=t.data,r=n.id,o=n.command,s=n.data,a=n.source;if(o===e.CONNECTED_MESSAGE)return this.emitter.emit("connect"),void(this.isConnected=!0);var u={id:r,command:o,data:s,source:a},c=i({reply:this.reply.bind(this,u)},u);if(this.replies.hasOwnProperty(r))l.default.info("(Postmam) This message is a reply."),!1===this.replies[r].bind(window)(c)&&delete this.replies[r];else this.emitter.emit(o,c)}},e.prototype.onWindowMessagePostmanConnectReceived=function(t){var n=u.default.getWindowEnv().toString();(l.default.debug("(Postmam) ("+n+") Window postmessage for Postman connect received:",t),this.isSafeOrigin(t.origin))&&(t.data.handshake===e.HANDSHAKE_MESSAGE?(l.default.info("(Postmam) Got our expected Postmam handshake message (and connecting...):",t.data),window.removeEventListener("message",this.onWindowMessagePostmanConnectReceived),this.messagePort=t.ports[0],this.messagePort.addEventListener("message",this.onMessageReceived.bind(this),!1),l.default.info("(Postmam) Removed previous message event listener for handshakes, replaced with main message listener."),this.messagePort.start(),this.isConnected=!0,l.default.info("(Postmam) ("+n+") Connected."),this.message(e.CONNECTED_MESSAGE),this.emitter.emit("connect")):l.default.info("(Postmam) Got a postmam message, but not our expected handshake:",t.data))},e.prototype.connect=function(){l.default.info("(Postmam) ("+u.default.getWindowEnv().toString()+") Establishing a connection to "+this.sendToOrigin+"."),this.messagePort=this.channel.port1,this.messagePort.addEventListener("message",this.onMessageReceived.bind(this),!1),this.messagePort.start(),this.windowReference.postMessage({handshake:e.HANDSHAKE_MESSAGE},this.sendToOrigin,[this.channel.port2])},e.prototype.onMessageReceived=function(t){if(t.data){var n=t.data,r=n.id,o=n.command,s=n.data,a=n.source;if(o===e.CONNECTED_MESSAGE)return this.emitter.emit("connect"),void(this.isConnected=!0);var c={id:r,command:o,data:s,source:a},d=i({reply:this.reply.bind(this,c)},c);if(this.replies.hasOwnProperty(r))!1===this.replies[r].bind(window)(d)&&delete this.replies[r];else this.emitter.emit(o,d)}else l.default.debug("("+u.default.getWindowEnv().toString()+") Received an empty Postmam message:",t)},e.prototype.reply=function(e,t,n){var i={id:e.id,command:e.command,data:t,source:u.default.getWindowEnv().toString(),isReply:!0};"function"==typeof n&&(this.replies[i.id]=n),this.messagePort.postMessage(i)},e.prototype.postMessage=function(e,t,n){if(!e||""==e)throw new Error("(Postmam) Postmam command must not be empty.");if("function"!=typeof t){var i={id:f.OneSignalUtils.getRandomUuid(),command:e,data:t,source:u.default.getWindowEnv().toString()};"function"==typeof n&&(this.replies[i.id]=n),this.windowReference.postMessage(i,"*")}else l.default.debug("You passed a function to data, did you mean to pass null?")},e.prototype.message=function(e,t,n){if(!e||""==e)throw new Error("(Postmam) Postmam command must not be empty.");if("function"!=typeof t){var i={id:f.OneSignalUtils.getRandomUuid(),command:e,data:t,source:u.default.getWindowEnv().toString()};"function"==typeof n&&(this.replies[i.id]=n),this.messagePort.postMessage(i)}else l.default.debug("You passed a function to data, did you mean to pass null?")},e.prototype.generateSafeOrigins=function(e){var t=[];try{var n=new URL(e),i=n.host;0===n.host.indexOf("www.")&&(i=n.host.replace("www.","")),"https:"===n.protocol?(t.push("https://"+i),t.push("https://www."+i)):"http:"===n.protocol&&(t.push("http://"+i),t.push("http://www."+i),t.push("https://"+i),t.push("https://www."+i))}catch(e){}return t},e.prototype.isSafeOrigin=function(e){if(OneSignal.config)t=OneSignal.config.subdomain;else var t="x";var n=this.generateSafeOrigins(this.receiveFromOrigin);return"https://onesignal.com"===e||e==="https://"+(t||"")+".onesignal.com"||e==="https://"+(t||"")+".os.tc"||e==="https://"+(t||"")+".os.tc:3001"||e===u.default.getOneSignalApiUrl().origin||"*"===this.receiveFromOrigin||d.Utils.contains(n,e)},e.prototype.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.emitter.on.apply(this.emitter,e)]})})},e.prototype.off=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.emitter.off.apply(this.emitter,e)]})})},e.prototype.once=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.emitter.once.apply(this.emitter,e)]})})},e}();t.default=p},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.SubscriptionStateKind||(t.SubscriptionStateKind={}))[i.Default=0]="Default",i[i.Subscribed=1]="Subscribed",i[i.MutedByApi=-2]="MutedByApi",i[i.NotSubscribed=-10]="NotSubscribed",i[i.TemporaryWebRecord=-20]="TemporaryWebRecord",i[i.PermissionRevoked=-21]="PermissionRevoked",i[i.PushSubscriptionRevoked=-22]="PushSubscriptionRevoked",i[i.ServiceWorkerStatus403=-23]="ServiceWorkerStatus403",i[i.ServiceWorkerStatus404=-24]="ServiceWorkerStatus404"},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationPermission=i,function(e){e.Default="default",e.Granted="granted",e.Denied="denied"}(i||(t.NotificationPermission=i={}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(9)),a=o(n(5)),u=o(n(66)),c=n(21),l=n(11),d=n(65),f=o(n(64)),p=o(n(13)),h=n(13),g=n(25),b=o(n(2)),v=o(n(39)),m=o(n(94)),S=o(n(59)),y=o(n(12)),w=o(n(23)),O=o(n(54)),_=o(n(24)),P=o(n(80)),E=o(n(60)),I=o(n(1)),C=o(n(53)),k=n(16),M=n(71),A=n(3),T=o(n(43)),N=o(n(78)),x=o(n(8)),R=o(n(69)),D=n(4),W=n(77),U=n(37),B=n(76),L=o(n(35)),j=n(68),K=n(38),H=o(n(27)),F=o(n(0)),V=o(n(7)),G=o(n(44)),z=o(n(6)),q=function(){function e(){}return e.setDefaultNotificationUrl=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:if(!W.ValidatorUtils.isValidUrl(e,{allowNull:!0}))throw new c.InvalidArgumentError("url",c.InvalidArgumentReason.Malformed);return[4,D.awaitOneSignalInitAndSupported()];case 1:return n.sent(),D.logMethodCall("setDefaultNotificationUrl",e),[4,x.default.getAppState()];case 2:return(t=n.sent()).defaultNotificationUrl=e,[4,x.default.setAppState(t)];case 3:return n.sent(),[2]}})})},e.setDefaultTitle=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return n.sent(),D.logMethodCall("setDefaultTitle",e),[4,x.default.getAppState()];case 2:return(t=n.sent()).defaultNotificationTitle=e,[4,x.default.setAppState(t)];case 3:return n.sent(),[2]}})})},e.setEmail=function(e,t){return i(this,void 0,void 0,function(){var n,i,o,s,a,u,l;return r(this,function(r){switch(r.label){case 0:if(!e)throw new c.InvalidArgumentError("email",c.InvalidArgumentReason.Empty);if(!D.isValidEmail(e))throw new c.InvalidArgumentError("email",c.InvalidArgumentReason.Malformed);if(t&&t.emailAuthHash&&64!==t.emailAuthHash.length)throw new c.InvalidArgumentError("options.emailAuthHash",c.InvalidArgumentReason.Malformed);return[4,D.awaitOneSignalInitAndSupported()];case 1:return r.sent(),D.logMethodCall("setEmail",e,t),[4,x.default.getAppConfig()];case 2:return n=r.sent(),[4,x.default.getSubscription()];case 3:return i=r.sent().deviceId,[4,x.default.getEmailProfile()];case 4:if(o=r.sent(),n.emailAuthRequired&&(!t||!t.emailAuthHash))throw new c.InvalidArgumentError("options.emailAuthHash",c.InvalidArgumentReason.Empty);return s=new j.EmailProfile(o.emailId,e),t&&t.emailAuthHash&&(s.emailAuthHash=t.emailAuthHash),(a=!!o.emailId)&&n.emailAuthRequired?(u=s,[4,T.default.updateEmailRecord(n,s,i)]):[3,6];case 5:return u.emailId=r.sent(),[3,8];case 6:return l=s,[4,T.default.createEmailRecord(n,s,i)];case 7:l.emailId=r.sent(),r.label=8;case 8:return!i||a&&o.emailId===s.emailId&&o.emailAddress&&s.emailAddress===o.emailAddress?[3,10]:[4,T.default.updatePlayer(n.appId,i,{parent_player_id:s.emailId,email:s.emailAddress})];case 9:r.sent(),r.label=10;case 10:return[4,x.default.setEmailProfile(s)];case 11:return r.sent(),[2,s.emailId]}})})},e.logoutEmail=function(){return i(this,void 0,void 0,function(){var e,t,n;return r(this,function(i){switch(i.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return i.sent(),[4,x.default.getAppConfig()];case 2:return e=i.sent(),[4,x.default.getEmailProfile()];case 3:return t=i.sent(),[4,x.default.getSubscription()];case 4:return n=i.sent().deviceId,t.emailId?n?[4,T.default.logoutEmail(e,t,n)]:(F.default.warn(new d.NotSubscribedError(d.NotSubscribedReason.NoDeviceId)),[2]):(F.default.warn(new d.NotSubscribedError(d.NotSubscribedReason.NoEmailSet)),[2]);case 5:return i.sent()?[4,x.default.setEmailProfile(new j.EmailProfile)]:(F.default.warn("Failed to logout email."),[2]);case 6:return i.sent(),[2]}})})},e.isPushNotificationsSupported=function(){return D.logMethodCall("isPushNotificationsSupported"),!0},e.initializeConfig=function(t){return i(this,void 0,void 0,function(){var n;return r(this,function(i){switch(i.label){case 0:return[4,(new G.default).getAppConfig(t)];case 1:return n=i.sent(),F.default.debug("OneSignal: Final web app config: %c"+JSON.stringify(n,null,4),D.getConsoleStyle("code")),e.context=new C.default(n),e.config=e.context.appConfig,[2]}})})},e.init=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return D.logMethodCall("init"),[4,S.default.polyfillSafariFetch()];case 1:return n.sent(),S.default.errorIfInitAlreadyCalled(),[4,e.initializeConfig(t)];case 2:return n.sent(),s.default.safari&&!e.config.safariWebId?(F.default.warn(new g.SdkInitError(g.SdkInitErrorKind.MissingSafariWebId)),[2]):e.config.userConfig.requiresUserPrivacyConsent?[4,x.default.getProvideUserConsent()]:[3,4];case 3:if(!n.sent())return e.pendingInit=!0,[2];n.label=4;case 4:return[4,e.delayedInit()];case 5:return n.sent(),[2]}})})},e.delayedInit=function(){return i(this,void 0,void 0,function(){function t(){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:if(e.__initAlreadyCalled)return[2];if(e.__initAlreadyCalled=!0,y.default.fixWordpressManifestIfMisplaced(),e.emitter.on(e.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,v.default.onNotificationPermissionChange),e.emitter.on(e.EVENTS.SUBSCRIPTION_CHANGED,v.default._onSubscriptionChanged),e.emitter.on(e.EVENTS.SDK_INITIALIZED,S.default.onSdkInitialized),!z.default.isUsingSubscriptionWorkaround())return[3,2];if(e.appConfig=e.config,!e.appConfig.subdomain)throw new g.SdkInitError(g.SdkInitErrorKind.MissingSubdomain);return t=e,[4,P.default.discoverAltOrigin(e.appConfig)];case 1:t.proxyFrameHost=n.sent(),n.label=2;case 2:return window.addEventListener("focus",function(){y.default.checkAndTriggerNotificationPermissionChanged()}),[4,S.default.initSaveState(document.title)];case 3:return n.sent(),[4,S.default.saveInitOptions()];case 4:return n.sent(),I.default.getWindowEnv()!==A.WindowEnvironmentKind.CustomIframe?[3,6]:[4,b.default.trigger(e.EVENTS.SDK_INITIALIZED)];case 5:return n.sent(),[3,8];case 6:return[4,S.default.internalInit()];case 7:n.sent(),n.label=8;case 8:return[2]}})})}return r(this,function(n){switch(n.label){case 0:return e.pendingInit=!1,e.context.workerMessenger.listen(),"complete"!==document.readyState&&"interactive"!==document.readyState?[3,2]:[4,t()];case 1:return n.sent(),[3,3];case 2:F.default.debug("OneSignal: Waiting for DOMContentLoaded or readyStateChange event before continuing initialization..."),window.addEventListener("DOMContentLoaded",function(){t()}),document.onreadystatechange=function(){"complete"!==document.readyState&&"interactive"!==document.readyState||t()},n.label=3;case 3:return[2]}})})},e.provideUserConsent=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,x.default.setProvideUserConsent(t)];case 1:return n.sent(),t&&e.pendingInit?[4,e.delayedInit()]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.showHttpPermissionRequest=function(t){return i(this,void 0,void 0,function(){return r(this,function(t){return F.default.debug("Called showHttpPermissionRequest(), redirecting to HTTP prompt."),e.showHttpPrompt().catch(function(e){return F.default.info(e)}),[2]})})},e.showHttpPrompt=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return n.sent(),[4,e.privateShowHttpPrompt(t)];case 2:return n.sent(),[2]}})})},e.privateShowHttpPrompt=function(t){return i(this,void 0,void 0,function(){var n;return r(this,function(i){switch(i.label){case 0:if(t||(t={}),e.__isPopoverShowing)throw new l.InvalidStateError(l.InvalidStateReason.RedundantPermissionMessage,{permissionPromptType:M.PermissionPromptType.SlidedownPermissionMessage});return y.default.wasHttpsNativePromptDismissed()&&!t.force?(F.default.info(new f.default),[2]):[4,e.privateGetNotificationPermission()];case 1:return i.sent()===k.NotificationPermission.Denied?(F.default.info(new p.default(h.PushPermissionNotGrantedErrorReason.Blocked)),[2]):[4,e.privateIsPushNotificationsEnabled()];case 2:if(i.sent())throw new u.default;return[4,e.privateGetSubscription()];case 3:if(!i.sent())throw new d.NotSubscribedError(d.NotSubscribedReason.OptedOut);return y.default.markHttpPopoverShown(),[4,e.context.dynamicResourceLoader.loadSdkStylesheet()];case 4:return 0!==i.sent()?(F.default.debug("Not showing slidedown permission message because styles failed to load."),[2]):(n=y.default.getSlidedownPermissionMessageOptions(),e.popover=new N.default(n),[4,e.popover.create()]);case 5:return i.sent(),F.default.debug("Showing the HTTP popover."),e.notifyButton&&e.notifyButton.options.enable&&"hidden"!==e.notifyButton.launcher.state&&e.notifyButton.launcher.waitUntilShown().then(function(){e.notifyButton.launcher.hide()}),e.emitter.once(N.default.EVENTS.SHOWN,function(){e.__isPopoverShowing=!0}),e.emitter.once(N.default.EVENTS.CLOSED,function(){e.__isPopoverShowing=!1,e.notifyButton&&e.notifyButton.options.enable&&e.notifyButton.launcher.show()}),e.emitter.once(N.default.EVENTS.ALLOW_CLICK,function(){e.popover.close(),F.default.debug("Setting flag to not show the popover to the user again."),O.default.markHttpsNativePromptDismissed(),e.registerForPushNotifications({autoAccept:!0})}),e.emitter.once(N.default.EVENTS.CANCEL_CLICK,function(){F.default.debug("Setting flag to not show the popover to the user again."),O.default.markHttpsNativePromptDismissed()}),[2]}})})},e.registerForPushNotifications=function(t){return i(this,void 0,void 0,function(){var n=this;function o(){return i(this,void 0,void 0,function(){var e;return r(this,function(n){switch(n.label){case 0:return t&&t.httpPermissionRequest&&z.default.isUsingSubscriptionWorkaround()?(F.default.error(new B.DeprecatedApiError(B.DeprecatedApiReason.HttpPermissionRequest)),[2]):z.default.isUsingSubscriptionWorkaround()?[4,S.default.loadSubscriptionPopup(t)]:[3,2];case 1:return n.sent(),[3,6];case 2:return s.default.safari&&Number(s.default.version)>=12.1?[4,w.default.internalRegisterForPush(!1)]:[3,4];case 3:return n.sent(),[3,6];case 4:return(e=t||{}).__fromRegister=!0,[4,S.default.sessionInit(e)];case 5:n.sent(),n.label=6;case 6:return[2]}})})}return r(this,function(t){switch(t.label){case 0:return e.initialized?[3,2]:[4,new Promise(function(t,s){e.emitter.once(e.EVENTS.SDK_INITIALIZED,function(){return i(n,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,o()];case 1:return e.sent(),[2,t(void 0)]}})})})})];case 1:return t.sent(),[3,4];case 2:return[4,o()];case 3:return[2,t.sent()];case 4:return[2]}})})},e.getNotificationPermission=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return n.sent(),[2,e.privateGetNotificationPermission(t)]}})})},e.privateGetNotificationPermission=function(t){return i(this,void 0,void 0,function(){var n;return r(this,function(i){switch(i.label){case 0:return[4,e.context.permissionManager.getNotificationPermission(e.config.safariWebId)];case 1:return n=i.sent(),t&&t(n),[2,n]}})})},e.getTags=function(e){return i(this,void 0,void 0,function(){var t,n,i;return r(this,function(r){switch(r.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return r.sent(),D.logMethodCall("getTags",e),[4,x.default.getAppConfig()];case 2:return t=r.sent().appId,[4,x.default.getSubscription()];case 3:return(n=r.sent().deviceId)?[4,T.default.getPlayer(t,n)]:(F.default.info(new d.NotSubscribedError(d.NotSubscribedReason.NoDeviceId)),[2,null]);case 4:return i=r.sent().tags,D.executeCallback(e,i),[2,i]}})})},e.sendTag=function(t,n,o){return i(this,void 0,void 0,function(){var i;return r(this,function(r){switch(r.label){case 0:return(i={})[t]=n,[4,e.sendTags(i,o)];case 1:return[2,r.sent()]}})})},e.sendTags=function(t,n){return i(this,void 0,void 0,function(){var i,o,s;return r(this,function(r){switch(r.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return r.sent(),D.logMethodCall("sendTags",t,n),t&&0!==Object.keys(t).length?(Object.keys(t).forEach(function(e){!1===t[e]&&(t[e]="false")}),[4,x.default.getAppConfig()]):(F.default.info(new c.InvalidArgumentError("tags",c.InvalidArgumentReason.Empty)),[2,null]);case 2:return i=r.sent().appId,[4,x.default.getEmailProfile()];case 3:return(o=r.sent()).emailId?[4,T.default.updatePlayer(i,o.emailId,{tags:t,email_auth_hash:o.emailAuthHash})]:[3,5];case 4:r.sent(),r.label=5;case 5:return[4,x.default.getSubscription()];case 6:return r.sent().deviceId?[3,8]:[4,D.awaitSdkEvent(e.EVENTS.REGISTERED)];case 7:r.sent(),r.label=8;case 8:return[4,x.default.getSubscription()];case 9:return s=r.sent().deviceId,[4,T.default.updatePlayer(i,s,{tags:t})];case 10:return r.sent(),D.executeCallback(n,t),[2,t]}})})},e.deleteTag=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.deleteTags([t])];case 1:return[2,n.sent()]}})})},e.deleteTags=function(t,n){return i(this,void 0,void 0,function(){var i,o,s,a,u,l;return r(this,function(r){switch(r.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:if(r.sent(),D.logMethodCall("deleteTags",t,n),!W.ValidatorUtils.isValidArray(t))throw new c.InvalidArgumentError("tags",c.InvalidArgumentReason.Malformed);for(0===t.length&&F.default.info(new c.InvalidArgumentError("tags",c.InvalidArgumentReason.Empty)),i={},o=0,s=t;o<s.length;o++)a=s[o],i[a]="";return[4,e.sendTags(i)];case 2:return u=r.sent(),l=Object.keys(u),D.executeCallback(n,l),[2,l]}})})},e.addListenerForNotificationOpened=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return n.sent(),D.logMethodCall("addListenerForNotificationOpened",t),e.emitter.once(e.EVENTS.NOTIFICATION_CLICKED,function(e){D.executeCallback(t,e)}),v.default.fireStoredNotificationClicks(e.config.pageUrl||e.config.userConfig.pageUrl),[2]}})})},e.getIdsAvailable=function(e){return i(this,void 0,void 0,function(){var t,n,i,o;return r(this,function(r){switch(r.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return r.sent(),D.logMethodCall("getIdsAvailable",e),[4,x.default.getSubscription()];case 2:return t=r.sent(),n=t.deviceId,i=t.subscriptionToken,o={userId:n,registrationId:i},D.executeCallback(e,o),[2,o]}})})},e.isPushNotificationsEnabled=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return n.sent(),[2,e.privateIsPushNotificationsEnabled(t)]}})})},e.privateIsPushNotificationsEnabled=function(t){return i(this,void 0,void 0,function(){var n;return r(this,function(i){switch(i.label){case 0:return D.logMethodCall("isPushNotificationsEnabled",t),[4,e.context.subscriptionManager.getSubscriptionState()];case 1:return n=i.sent(),D.executeCallback(t,n.subscribed&&!n.optedOut),[2,n.subscribed&&!n.optedOut]}})})},e.setSubscription=function(e){return i(this,void 0,void 0,function(){var t,n,i,o;return r(this,function(r){switch(r.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return r.sent(),D.logMethodCall("setSubscription",e),[4,x.default.getAppConfig()];case 2:return t=r.sent(),n=t.appId,[4,x.default.getSubscription()];case 3:if(i=r.sent(),o=i.deviceId,!t.appId)throw new l.InvalidStateError(l.InvalidStateReason.MissingAppId);if(!W.ValidatorUtils.isValidBoolean(e))throw new c.InvalidArgumentError("newSubscription",c.InvalidArgumentReason.Malformed);return o?(i.optedOut=!e,[4,T.default.updatePlayer(n,o,{notification_types:y.default.getNotificationTypeFromOptIn(e)})]):(F.default.info(new d.NotSubscribedError(d.NotSubscribedReason.NoDeviceId)),[2]);case 4:return r.sent(),[4,x.default.setSubscription(i)];case 5:return r.sent(),v.default.onInternalSubscriptionSet(i.optedOut),v.default.checkAndTriggerSubscriptionChanged(),[2]}})})},e.isOptedOut=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return n.sent(),[2,e.internalIsOptedOut(t)]}})})},e.internalIsOptedOut=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return D.logMethodCall("isOptedOut",e),[4,x.default.getSubscription()];case 1:return t=n.sent().optedOut,D.executeCallback(e,t),[2,t]}})})},e.optOut=function(t,n){return i(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:if(i.sent(),D.logMethodCall("optOut",t,n),!W.ValidatorUtils.isValidBoolean(t))throw new c.InvalidArgumentError("doOptOut",c.InvalidArgumentReason.Malformed);return[4,e.setSubscription(!t)];case 2:return i.sent(),D.executeCallback(n),[2]}})})},e.getEmailId=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return i.sent(),D.logMethodCall("getEmailId",e),[4,x.default.getEmailProfile()];case 2:return t=i.sent(),n=t.emailId,D.executeCallback(e,n),[2,n]}})})},e.getUserId=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return i.sent(),D.logMethodCall("getUserId",e),[4,x.default.getSubscription()];case 2:return t=i.sent(),n=t.deviceId,D.executeCallback(e,n),[2,n]}})})},e.getRegistrationId=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return i.sent(),D.logMethodCall("getRegistrationId",e),[4,x.default.getSubscription()];case 2:return t=i.sent(),n=t.subscriptionToken,D.executeCallback(e,n),[2,n]}})})},e.getSubscription=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return n.sent(),[4,e.privateGetSubscription(t)];case 2:return[2,n.sent()]}})})},e.privateGetSubscription=function(e){return i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return D.logMethodCall("getSubscription",e),[4,x.default.getSubscription()];case 1:return t=i.sent(),n=!t.optedOut,D.executeCallback(e,n),[2,n]}})})},e.sendSelfNotification=function(t,n,o,s,a,u){return void 0===t&&(t="OneSignal Test Message"),void 0===n&&(n="This is an example notification."),void 0===o&&(o=new URL(location.href).origin+"?_osp=do_not_open"),i(this,void 0,void 0,function(){var i,f;return r(this,function(r){switch(r.label){case 0:return[4,D.awaitOneSignalInitAndSupported()];case 1:return r.sent(),D.logMethodCall("sendSelfNotification",t,n,o,s,a,u),[4,x.default.getAppConfig()];case 2:return i=r.sent(),[4,x.default.getSubscription()];case 3:if(f=r.sent(),!i.appId)throw new l.InvalidStateError(l.InvalidStateReason.MissingAppId);return[4,e.isPushNotificationsEnabled()];case 4:if(!r.sent())throw new d.NotSubscribedError(d.NotSubscribedReason.NoDeviceId);if(!W.ValidatorUtils.isValidUrl(o))throw new c.InvalidArgumentError("url",c.InvalidArgumentReason.Malformed);if(!W.ValidatorUtils.isValidUrl(s,{allowEmpty:!0,requireHttps:!0}))throw new c.InvalidArgumentError("icon",c.InvalidArgumentReason.Malformed);return[4,T.default.sendNotification(i.appId,[f.deviceId],{en:t},{en:n},o,s,a,u)];case 5:return[2,r.sent()]}})})},e.push=function(t){if("function"==typeof t)t();else{if(!Array.isArray(t))throw new V.default("Only accepts function and Array types!");if(0==t.length)throw new V.default("Empty array is not valid!");var n=t.shift();if(null==n||void 0===n)throw new V.default("First element in array must be the OneSignal function name");var i=e[n.toString()];if("function"!=typeof i)throw new V.default("No OneSignal function with the name '"+n+"'");i.apply(null,t)}},e.on=function(e,t){return this.emitter.on(e,t)},e.off=function(e,t){return this.emitter.off(e,t)},e.once=function(e,t){return this.emitter.once(e,t)},e}();t.default=q,q.VERSION=a.default.version(),q._VERSION=a.default.version(),q.sdkEnvironment=I.default,q._notificationOpenedCallbacks=[],q._idsAvailable_callback=[],q._defaultLaunchURL=null,q.config=null,q.__isPopoverShowing=!1,q._sessionInitAlreadyRunning=!1,q._isNotificationEnabledCallback=[],q._subscriptionSet=!0,q.modalUrl=null,q._windowWidth=650,q._windowHeight=568,q._isNewVisitor=!1,q._channel=null,q.timedLocalStorage=L.default,q.initialized=!1,q.notifyButton=null,q.store=_.default,q.environment=a.default,q.database=x.default,q.event=b.default,q.browser=s.default,q.popover=null,q.log=F.default,q.api=T.default,q.indexedDb=R.default,q.mainHelper=y.default,q.subscriptionHelper=w.default,q.httpHelper=m.default,q.eventHelper=v.default,q.initHelper=S.default,q.testHelper=O.default,q.appConfig=null,q.emitter=new H.default,q.SERVICE_WORKER_UPDATER_PATH="OneSignalSDKUpdaterWorker.js",q.SERVICE_WORKER_PATH="OneSignalSDKWorker.js",q.SERVICE_WORKER_PARAM={scope:"/"},q._LOGGING=!1,q.LOGGING=!1,q._usingNativePermissionHook=!1,q._initCalled=!1,q.__initAlreadyCalled=!1,q.checkAndWipeUserSubscription=function(){},q.DeviceRecord=U.DeviceRecord,q.EmailDeviceRecord=K.EmailDeviceRecord,q.notificationPermission=k.NotificationPermission,q._initHttp=m.default.initHttp,q._initPopup=function(){return q.subscriptionPopup.subscribe()},q.POSTMAM_COMMANDS={CONNECTED:"connect",REMOTE_NOTIFICATION_PERMISSION:"postmam.remoteNotificationPermission",REMOTE_DATABASE_GET:"postmam.remoteDatabaseGet",REMOTE_DATABASE_PUT:"postmam.remoteDatabasePut",REMOTE_DATABASE_REMOVE:"postmam.remoteDatabaseRemove",REMOTE_OPERATION_COMPLETE:"postman.operationComplete",REMOTE_RETRIGGER_EVENT:"postmam.remoteRetriggerEvent",MODAL_LOADED:"postmam.modalPrompt.loaded",MODAL_PROMPT_ACCEPTED:"postmam.modalPrompt.accepted",MODAL_PROMPT_REJECTED:"postmam.modalPrompt.canceled",POPUP_LOADED:"postmam.popup.loaded",POPUP_ACCEPTED:"postmam.popup.accepted",POPUP_REJECTED:"postmam.popup.canceled",POPUP_CLOSING:"postman.popup.closing",REMOTE_NOTIFICATION_PERMISSION_CHANGED:"postmam.remoteNotificationPermissionChanged",IFRAME_POPUP_INITIALIZE:"postmam.iframePopupInitialize",UNSUBSCRIBE_FROM_PUSH:"postmam.unsubscribeFromPush",SET_SESSION_COUNT:"postmam.setSessionCount",REQUEST_HOST_URL:"postmam.requestHostUrl",WINDOW_TIMEOUT:"postmam.windowTimeout",FINISH_REMOTE_REGISTRATION:"postmam.finishRemoteRegistration",FINISH_REMOTE_REGISTRATION_IN_PROGRESS:"postmam.finishRemoteRegistrationInProgress",POPUP_BEGIN_MESSAGEPORT_COMMS:"postmam.beginMessagePortComms",SERVICEWORKER_COMMAND_REDIRECT:"postmam.command.redirect",MARK_PROMPT_DISMISSED:"postmam.markPromptDismissed",IS_SUBSCRIBED:"postmam.isSubscribed",UNSUBSCRIBE_PROXY_FRAME:"postman.unsubscribeProxyFrame",GET_EVENT_LISTENER_COUNT:"postmam.getEventListenerCount",SERVICE_WORKER_STATE:"postmam.serviceWorkerState",GET_WORKER_VERSION:"postmam.getWorkerVersion",SUBSCRIPTION_EXPIRATION_STATE:"postmam.subscriptionExpirationState",PROCESS_EXPIRING_SUBSCRIPTIONS:"postmam.processExpiringSubscriptions",GET_SUBSCRIPTION_STATE:"postmam.getSubscriptionState"},q.EVENTS={CUSTOM_PROMPT_CLICKED:"customPromptClick",NATIVE_PROMPT_PERMISSIONCHANGED:"notificationPermissionChange",SUBSCRIPTION_CHANGED:"subscriptionChange",WELCOME_NOTIFICATION_SENT:"sendWelcomeNotification",NOTIFICATION_DISPLAYED:"notificationDisplay",NOTIFICATION_DISMISSED:"notificationDismiss",NOTIFICATION_CLICKED:"notificationClick",SDK_INITIALIZED:"initializeInternal",SDK_INITIALIZED_PUBLIC:"initialize",REGISTERED:"register",POPUP_CLOSING:"popupClose",PERMISSION_PROMPT_DISPLAYED:"permissionPromptDisplay",TEST_INIT_OPTION_DISABLED:"testInitOptionDisabled",TEST_WOULD_DISPLAY:"testWouldDisplay",POPUP_WINDOW_TIMEOUT:"popupWindowTimeout"},E.default.ensureBackwardsCompatibility(q),F.default.info("%cOneSignal Web SDK loaded (version "+q._VERSION+", "+I.default.getWindowEnv().toString()+" environment).",D.getConsoleStyle("bold")),F.default.debug("Current Page URL: "+("undefined"==typeof location?"NodeJS":location.href)),F.default.debug("Browser Environment: "+s.default.name+" "+s.default.version)},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(21),u=o(n(1)),c=n(28),l=n(3),d=o(n(5)),f=o(n(0));(s=t.WorkerMessengerCommand||(t.WorkerMessengerCommand={})).WorkerVersion="GetWorkerVersion",s.Subscribe="Subscribe",s.SubscribeNew="SubscribeNew",s.AmpSubscriptionState="amp-web-push-subscription-state",s.AmpSubscribe="amp-web-push-subscribe",s.AmpUnsubscribe="amp-web-push-unsubscribe",s.NotificationDisplayed="notification.displayed",s.NotificationClicked="notification.clicked",s.NotificationDismissed="notification.dismissed",s.RedirectPage="command.redirect";var p=function(){function e(){this.replies={}}return e.prototype.addListener=function(e,t,n){var i={callback:t,onceListenerOnly:n},r=this.replies[e.toString()];r?r.push(i):this.replies[e.toString()]=[i]},e.prototype.findListenersForMessage=function(e){return this.replies[e.toString()]||[]},e.prototype.deleteListenerRecords=function(e){this.replies[e.toString()]=null},e.prototype.deleteAllListenerRecords=function(){this.replies={}},e.prototype.deleteListenerRecord=function(e,t){var n=this.replies[e.toString()];if(null!=n)for(var i=n.length-1;i>=0;i--){n[i]===t&&n.splice(i,1)}},e}();t.WorkerMessengerReplyBuffer=p;var h=function(){function e(e,t){void 0===t&&(t=new p),this.context=e,this.replies=t}return e.prototype.broadcast=function(e,t){return i(this,void 0,void 0,function(){var n,i,o,s;return r(this,function(r){switch(r.label){case 0:return u.default.getWindowEnv()===l.WindowEnvironmentKind.ServiceWorker?[3,1]:[2];case 1:return[4,self.clients.matchAll({type:"window",includeUncontrolled:!0})];case 2:for(n=r.sent(),i=0,o=n;i<o.length;i++)s=o[i],f.default.debug("[Worker Messenger] [SW -> Page] Broadcasting '"+e.toString()+"' to window client "+s.url+"."),s.postMessage({command:e,payload:t});r.label=3;case 3:return[2]}})})},e.prototype.unicast=function(e,t,n){return i(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:if(u.default.getWindowEnv()!==l.WindowEnvironmentKind.ServiceWorker)return[3,1];if(!n)throw new a.InvalidArgumentError("windowClient",a.InvalidArgumentReason.Empty);return f.default.debug("[Worker Messenger] [SW -> Page] Unicasting '"+e.toString()+"' to window client "+n.url+"."),n.postMessage({command:e,payload:t}),[3,4];case 1:return[4,this.isWorkerControllingPage()];case 2:return i.sent()||f.default.debug("[Worker Messenger] The page is not controlled by the service worker yet. Waiting...",self.registration),[4,this.waitUntilWorkerControlsPage()];case 3:i.sent(),f.default.debug("[Worker Messenger] [Page -> SW] Unicasting '"+e.toString()+"' to service worker."),navigator.serviceWorker.controller.postMessage({command:e,payload:t}),i.label=4;case 4:return[2]}})})},e.prototype.listen=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return d.default.supportsServiceWorkers()?u.default.getWindowEnv()!==l.WindowEnvironmentKind.ServiceWorker?[3,1]:(self.addEventListener("message",this.onWorkerMessageReceivedFromPage.bind(this)),f.default.debug("[Worker Messenger] Service worker is now listening for messages."),[3,3]):[2];case 1:return[4,this.listenForPage(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.listenForPage=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e?[3,3]:[4,this.isWorkerControllingPage()];case 1:return t.sent()||f.default.debug("("+location.origin+") [Worker Messenger] The page is not controlled by the service worker yet. Waiting...",self.registration),[4,this.waitUntilWorkerControlsPage()];case 2:t.sent(),f.default.debug("("+location.origin+") [Worker Messenger] The page is now controlled by the service worker."),t.label=3;case 3:return navigator.serviceWorker.addEventListener("message",this.onPageMessageReceivedFromServiceWorker.bind(this)),f.default.debug("("+location.origin+") [Worker Messenger] Page is now listening for messages."),[2]}})})},e.prototype.onWorkerMessageReceivedFromPage=function(e){var t=e.data;if(t&&t.command){var n=this.replies.findListenersForMessage(t.command),i=[],r=[];f.default.debug("[Worker Messenger] Service worker received message:",e.data);for(var o=0,s=n;o<s.length;o++){(u=s[o]).onceListenerOnly&&i.push(u),r.push(u)}for(var a=i.length-1;a>=0;a--){var u=i[a];this.replies.deleteListenerRecord(t.command,u)}for(var c=0,l=r;c<l.length;c++){(u=l[c]).callback.apply(null,[t.payload])}}},e.prototype.onPageMessageReceivedFromServiceWorker=function(e){var t=e.data;if(t&&t.command){var n=this.replies.findListenersForMessage(t.command),i=[],r=[];f.default.debug("[Worker Messenger] Page received message:",e.data);for(var o=0,s=n;o<s.length;o++){(u=s[o]).onceListenerOnly&&i.push(u),r.push(u)}for(var a=i.length-1;a>=0;a--){var u=i[a];this.replies.deleteListenerRecord(t.command,u)}for(var c=0,l=r;c<l.length;c++){(u=l[c]).callback.apply(null,[t.payload])}}},e.prototype.on=function(e,t){this.replies.addListener(e,t,!1)},e.prototype.once=function(e,t){this.replies.addListener(e,t,!0)},e.prototype.off=function(e){e?this.replies.deleteListenerRecords(e):this.replies.deleteAllListenerRecords()},e.prototype.isWorkerControllingPage=function(){return i(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return u.default.getWindowEnv()!==l.WindowEnvironmentKind.ServiceWorker?[3,1]:[2,!!self.registration.active];case 1:return[4,this.context.serviceWorkerManager.getActiveState()];case 2:return[2,(e=t.sent())===c.ServiceWorkerActiveState.WorkerA||e===c.ServiceWorkerActiveState.WorkerB]}})})},e.prototype.waitUntilWorkerControlsPage=function(){return i(this,void 0,void 0,function(){var e=this;return r(this,function(t){return[2,new Promise(function(t){return i(e,void 0,void 0,function(){var e=this;return r(this,function(n){switch(n.label){case 0:return[4,this.isWorkerControllingPage()];case 1:return n.sent()?t():u.default.getWindowEnv()===l.WindowEnvironmentKind.ServiceWorker?self.addEventListener("activate",function(n){return i(e,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.isWorkerControllingPage()];case 1:return e.sent()&&t(),[2]}})})}):navigator.serviceWorker.addEventListener("controllerchange",function(n){return i(e,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.isWorkerControllingPage()];case 1:return e.sent()&&t(),[2]}})})}),[2]}})})})]})})},e}();t.WorkerMessenger=h},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var n=e.call(this,"This code is not implemented yet.")||this;return Object.setPrototypeOf(n,t.prototype),n}return r(t,e),t}(o(n(7)).default);t.default=s},function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(63),u=n(38),c=s(n(36)),l=s(n(10)),d=function(){function e(){}return e.getPlayer=function(e,t){return l.default.enforceAppId(e),l.default.enforcePlayerId(t),c.default.get("players/"+t+"?app_id="+e)},e.updatePlayer=function(e,t,n){return l.default.enforceAppId(e),l.default.enforcePlayerId(t),c.default.put("players/"+t,i({app_id:e},n))},e.sendNotification=function(e,t,n,i,r,o,s,a){var u={app_id:e,contents:i,include_player_ids:t,isAnyWeb:!0,data:s,web_buttons:a};return n&&(u.headings=n),r&&(u.url=r),o&&(u.chrome_web_icon=o,u.firefox_icon=o),l.default.trimUndefined(u),c.default.post("notifications",u)},e.createUser=function(e){return r(this,void 0,void 0,function(){var t,n;return o(this,function(i){switch(i.label){case 0:return t=e.serialize(),l.default.enforceAppId(t.app_id),[4,c.default.post("players",t)];case 1:return(n=i.sent())&&n.success?[2,n.id]:[2,null]}})})},e.createEmailRecord=function(e,t,n){return r(this,void 0,void 0,function(){var i,r;return o(this,function(o){switch(o.label){case 0:return l.default.enforceAppId(e.appId),(i=new u.EmailDeviceRecord(t.emailAddress,t.emailAuthHash,n)).appId=e.appId,[4,c.default.post("players",i.serialize())];case 1:return(r=o.sent())&&r.success?[2,r.id]:[2,null]}})})},e.updateEmailRecord=function(e,t,n){return r(this,void 0,void 0,function(){var i,r;return o(this,function(o){switch(o.label){case 0:return l.default.enforceAppId(e.appId),l.default.enforcePlayerId(t.emailId),(i=new u.EmailDeviceRecord(t.emailAddress,t.emailAuthHash,n)).appId=e.appId,[4,c.default.put("players/"+t.emailId,i.serialize())];case 1:return(r=o.sent())&&r.success?[2,r.id]:[2,null]}})})},e.logoutEmail=function(e,t,n){return r(this,void 0,void 0,function(){var i;return o(this,function(r){switch(r.label){case 0:return l.default.enforceAppId(e.appId),l.default.enforcePlayerId(n),[4,c.default.post("players/"+n+"/email_logout",{app_id:e.appId,parent_player_id:t.emailId,email_auth_hash:t.emailAuthHash?t.emailAuthHash:void 0})];case 1:return(i=r.sent())&&i.success?[2,!0]:[2,!1]}})})},e.updateUserSession=function(e,t){return r(this,void 0,void 0,function(){var n,i,r;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=t.serialize(),l.default.enforceAppId(n.app_id),l.default.enforcePlayerId(e),[4,c.default.post("players/"+e+"/on_session",n)];case 1:return(i=o.sent()).id?[2,i.id]:[2,e];case 2:throw(r=o.sent())&&Array.isArray(r.errors)&&r.errors.length>0&&l.default.contains(r.errors[0],"app_id not found")?new a.OneSignalApiError(a.OneSignalApiErrorKind.MissingAppId):r;case 3:return[2]}})})},e}();t.default=d},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(7));(s=t.InvalidArgumentReason||(t.InvalidArgumentReason={}))[s.Empty=0]="Empty",s[s.Malformed=1]="Malformed",s[s.EnumOutOfRange=2]="EnumOutOfRange";var InvalidArgumentError=function(e){function InvalidArgumentError(n,i){var r=this;switch(i){case t.InvalidArgumentReason.Empty:r=e.call(this,"Supply a non-empty value to '"+n+"'.")||this;break;case t.InvalidArgumentReason.Malformed:r=e.call(this,"The value for '"+n+"' was malformed.")||this;break;case t.InvalidArgumentReason.EnumOutOfRange:r=e.call(this,"The value for '"+n+"' was out of range of the expected input enum.")||this}return r.argument=n,r.reason=t.InvalidArgumentReason[i],Object.setPrototypeOf(r,InvalidArgumentError.prototype),r}return r(InvalidArgumentError,e),InvalidArgumentError}(a.default);t.InvalidArgumentError=InvalidArgumentError},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(9)),a=o(n(2)),u=o(n(12)),c=n(4),l=o(n(91)),d=o(n(90)),f=o(n(89)),p=o(n(88)),h=o(n(57)),g=o(n(0)),b=o(n(17)),v=function(){function e(t){var n=void 0===t?{}:t,o=n.enable,s=void 0!==o&&o,a=n.size,l=void 0===a?"medium":a,d=n.position,f=void 0===d?"bottom-right":d,p=n.theme,g=void 0===p?"default":p,v=n.showLauncherAfter,m=void 0===v?10:v,S=n.showBadgeAfter,y=void 0===S?300:S,w=n.text,O=void 0===w?{"tip.state.unsubscribed":"Subscribe to notifications","tip.state.subscribed":"You're subscribed to notifications","tip.state.blocked":"You've blocked notifications","message.prenotify":"Click to subscribe to notifications","message.action.subscribing":"Click <strong>{{prompt.native.grant}}</strong> to receive notifications","message.action.subscribed":"Thanks for subscribing!","message.action.resubscribed":"You're subscribed to notifications","message.action.unsubscribed":"You won't receive notifications again","dialog.main.title":"Manage Site Notifications","dialog.main.button.subscribe":"SUBSCRIBE","dialog.main.button.unsubscribe":"UNSUBSCRIBE","dialog.blocked.title":"Unblock Notifications","dialog.blocked.message":"Follow these instructions to allow notifications:"}:w,_=n.prenotify,P=void 0===_||_,E=n.showCredit,I=void 0===E||E,C=n.colors,k=void 0===C?null:C,M=n.offset,A=void 0===M?null:M,T=n.launcher,N=void 0===T?null:T,x=this;if(this.options={enable:s,size:l,position:f,theme:g,showLauncherAfter:m,showBadgeAfter:y,text:O,prenotify:P,showCredit:I,colors:k,offset:A},this.options.enable){if(!c.contains(["small","medium","large"],this.options.size))throw new Error("Invalid size "+this.options.size+" for notify button. Choose among 'small', 'medium', or 'large'.");if(!c.contains(["bottom-left","bottom-right"],this.options.position))throw new Error("Invalid position "+this.options.position+" for notify button. Choose either 'bottom-left', or 'bottom-right'.");if(!c.contains(["default","inverse"],this.options.theme))throw new Error("Invalid theme "+this.options.theme+" for notify button. Choose either 'default', or 'inverse'.");if(this.options.showLauncherAfter<0)throw new Error("Invalid delay duration of "+this.options.showLauncherAfter+" for showing the notify button. Choose a value above 0.");if(this.options.showBadgeAfter<0)throw new Error("Invalid delay duration of "+this.options.showBadgeAfter+" for showing the notify button's badge. Choose a value above 0.");this.size=this.options.size,this.position=this.options.position,this.text=this.options.text,this.text["tip.state.unsubscribed"]||(this.text["tip.state.unsubscribed"]="Subscribe to notifications"),this.text["tip.state.subscribed"]||(this.text["tip.state.subscribed"]="You're subscribed to notifications"),this.text["tip.state.blocked"]||(this.text["tip.state.blocked"]="You've blocked notifications"),this.text["message.prenotify"]||(this.text["message.prenotify"]="Click to subscribe to notifications"),this.text["message.action.subscribed"]||(this.text["message.action.subscribed"]="Thanks for subscribing!"),this.text["message.action.resubscribed"]||(this.text["message.action.resubscribed"]="You're subscribed to notifications"),this.text["message.action.subscribing"]||(this.text["message.action.subscribing"]="Click <strong>{{prompt.native.grant}}</strong> to receive notifications"),this.text["message.action.unsubscribed"]||(this.text["message.action.unsubscribed"]="You won't receive notifications again"),this.text["dialog.main.title"]||(this.text["dialog.main.title"]="Manage Site Notifications"),this.text["dialog.main.button.subscribe"]||(this.text["dialog.main.button.subscribe"]="SUBSCRIBE"),this.text["dialog.main.button.unsubscribe"]||(this.text["dialog.main.button.unsubscribe"]="UNSUBSCRIBE"),this.text["dialog.blocked.title"]||(this.text["dialog.blocked.title"]="Unblock Notifications"),this.text["dialog.blocked.message"]||(this.text["dialog.blocked.message"]="Follow these instructions to allow notifications:"),this._launcher=N,this.state=e.STATES.UNINITIALIZED,this._ignoreSubscriptionState=!1,b.default.emitter.on(e.EVENTS.SUBSCRIBE_CLICK,function(){x.dialog.subscribeButton.disabled=!0,x._ignoreSubscriptionState=!0,b.default.setSubscription(!0).then(function(){return x.dialog.subscribeButton.disabled=!1,x.dialog.hide()}).then(function(){return x.message.display(h.default.TYPES.MESSAGE,x.text["message.action.resubscribed"],h.default.TIMEOUT)}).then(function(){return x._ignoreSubscriptionState=!1,x.launcher.clearIfWasInactive(),x.launcher.inactivate()}).then(function(){return x.updateState()})}),b.default.emitter.on(e.EVENTS.UNSUBSCRIBE_CLICK,function(){x.dialog.unsubscribeButton.disabled=!0,b.default.setSubscription(!1).then(function(){return x.dialog.unsubscribeButton.disabled=!1,x.dialog.hide()}).then(function(){return x.launcher.clearIfWasInactive(),x.launcher.activate()}).then(function(){return x.message.display(h.default.TYPES.MESSAGE,x.text["message.action.unsubscribed"],h.default.TIMEOUT)}).then(function(){return x.updateState()})}),b.default.emitter.on(e.EVENTS.HOVERING,function(){x.hovering=!0,x.launcher.activateIfInactive(),x.message.shown||x.dialog.shown?x.hovering=!1:x.message.contentType!==h.default.TYPES.MESSAGE?new Promise(function(e){if(x.message.queued.length>0)return x.message.dequeue().then(function(t){x.message.content=t,x.message.contentType=h.default.TYPES.QUEUED,e()});x.message.content=c.decodeHtmlEntities(x.message.getTipForState()),x.message.contentType=h.default.TYPES.TIP,e()}).then(function(){return x.message.show()}).then(function(){x.hovering=!1}):x.hovering=!1}),b.default.emitter.on(e.EVENTS.HOVERED,function(){x.message.contentType!==h.default.TYPES.MESSAGE&&x.dialog.hidden&&(x.hovering&&(x.hovering=!1,x.message.waitUntilShown().then(function(){return c.delay(h.default.TIMEOUT)}).then(function(){return x.message.hide()}).then(function(){x.launcher.wasInactive&&x.dialog.hidden&&(x.launcher.inactivate(),x.launcher.wasInactive=null)})),x.message.shown&&x.message.hide().then(function(){x.launcher.wasInactive&&x.dialog.hidden&&(x.launcher.inactivate(),x.launcher.wasInactive=null)}))}),b.default.emitter.on(b.default.EVENTS.SUBSCRIPTION_CHANGED,function(t){return i(x,void 0,void 0,function(){var n,i=this;return r(this,function(r){switch(r.label){case 0:return 1!=t?[3,2]:(this.badge.shown&&this.options.prenotify&&this.badge.hide(),null!==this.dialog.notificationIcons?[3,2]:[4,u.default.getNotificationIcons()]);case 1:n=r.sent(),this.dialog.notificationIcons=n,r.label=2;case 2:return b.default.getNotificationPermission(function(n){i.setState(t?e.STATES.SUBSCRIBED:"denied"===n?e.STATES.BLOCKED:e.STATES.UNSUBSCRIBED,i._ignoreSubscriptionState)}),[2]}})})}),b.default.emitter.on(e.EVENTS.STATE_CHANGED,function(t){x.launcher.element&&(t.to===e.STATES.SUBSCRIBED?x.launcher.inactivate():(t.to===e.STATES.UNSUBSCRIBED||e.STATES.BLOCKED)&&x.launcher.activate())}),b.default.emitter.on(b.default.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,function(){x.updateState()}),this.updateState()}}return Object.defineProperty(e,"EVENTS",{get:function(){return{STATE_CHANGED:"notifyButtonStateChange",LAUNCHER_CLICK:"notifyButtonLauncherClick",BELL_CLICK:"notifyButtonButtonClick",SUBSCRIBE_CLICK:"notifyButtonSubscribeClick",UNSUBSCRIBE_CLICK:"notifyButtonUnsubscribeClick",HOVERING:"notifyButtonHovering",HOVERED:"notifyButtonHover"}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"STATES",{get:function(){return{UNINITIALIZED:"uninitialized",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed",BLOCKED:"blocked"}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TEXT_SUBS",{get:function(){return{"prompt.native.grant":{default:"Allow",chrome:"Allow",firefox:"Always Receive Notifications",safari:"Allow"}}},enumerable:!0,configurable:!0}),e.prototype.showDialogProcedure=function(){var e=this;this.dialog.shown||this.dialog.show().then(function(){c.once(document,"click",function(t,n){e.dialog.element.contains(t.target)||(n(),e.dialog.shown&&e.dialog.hide().then(function(){e.launcher.inactivateIfWasInactive()}))},!0)})},e.prototype.create=function(){return i(this,void 0,void 0,function(){var e,t,n,i,o=this;return r(this,function(r){switch(r.label){case 0:return this.options.enable?[4,b.default.context.dynamicResourceLoader.loadSdkStylesheet()]:[2];case 1:return 0!==r.sent()?(g.default.debug("Not showing notify button because styles failed to load."),[2]):(this.container&&c.removeDomElement("#onesignal-bell-container"),c.addDomElement("body","beforeend",'<div id="onesignal-bell-container" class="onesignal-bell-container onesignal-reset"></div>'),c.addDomElement(this.container,"beforeend",'<div id="onesignal-bell-launcher" class="onesignal-bell-launcher"></div>'),c.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-button"></div>'),c.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-badge"></div>'),c.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-message"></div>'),c.addDomElement(this.message.selector,"beforeend",'<div class="onesignal-bell-launcher-message-body"></div>'),c.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog"></div>'),c.addDomElement(this.dialog.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog-body"></div>'),c.addDomElement(this.button.selector,"beforeEnd",'<svg class="onesignal-bell-svg" xmlns="http://www.w3.org/2000/svg" width="99.7" height="99.7" viewBox="0 0 99.7 99.7"><circle class="background" cx="49.9" cy="49.9" r="49.9"/><path class="foreground" d="M50.1 66.2H27.7s-2-.2-2-2.1c0-1.9 1.7-2 1.7-2s6.7-3.2 6.7-5.5S33 52.7 33 43.3s6-16.6 13.2-16.6c0 0 1-2.4 3.9-2.4 2.8 0 3.8 2.4 3.8 2.4 7.2 0 13.2 7.2 13.2 16.6s-1 11-1 13.3c0 2.3 6.7 5.5 6.7 5.5s1.7.1 1.7 2c0 1.8-2.1 2.1-2.1 2.1H50.1zm-7.2 2.3h14.5s-1 6.3-7.2 6.3-7.3-6.3-7.3-6.3z"/><ellipse class="stroke" cx="49.9" cy="49.9" rx="37.4" ry="36.9"/></svg>'),[4,b.default.isPushNotificationsEnabled()]);case 2:return e=r.sent(),[4,b.default.getSubscription()];case 3:return t=r.sent(),[4,u.default.wasHttpsNativePromptDismissed()];case 4:return n=r.sent(),i=e?"small":this.options.size,[4,this.launcher.resize(i)];case 5:if(r.sent(),"bottom-left"===this.options.position)c.addCssClass(this.container,"onesignal-bell-container-bottom-left"),c.addCssClass(this.launcher.selector,"onesignal-bell-launcher-bottom-left");else{if("bottom-right"!==this.options.position)throw new Error("Invalid OneSignal notify button position "+this.options.position);c.addCssClass(this.container,"onesignal-bell-container-bottom-right"),c.addCssClass(this.launcher.selector,"onesignal-bell-launcher-bottom-right")}if("default"===this.options.theme)c.addCssClass(this.launcher.selector,"onesignal-bell-launcher-theme-default");else{if("inverse"!==this.options.theme)throw new Error("Invalid OneSignal notify button theme "+this.options.theme);c.addCssClass(this.launcher.selector,"onesignal-bell-launcher-theme-inverse")}return this.applyOffsetIfSpecified(),this.setCustomColorsIfSpecified(),this.patchSafariSvgFilterBug(),g.default.info("Showing the notify button."),[4,(e?this.launcher.inactivate():c.nothing()).then(function(){return b.default.getSubscription()}).then(function(t){return!e&&t||null!==o.dialog.notificationIcons?c.nothing():u.default.getNotificationIcons().then(function(e){o.dialog.notificationIcons=e})}).then(function(){return c.delay(o.options.showLauncherAfter)}).then(function(){return c.isUsingSubscriptionWorkaround()&&t&&!0!==n&&!e&&!0===b.default.config.userConfig.autoRegister&&!u.default.isHttpPromptAlreadyShown()?(g.default.debug("Not showing notify button because popover will be shown."),c.nothing()):o.launcher.show()}).then(function(){return c.delay(o.options.showBadgeAfter)}).then(function(){return o.options.prenotify&&!e&&b.default._isNewVisitor?o.message.enqueue(o.text["message.prenotify"]).then(function(){return o.badge.show()}):c.nothing()}).then(function(){return o.initialized=!0})];case 6:return r.sent(),[2]}})})},e.prototype.patchSafariSvgFilterBug=function(){if(!(s.default.safari&&Number(s.default.version)>=9.1)){var e="drop-shadow(0 2px 4px rgba(34,36,38,0.35));",t="drop-shadow(0 2px 4px rgba(34,36,38,0));",n="drop-shadow(0px 2px 2px rgba(34,36,38,.15));";this.graphic.setAttribute("style","filter: "+e+"; -webkit-filter: "+e+";"),this.badge.element.setAttribute("style","filter: "+t+"; -webkit-filter: "+t+";"),this.dialog.element.setAttribute("style","filter: "+n+"; -webkit-filter: "+n+";")}s.default.safari&&this.badge.element.setAttribute("style","display: none;")},e.prototype.applyOffsetIfSpecified=function(){var e=this.options.offset;e&&(this.launcher.element.style.cssText="",e.bottom&&(this.launcher.element.style.cssText+="bottom: "+e.bottom+";"),"bottom-right"===this.options.position?e.right&&(this.launcher.element.style.cssText+="right: "+e.right+";"):"bottom-left"===this.options.position&&e.left&&(this.launcher.element.style.cssText+="left: "+e.left+";"))},e.prototype.setCustomColorsIfSpecified=function(){var e=this.dialog.element.querySelector("button.action"),t=this.button.element.querySelector(".pulse-ring");this.graphic.querySelector(".background").style.cssText="";for(var n=this.graphic.querySelectorAll(".foreground"),i=0;i<n.length;i++){n[i].style.cssText=""}if(this.graphic.querySelector(".stroke").style.cssText="",this.badge.element.style.cssText="",e&&(e.style.cssText="",e.style.cssText=""),t&&(t.style.cssText=""),this.options.colors){var r=this.options.colors;if(r["circle.background"]&&(this.graphic.querySelector(".background").style.cssText+="fill: "+r["circle.background"]),r["circle.foreground"]){var o=this.graphic.querySelectorAll(".foreground");for(i=0;i<o.length;i++){o[i].style.cssText+="fill: "+r["circle.foreground"]}this.graphic.querySelector(".stroke").style.cssText+="stroke: "+r["circle.foreground"]}r["badge.background"]&&(this.badge.element.style.cssText+="background: "+r["badge.background"]),r["badge.bordercolor"]&&(this.badge.element.style.cssText+="border-color: "+r["badge.bordercolor"]),r["badge.foreground"]&&(this.badge.element.style.cssText+="color: "+r["badge.foreground"]),e&&(r["dialog.button.background"]&&(this.dialog.element.querySelector("button.action").style.cssText+="background: "+r["dialog.button.background"]),r["dialog.button.foreground"]&&(this.dialog.element.querySelector("button.action").style.cssText+="color: "+r["dialog.button.foreground"]),r["dialog.button.background.hovering"]&&this.addCssToHead("onesignal-background-hover-style","#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:hover { background: "+r["dialog.button.background.hovering"]+" !important; }"),r["dialog.button.background.active"]&&this.addCssToHead("onesignal-background-active-style","#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:active { background: "+r["dialog.button.background.active"]+" !important; }")),t&&r["pulse.color"]&&(this.button.element.querySelector(".pulse-ring").style.cssText="border-color: "+r["pulse.color"])}},e.prototype.addCssToHead=function(e,t){if(!document.getElementById(e)){var n=document.createElement("style");n.id=e,n.type="text/css",n.appendChild(document.createTextNode(t)),document.head.appendChild(n)}},e.prototype.updateState=function(){var t=this;Promise.all([b.default.privateIsPushNotificationsEnabled(),b.default.privateGetNotificationPermission()]).then(function(n){var i=n[0],r=n[1];t.setState(i?e.STATES.SUBSCRIBED:e.STATES.UNSUBSCRIBED),"denied"===r&&t.setState(e.STATES.BLOCKED)})},e.prototype.setState=function(t,n){void 0===n&&(n=!1);var i=this.state;this.state=t,i===t||n||a.default.trigger(e.EVENTS.STATE_CHANGED,{from:i,to:t})},Object.defineProperty(e.prototype,"container",{get:function(){return document.querySelector("#onesignal-bell-container")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphic",{get:function(){return this.button.element.querySelector("svg")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"launcher",{get:function(){return this._launcher||(this._launcher=new p.default(this)),this._launcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"button",{get:function(){return this._button||(this._button=new d.default(this)),this._button},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"badge",{get:function(){return this._badge||(this._badge=new l.default),this._badge},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message||(this._message=new h.default(this)),this._message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialog",{get:function(){return this._dialog||(this._dialog=new f.default(this)),this._dialog},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subscribed",{get:function(){return this.state===e.STATES.SUBSCRIBED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unsubscribed",{get:function(){return this.state===e.STATES.UNSUBSCRIBED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blocked",{get:function(){return this.state===e.STATES.BLOCKED},enumerable:!0,configurable:!0}),e}();t.default=v},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(13)),a=n(13),u=n(3),c=o(n(39)),l=n(11),d=n(16),f=o(n(0)),p=o(n(1)),h=n(26),g=function(){function e(){}return e.registerForPush=function(){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return[4,OneSignal.privateIsPushNotificationsEnabled()];case 1:return t=n.sent(),[4,e.internalRegisterForPush(t)];case 2:return[2,n.sent()]}})})},e.internalRegisterForPush=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,g,b,v;return r(this,function(r){switch(r.label){case 0:if(t=OneSignal.context,e&&!t.sessionManager.isFirstPageView())return f.default.debug("Not registering for push because the user is subscribed and this is not the first page view."),[2,null];if("undefined"!=typeof OneSignal){if(OneSignal._isRegisteringForPush)return[2,null];OneSignal._isRegisteringForPush=!0}switch(p.default.getWindowEnv()){case u.WindowEnvironmentKind.Host:case u.WindowEnvironmentKind.OneSignalSubscriptionModal:return[3,1];case u.WindowEnvironmentKind.OneSignalSubscriptionPopup:return[3,8]}return[3,20];case 1:return r.trys.push([1,6,,7]),[4,t.subscriptionManager.subscribe(0)];case 2:return i=r.sent(),[4,t.subscriptionManager.registerSubscription(i)];case 3:return n=r.sent(),t.sessionManager.incrementPageViewCount(),[4,h.PermissionUtils.triggerNotificationPermissionChanged()];case 4:return r.sent(),[4,c.default.checkAndTriggerSubscriptionChanged()];case 5:return r.sent(),[3,7];case 6:return o=r.sent(),f.default.info(o),[3,7];case 7:return[3,21];case 8:return g=opener||parent,b=void 0,[4,t.permissionManager.updateStoredPermission()];case 9:r.sent(),r.label=10;case 10:return r.trys.push([10,13,,19]),[4,t.subscriptionManager.subscribe(1)];case 11:return b=r.sent(),[4,t.permissionManager.updateStoredPermission()];case 12:return r.sent(),[3,19];case 13:return v=r.sent(),[4,t.permissionManager.updateStoredPermission()];case 14:if(r.sent(),!(v instanceof s.default))return[3,18];switch(v.reason){case a.PushPermissionNotGrantedErrorReason.Blocked:return[3,15];case a.PushPermissionNotGrantedErrorReason.Dismissed:return[3,17]}return[3,18];case 15:return[4,t.permissionManager.updateStoredPermission()];case 16:return r.sent(),OneSignal.subscriptionPopup.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED,{permission:d.NotificationPermission.Denied,forceUpdatePermission:!1}),[3,18];case 17:return OneSignal.subscriptionPopup.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED,{permission:d.NotificationPermission.Default,forceUpdatePermission:!0}),[3,18];case 18:return g?(window.close(),[2,null]):[3,19];case 19:return OneSignal.subscriptionPopup.message(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION,{rawPushSubscription:b.serialize()},function(e){!0===e.data.progress?(f.default.debug("Got message from host page that remote reg. is in progress, closing popup."),g&&window.close()):f.default.debug("Got message from host page that remote reg. could not be finished.")}),[3,21];case 20:throw"undefined"!=typeof OneSignal&&(OneSignal._isRegisteringForPush=!1),new l.InvalidStateError(l.InvalidStateReason.UnsupportedEnvironment);case 21:return"undefined"!=typeof OneSignal&&(OneSignal._isRegisteringForPush=!1),[2,n]}})})},e}();t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.put=function(t,n){return void 0===e.store[t]&&(e.store[t]=[null,null]),e.store[t].push(n),e.store[t].length==e.LIMIT+1&&e.store[t].shift(),e.store[t]},e.get=function(t){return void 0===e.store[t]&&(e.store[t]=[null,null]),e.store[t]},e.getFirst=function(t){return e.get(t)[0]},e.getLast=function(t){return e.get(t)[1]},e.remove=function(t){delete e.store[t]},e.isEmpty=function(t){var n=e.get(t);return null===n[0]&&null===n[1]},e}();t.default=i,i.store={},i.LIMIT=2},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(7));(s=t.SdkInitErrorKind||(t.SdkInitErrorKind={}))[s.InvalidAppId=0]="InvalidAppId",s[s.AppNotConfiguredForWebPush=1]="AppNotConfiguredForWebPush",s[s.MissingSubdomain=2]="MissingSubdomain",s[s.WrongSiteUrl=3]="WrongSiteUrl",s[s.MultipleInitialization=4]="MultipleInitialization",s[s.MissingSafariWebId=5]="MissingSafariWebId",s[s.Unknown=6]="Unknown";var SdkInitError=function(e){function SdkInitError(n,i){var r=this;switch(n){case t.SdkInitErrorKind.InvalidAppId:r=e.call(this,"OneSignal: This app ID does match any existing app. Double check your app ID.")||this;break;case t.SdkInitErrorKind.AppNotConfiguredForWebPush:r=e.call(this,"OneSignal: This app ID does not have any web platforms enabled. Double check your app ID, or see step 1 on our setup guide (https://goo.gl/01h7fZ).")||this;break;case t.SdkInitErrorKind.MissingSubdomain:r=e.call(this,"OneSignal: Non-HTTPS pages require a subdomain of OneSignal to be chosen on your dashboard. See step 1.4 on our setup guide (https://goo.gl/xip6JB).")||this;break;case t.SdkInitErrorKind.WrongSiteUrl:r=i&&i.siteUrl?e.call(this,"OneSignal: This web push config can only be used on "+new URL(i.siteUrl).origin+". Your current origin is "+location.origin+".")||this:e.call(this,"OneSignal: This web push config can not be used on the current site.")||this;break;case t.SdkInitErrorKind.MultipleInitialization:r=e.call(this,"OneSignal: The OneSignal web SDK can only be initialized once. Extra initializations are ignored. Please remove calls initializing the SDK more than once.")||this;break;case t.SdkInitErrorKind.MissingSafariWebId:r=e.call(this,"OneSignal: Safari browser support on Mac OS X requires the Safari web platform to be enabled. Please see the Safari Support steps in our web setup guide.")||this;break;case t.SdkInitErrorKind.Unknown:r=e.call(this,"OneSignal: An unknown initialization error occurred.")||this}return r.reason=t.SdkInitErrorKind[n],Object.setPrototypeOf(r,SdkInitError.prototype),r}return r(SdkInitError,e),SdkInitError}(a.default);t.SdkInitError=SdkInitError},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(8)),a=o(n(2)),u=function(){function e(){}return e.triggerNotificationPermissionChanged=function(e){return void 0===e&&(e=!1),i(this,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return[4,OneSignal.privateGetNotificationPermission()];case 1:return t=i.sent(),[4,s.default.get("Options","notificationPermission")];case 2:return n=i.sent(),t!==n||e?[4,s.default.put("Options",{key:"notificationPermission",value:t})]:[2];case 3:return i.sent(),a.default.trigger(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,{to:t}),[2]}})})},e}();t.PermissionUtils=u},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this._events={}}return e.prototype.on=function(e,t){return this._events[e]=this._events[e]||[],this._events[e].push(t),this},e.prototype.once=function(e,t){var n=this;function i(){n.off(e,i),t.apply(this,arguments)}return i.listener=t,this.on(e,i),this},e.prototype.off=function(e,t){var n=this._events[e];if(void 0!==n){for(var i=0;i<n.length;i+=1)if(n[i]===t||n[i].listener===t){n.splice(i,1);break}0===n.length&&this.removeAllListeners(e)}return this},e.prototype.removeAllListeners=function(e){try{e?delete this._events[e]:this._events={}}catch(e){}return this},e.prototype.listeners=function(e){try{return this._events[e]}catch(e){return}},e.prototype.numberOfListeners=function(e){var t=this.listeners(e);return t?t.length:0},e.prototype.emit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(this,void 0,void 0,function(){var t,n,i,o;return r(this,function(r){switch(r.label){case 0:if(t=e.shift(),void 0===(n=this._events[t]))return[3,4];n=n.slice(0),i=n.length,o=0,r.label=1;case 1:return o<i?[4,n[o].apply(this,e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return o+=1,[3,1];case 4:return[2,this]}})})},e}();t.default=o},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(0)),u=n(11),c=n(6),l=function(){function e(){}return e.getRegistration=function(){return i(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,navigator.serviceWorker.getRegistration(location.href)];case 1:return[2,t.sent()];case 2:return e=t.sent(),a.default.warn("[Service Worker Status] Error Checking service worker registration",location.href,e),[2,null];case 3:return[2]}})})},e.getServiceWorkerHref=function(e,n){var i="";if(e===t.ServiceWorkerActiveState.WorkerA)i=n.workerBPath.getFullPath();else if(e===t.ServiceWorkerActiveState.WorkerB||e===t.ServiceWorkerActiveState.ThirdParty||e===t.ServiceWorkerActiveState.None)i=n.workerAPath.getFullPath();else if(e===t.ServiceWorkerActiveState.Bypassed)throw new u.InvalidStateError(u.InvalidStateReason.UnsupportedEnvironment);return new URL(i,c.OneSignalUtils.getBaseUrl()).href},e}();t.default=l,(s=t.ServiceWorkerActiveState||(t.ServiceWorkerActiveState={})).WorkerA="Worker A (Main)",s.WorkerB="Worker B (Updater)",s.ThirdParty="3rd Party",s.Installing="Installing",s.None="None",s.Bypassed="Bypassed",s.Indeterminate="Indeterminate"},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.IntegrationKind||(t.IntegrationKind={})).Secure="Secure",i.SecureProxy="Secure Proxy",i.InsecureProxy="Insecure Proxy"},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(9)),a=o(n(19)),u=n(15),c=function(e){function t(t){var n=e.call(this)||this;return n.subscription=t,n}return r(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return this.subscription&&(t.identifier=s.default.safari?this.subscription.safariDeviceToken:this.subscription.w3cEndpoint?this.subscription.w3cEndpoint.toString():null,t.web_auth=this.subscription.w3cAuth,t.web_p256=this.subscription.w3cP256dh),t},t.createFromPushSubscription=function(e,n,i){var r=new t(n);return r.appId=e,r.subscriptionState=n?u.SubscriptionStateKind.Subscribed:u.SubscriptionStateKind.NotSubscribed,i&&(r.subscriptionState=i),r},t.prototype.deserialize=function(e){throw new a.default},t}(n(37).DeviceRecord);t.PushDeviceRecord=c},function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(23)),u=s(n(53)),c=s(n(44)),l=function(){function e(e){this.options={appId:e.appId,subdomain:e.subdomainName,origin:e.origin,metrics:{enable:!1,mixpanelReportingToken:null},userConfig:{}}}return e.prototype.initialize=function(){return r(this,void 0,void 0,function(){var e,t,n=this;return o(this,function(r){switch(r.label){case 0:return(window.opener||window.parent)==window?(document.write("<span style='font-size: 14px; color: red; font-family: sans-serif;'>OneSignal: This page cannot be directly opened, and must be opened as a result of a subscription call.</span>"),[2,Promise.resolve()]):((e=i({},this.options)).appId=e.appId,e.subdomainName=e.subdomain,e.origin=e.origin,OneSignal.config=e||{},[4,(new c.default).getAppConfig(e)]);case 1:return t=r.sent(),OneSignal.context=new u.default(t),OneSignal.context.workerMessenger.listen(!0),OneSignal.initialized=!0,this.loadPromise={},this.loadPromise.promise=new Promise(function(e,t){n.loadPromise.resolver=e,n.loadPromise.rejector=t}),this.establishCrossOriginMessaging(),[2,this.loadPromise.promise]}})})},e.prototype.establishCrossOriginMessaging=function(){},e.prototype.dispose=function(){this.messenger.destroy()},e.prototype.finishInitialization=function(){this.loadPromise.resolver()},e.prototype.subscribe=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return[4,OneSignal.isPushNotificationsEnabled()];case 1:return e=n.sent(),t=opener||parent,e?t&&window.close():a.default.registerForPush(),[2]}})})},e}();t.default=l},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(5)),a=n(11),u=n(18),c=o(n(56)),l=o(n(1)),d=n(40),f=o(n(8)),p=n(29),h=n(3),g=o(n(19)),b=o(n(0)),v=o(n(2)),m=o(n(55)),S=o(n(6)),y=o(n(28)),w=n(10),O=function(){function e(e,t){this.context=e,this.config=t}return e.getRegistration=function(){return i(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,y.default.getRegistration()];case 1:return[2,e.sent()]}})})},e.prototype.getActiveState=function(){return i(this,void 0,void 0,function(){var t,n,i,o,s,a;return r(this,function(r){switch(r.label){case 0:return[4,l.default.getIntegration()];case 1:return(t=r.sent())!==p.IntegrationKind.InsecureProxy?[3,2]:[2,y.ServiceWorkerActiveState.Indeterminate];case 2:if(t!==p.IntegrationKind.SecureProxy)return[3,8];switch(n=l.default.getWindowEnv(),n){case h.WindowEnvironmentKind.Host:case h.WindowEnvironmentKind.CustomIframe:return[3,3];case h.WindowEnvironmentKind.OneSignalSubscriptionPopup:return[3,6];case h.WindowEnvironmentKind.OneSignalSubscriptionModal:return[3,7]}return[3,8];case 3:return(i=OneSignal.proxyFrameHost)?[3,4]:[2,y.ServiceWorkerActiveState.Indeterminate];case 4:return[4,i.runCommand(OneSignal.POSTMAM_COMMANDS.SERVICE_WORKER_STATE)];case 5:return[2,r.sent()];case 6:return[3,8];case 7:throw new g.default;case 8:return[4,e.getRegistration()];case 9:return(o=r.sent())?o.installing?[2,y.ServiceWorkerActiveState.Installing]:o.active?(s=new URL(o.active.scriptURL).pathname,a=new c.default(s).getFileName()==this.config.workerAPath.getFileName()?y.ServiceWorkerActiveState.WorkerA:new c.default(s).getFileName()==this.config.workerBPath.getFileName()?y.ServiceWorkerActiveState.WorkerB:y.ServiceWorkerActiveState.ThirdParty,navigator.serviceWorker.controller||a!==y.ServiceWorkerActiveState.WorkerA&&a!==y.ServiceWorkerActiveState.WorkerB?[2,a]:[2,y.ServiceWorkerActiveState.Bypassed]):[2,y.ServiceWorkerActiveState.ThirdParty]:[2,y.ServiceWorkerActiveState.None]}})})},e.prototype.getWorkerVersion=function(){return i(this,void 0,void 0,function(){var e=this;return r(this,function(t){return[2,new Promise(function(t){return i(e,void 0,void 0,function(){var e,n;return r(this,function(i){switch(i.label){case 0:return S.default.isUsingSubscriptionWorkaround()?(e=OneSignal.proxyFrameHost)?[3,1]:(t(NaN),[3,3]):[3,4];case 1:return[4,e.runCommand(OneSignal.POSTMAM_COMMANDS.GET_WORKER_VERSION)];case 2:n=i.sent(),t(n),i.label=3;case 3:return[3,5];case 4:this.context.workerMessenger.once(u.WorkerMessengerCommand.WorkerVersion,function(e){t(e)}),this.context.workerMessenger.unicast(u.WorkerMessengerCommand.WorkerVersion),i.label=5;case 5:return[2]}})})})]})})},e.prototype.shouldInstallWorker=function(){return i(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return[4,this.getActiveState()];case 1:return(e=t.sent())!==y.ServiceWorkerActiveState.WorkerA&&e!==y.ServiceWorkerActiveState.WorkerB?[2,!0]:[2,!1]}})})},e.prototype.subscribeForPushNotifications=function(){return i(this,void 0,void 0,function(){var e,t=this;return r(this,function(n){switch(n.label){case 0:return[4,this.getActiveState()];case 1:if((e=n.sent())!==y.ServiceWorkerActiveState.WorkerA&&e!==y.ServiceWorkerActiveState.WorkerB)throw new a.InvalidStateError(a.InvalidStateReason.ServiceWorkerNotActivated);return[2,new Promise(function(e){t.context.workerMessenger.once(u.WorkerMessengerCommand.Subscribe,function(t){e(d.Subscription.deserialize(t))}),t.context.workerMessenger.unicast(u.WorkerMessengerCommand.Subscribe,t.context.appConfig)})]}})})},e.prototype.updateWorker=function(){return i(this,void 0,void 0,function(){var e,t;return r(this,function(n){switch(n.label){case 0:return s.default.supportsServiceWorkers()?[4,this.getActiveState()]:[2];case 1:e=n.sent(),b.default.info("[Service Worker Update] Checking service worker version..."),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,w.Utils.timeoutPromise(this.getWorkerVersion(),2e3)];case 3:return t=n.sent(),[3,5];case 4:return n.sent(),b.default.info("[Service Worker Update] Worker did not reply to version query; assuming older version."),t=1,[3,5];case 5:return e!==y.ServiceWorkerActiveState.WorkerA&&e!==y.ServiceWorkerActiveState.WorkerB?(b.default.debug("[Service Worker Update] Not updating service worker, current active worker state is "+e+"."),[2]):t===s.default.version()?[3,7]:(b.default.info("[Service Worker Update] Updating service worker from v"+t+" --\x3e v"+s.default.version()+"."),[4,this.installWorker()]);case 6:return n.sent(),[3,8];case 7:b.default.info("[Service Worker Update] Service worker version is current at v"+t+" (no update required)."),n.label=8;case 8:return[2]}})})},e.prototype.installWorker=function(){return i(this,void 0,void 0,function(){var e,t=this;return r(this,function(n){switch(n.label){case 0:return s.default.supportsServiceWorkers()?[4,this.getActiveState()]:[2];case 1:return e=n.sent(),[4,this.installAlternatingWorker()];case 2:return n.sent(),[4,new Promise(function(n){return i(t,void 0,void 0,function(){var t,o=this;return r(this,function(s){switch(s.label){case 0:return[4,this.getActiveState()];case 1:return t=s.sent(),e!==t&&t!==y.ServiceWorkerActiveState.Installing?n():navigator.serviceWorker.addEventListener("controllerchange",function(t){return i(o,void 0,void 0,function(){var t;return r(this,function(i){switch(i.label){case 0:return[4,this.getActiveState()];case 1:return(t=i.sent())!==e&&t!==y.ServiceWorkerActiveState.Installing&&n(),[2]}})})}),[2]}})})})];case 3:return n.sent(),[4,this.getActiveState()];case 4:return n.sent()!==y.ServiceWorkerActiveState.WorkerB?[3,6]:[4,this.installAlternatingWorker()];case 5:n.sent(),n.label=6;case 6:return[4,this.establishServiceWorkerChannel()];case 7:return n.sent(),[2]}})})},e.prototype.establishServiceWorkerChannel=function(){return i(this,void 0,void 0,function(){var e,t=this;return r(this,function(n){return(e=this.context.workerMessenger).off(),e.on(u.WorkerMessengerCommand.NotificationDisplayed,function(e){b.default.debug(location.origin,"Received notification display event from service worker."),v.default.trigger(OneSignal.EVENTS.NOTIFICATION_DISPLAYED,e)}),e.on(u.WorkerMessengerCommand.NotificationClicked,function(e){return i(t,void 0,void 0,function(){var t,n;return r(this,function(i){switch(i.label){case 0:return l.default.getWindowEnv()!==h.WindowEnvironmentKind.OneSignalProxyFrame?[3,2]:[4,new Promise(function(e){var t=OneSignal.proxyFrame;t&&t.messenger.message(OneSignal.POSTMAM_COMMANDS.GET_EVENT_LISTENER_COUNT,OneSignal.EVENTS.NOTIFICATION_CLICKED,function(t){var n=t.data;e(n)})})];case 1:return t=i.sent(),[3,3];case 2:t=OneSignal.emitter.numberOfListeners(OneSignal.EVENTS.NOTIFICATION_CLICKED),i.label=3;case 3:return 0!==t?[3,5]:(b.default.debug("notification.clicked event received, but no event listeners; storing event in IndexedDb for later retrieval."),n=e.url,e.url||(n=location.href),[4,f.default.put("NotificationOpened",{url:n,data:e,timestamp:Date.now()})]);case 4:return i.sent(),[3,6];case 5:v.default.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED,e),i.label=6;case 6:return[2]}})})}),e.on(u.WorkerMessengerCommand.RedirectPage,function(e){b.default.debug(l.default.getWindowEnv().toString()+" Picked up command.redirect to "+e+", forwarding to host page.");var t=OneSignal.proxyFrame;t&&t.messenger.message(OneSignal.POSTMAM_COMMANDS.SERVICEWORKER_COMMAND_REDIRECT,e)}),e.on(u.WorkerMessengerCommand.NotificationDismissed,function(e){v.default.trigger(OneSignal.EVENTS.NOTIFICATION_DISMISSED,e)}),[2]})})},e.prototype.installAlternatingWorker=function(){return i(this,void 0,void 0,function(){var t,n,i,o,s,a,u;return r(this,function(r){switch(r.label){case 0:return[4,this.getActiveState()];case 1:return(t=r.sent())!==y.ServiceWorkerActiveState.ThirdParty?[3,4]:[4,e.getRegistration()];case 2:return(n=r.sent())?[4,n.unregister()]:[3,4];case 3:r.sent(),r.label=4;case 4:i=y.default.getServiceWorkerHref(t,this.config),o=w.Utils.encodeHashAsUriComponent({appId:this.context.appConfig.appId}),s=i+"?"+o,b.default.info("[Service Worker Installation] Installing service worker "+s+"."),r.label=5;case 5:return r.trys.push([5,7,,9]),[4,navigator.serviceWorker.register(s,{scope:""+S.default.getBaseUrl()+this.config.registrationOptions.scope})];case 6:return r.sent(),[3,9];case 7:if(a=r.sent(),b.default.error("[Service Worker Installation] Installing service worker failed "+a),l.default.getWindowEnv()===h.WindowEnvironmentKind.OneSignalSubscriptionPopup)throw a;return[4,fetch(s)];case 8:if(403===(u=r.sent()).status||404===u.status)throw new m.default(u.status,u.statusText);throw a;case 9:return b.default.debug("[Service Worker Installation] Service worker installed."),[2]}})})},e}();t.ServiceWorkerManager=O},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=i(n(2)),s=i(n(0)),a=i(n(17)),u=function(){function e(e,t,n,i,r,o,s){void 0===i&&(i="shown"),void 0===r&&(r=["opacity","transform"]),void 0===s&&(s=500),this.selector=e,this.showClass=t,this.hideClass=n,this.state=i,this.targetTransitionEvents=r,this.nestedContentSelector=o,this.transitionCheckTimeout=s}return e.prototype.show=function(){var t=this;return this.hidden?new Promise(function(n){if(t.state="showing",o.default.trigger(e.EVENTS.SHOWING,t),t.hideClass&&r.removeCssClass(t.element,t.hideClass),t.showClass&&r.addCssClass(t.element,t.showClass),0==t.targetTransitionEvents.length)return n(t);var i=setTimeout(function(){s.default.debug("Element did not completely show (state: "+t.state+").")},t.transitionCheckTimeout);r.once(t.element,"transitionend",function(s,a){if(s.target===t.element&&r.contains(t.targetTransitionEvents,s.propertyName))return clearTimeout(i),a(),t.state="shown",o.default.trigger(e.EVENTS.SHOWN,t),n(t)},!0)}):Promise.resolve(this)},e.prototype.hide=function(){var t=this;return this.shown?new Promise(function(n){if(t.state="hiding",o.default.trigger(e.EVENTS.HIDING,t),t.showClass&&r.removeCssClass(t.element,t.showClass),t.hideClass&&r.addCssClass(t.element,t.hideClass),0==t.targetTransitionEvents.length)return n(t);r.once(t.element,"transitionend",function(i,a){var u=setTimeout(function(){s.default.debug("Element did not completely hide (state: "+t.state+").")},t.transitionCheckTimeout);if(i.target===t.element&&r.contains(t.targetTransitionEvents,i.propertyName))return clearTimeout(u),a(),t.state="hidden",o.default.trigger(e.EVENTS.HIDDEN,t),n(t)},!0)}):Promise.resolve(this)},e.prototype.waitUntilShown=function(){var t=this;return"shown"===this.state?Promise.resolve(this):new Promise(function(n){a.default.emitter.once(e.EVENTS.SHOWN,function(e){if(e===t)return n(t)})})},e.prototype.waitUntilHidden=function(){var t=this;return"hidden"===this.state?Promise.resolve(this):new Promise(function(n){a.default.emitter.once(e.EVENTS.HIDDEN,function(e){if(e===t)return n(t)})})},Object.defineProperty(e,"EVENTS",{get:function(){return{SHOWING:"animatedElementShowing",SHOWN:"animatedElementShown",HIDING:"animatedElementHiding",HIDDEN:"animatedElementHidden"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.nestedContentSelector?this.element.querySelector(this.nestedContentSelector).innerHTML:this.element.innerHTML},set:function(e){this.nestedContentSelector?this.element.querySelector(this.nestedContentSelector).innerHTML=e:this.element.innerHTML=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return document.querySelector(this.selector)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showing",{get:function(){return"showing"===this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shown",{get:function(){return"shown"===this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiding",{get:function(){return"hiding"===this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return"hidden"===this.state},enumerable:!0,configurable:!0}),e}();t.default=u},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(2)),u=n(4),c=s(n(33)),l=s(n(0)),d=s(n(17)),f=function(e){function t(t,n,i,r,o,s,a,u,c){void 0===s&&(s="shown"),void 0===a&&(a="active"),void 0===u&&(u=["opacity","transform"]);var l=e.call(this,t,n,i,s,u)||this;return l.selector=t,l.showClass=n,l.hideClass=i,l.activeClass=r,l.inactiveClass=o,l.state=s,l.activeState=a,l.targetTransitionEvents=u,l.nestedContentSelector=c,l}return r(t,e),t.prototype.activate=function(){var e=this;return this.inactive&&this.shown?new Promise(function(n){if(e.activeState="activating",a.default.trigger(t.EVENTS.ACTIVATING,e),e.inactiveClass&&u.removeCssClass(e.element,e.inactiveClass),e.activeClass&&u.addCssClass(e.element,e.activeClass),!e.shown)return l.default.debug("Ending activate() transition (alternative)."),e.activeState="active",a.default.trigger(t.EVENTS.ACTIVE,e),n(e);if(0==e.targetTransitionEvents.length)return n(e);var i=setTimeout(function(){l.default.debug("Element did not completely activate (state: "+e.state+", activeState: "+e.activeState+").")},e.transitionCheckTimeout);u.once(e.element,"transitionend",function(r,o){if(r.target===e.element&&u.contains(e.targetTransitionEvents,r.propertyName))return clearTimeout(i),o(),e.activeState="active",a.default.trigger(t.EVENTS.ACTIVE,e),n(e)},!0)}):Promise.resolve(this)},t.prototype.inactivate=function(){var e=this;return this.active?new Promise(function(n){if(e.activeState="inactivating",a.default.trigger(t.EVENTS.INACTIVATING,e),e.activeClass&&u.removeCssClass(e.element,e.activeClass),e.inactiveClass&&u.addCssClass(e.element,e.inactiveClass),!e.shown)return e.activeState="inactive",a.default.trigger(t.EVENTS.INACTIVE,e),n(e);if(0==e.targetTransitionEvents.length)return n(e);var i=setTimeout(function(){l.default.debug("Element did not completely inactivate (state: "+e.state+", activeState: "+e.activeState+").")},e.transitionCheckTimeout);u.once(e.element,"transitionend",function(r,o){if(r.target===e.element&&u.contains(e.targetTransitionEvents,r.propertyName))return clearTimeout(i),o(),e.activeState="inactive",a.default.trigger(t.EVENTS.INACTIVE,e),n(e)},!0)}):Promise.resolve(this)},t.prototype.waitUntilActive=function(){var e=this;return this.active?Promise.resolve(this):new Promise(function(n){d.default.emitter.once(t.EVENTS.ACTIVE,function(t){if(t===e)return n(e)})})},t.prototype.waitUntilInactive=function(){var e=this;return this.inactive?Promise.resolve(this):new Promise(function(n){d.default.emitter.once(t.EVENTS.INACTIVE,function(t){if(t===e)return n(e)})})},Object.defineProperty(t,"EVENTS",{get:function(){return o({},c.default.EVENTS,{ACTIVATING:"activeAnimatedElementActivating",ACTIVE:"activeAnimatedElementActive",INACTIVATING:"activeAnimatedElementInactivating",INACTIVE:"activeAnimatedElementInactive"})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activating",{get:function(){return"activating"===this.activeState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return"active"===this.activeState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inactivating",{get:function(){return"inactivating"===this.activeState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inactive",{get:function(){return"inactive"===this.activeState},enumerable:!0,configurable:!0}),t}(c.default);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.isLocalStorageSupported=function(){try{return"undefined"!=typeof localStorage&&(localStorage.getItem("test"),!0)}catch(e){return!1}},e.setItem=function(t,n,i){if(e.isLocalStorageSupported()){var r=void 0!==i?60*i*1e3:0,o={value:JSON.stringify(n),timestamp:void 0!==i?(new Date).getTime()+r:void 0};localStorage.setItem(t,JSON.stringify(o))}},e.getItem=function(t){if(!e.isLocalStorageSupported())return null;var n,i=localStorage.getItem(t);try{n=JSON.parse(i)}catch(e){return null}if(null===n)return null;if(n.timestamp&&(new Date).getTime()>=n.timestamp)return localStorage.removeItem(t),null;var r=n.value;try{r=JSON.parse(n.value)}catch(e){return r}return r},e.removeItem=function(t){if(!e.isLocalStorageSupported())return null;localStorage.removeItem(t)},e}();t.default=i},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(5)),o=i(n(1)),s=n(10),a=n(63),u=function(){function e(){}return e.get=function(t,n,i){return e.call("GET",t,n,i)},e.post=function(t,n,i){return e.call("POST",t,n,i)},e.put=function(t,n,i){return e.call("PUT",t,n,i)},e.delete=function(t,n,i){return e.call("DELETE",t,n,i)},e.call=function(t,n,i,s){if("GET"===t){if(n.indexOf("players")>-1&&-1===n.indexOf("app_id="))return console.error("Calls to player api are not permitted without app_id"),Promise.reject(new a.OneSignalApiError(a.OneSignalApiErrorKind.MissingAppId))}else if(n.indexOf("players")>-1&&(!i||!i.app_id))return console.error("Calls to player api are not permitted without app_id"),Promise.reject(new a.OneSignalApiError(a.OneSignalApiErrorKind.MissingAppId));var u=new Headers;if(u.append("SDK-Version","onesignal/web/"+r.default.version()),u.append("Content-Type","application/json;charset=UTF-8"),s)for(var c=0,l=Object.keys(s);c<l.length;c++){var d=l[c];u.append(d,s[d])}var f,p={method:t||"NO_METHOD_SPECIFIED",headers:u,cache:"no-cache"};return i&&(p.body=JSON.stringify(i)),fetch(o.default.getOneSignalApiUrl().toString()+"/"+n,p).then(function(e){return f=e.status,e.json()}).then(function(t){return f>=200&&f<300?t:"no-user-id-error"!==e.identifyError(t)?Promise.reject(t):void 0})},e.identifyError=function(e){if(!e||!e.errors)return"no-error";var t=e.errors;return s.Utils.contains(t,"No user with this id found")||s.Utils.contains(t,"Could not find app_id for given player id.")?"no-user-id-error":"unknown-error"},e}();t.OneSignalApiBase=u,t.default=u},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(9)),o=i(n(5)),s=i(n(19)),a=n(62),u=n(95),c=n(6),l=function(){function e(){this.language=o.default.getLanguage(),this.timezone=-60*(new Date).getTimezoneOffset(),this.browserName=r.default.name,this.browserVersion=NaN!==parseInt(String(r.default.version))?parseInt(String(r.default.version)):-1,this.operatingSystem=this.getBrowserOperatingSystem(),this.operatingSystemVersion=String(r.default.osversion),this.devicePlatform=this.getDevicePlatform(),this.deviceModel=navigator.platform,this.sdkVersion=o.default.version().toString(),this.deliveryPlatform=this.getDeliveryPlatform()}return e.prototype.getDevicePlatform=function(){var e=r.default.mobile,t=r.default.tablet;return e?u.DevicePlatformKind.Mobile:t?u.DevicePlatformKind.Tablet:u.DevicePlatformKind.Desktop},e.prototype.isSafari=function(){return r.default.safari&&void 0!==window.safari&&void 0!==window.safari.pushNotification},e.prototype.getBrowserOperatingSystem=function(){return r.default.mac?"Mac OS X":r.default.windows?"Microsoft Windows":r.default.windowsphone?"Microsoft Windows Phone":r.default.linux?"Linux":r.default.chromeos?"Google Chrome OS":r.default.android?"Google Android":r.default.ios?"Apple iOS":r.default.blackberry?"Blackberry":r.default.firefoxos?"Mozilla Firefox OS":r.default.webos?"WebOS":r.default.tizen?"Tizen":r.default.sailfish?"Sailfish OS":"Unknown"},e.prototype.getDeliveryPlatform=function(){var e=c.OneSignalUtils.redetectBrowserUserAgent();return this.isSafari()?a.DeliveryPlatformKind.Safari:e.firefox?a.DeliveryPlatformKind.Firefox:e.msedge?a.DeliveryPlatformKind.Edge:a.DeliveryPlatformKind.ChromeLike},e.prototype.serialize=function(){var e={device_type:this.deliveryPlatform,language:this.language,timezone:this.timezone,device_os:this.browserVersion,sdk:this.sdkVersion,notification_types:this.subscriptionState,delivery_platform:this.deliveryPlatform,browser_name:this.browserName,browser_version:this.browserVersion,operating_system:this.operatingSystem,operating_system_version:this.operatingSystemVersion,device_platform:this.devicePlatform,device_model:this.deviceModel};return this.appId&&(e.app_id=this.appId),e},e.prototype.deserialize=function(e){throw new s.default},e}();t.DeviceRecord=l},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(19)),a=n(62),u=function(e){function t(t,n,i){var r=e.call(this)||this;return r.email=t,r.emailAuthHash=n,r.pushDeviceRecordId=i,r.deliveryPlatform=a.DeliveryPlatformKind.Email,r}return r(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return this.email&&(t.identifier=this.email),this.emailAuthHash&&(t.email_auth_hash=this.emailAuthHash),this.pushDeviceRecordId&&(t.device_player_id=this.pushDeviceRecordId),t},t.prototype.deserialize=function(e){throw new s.default},t}(n(37).DeviceRecord);t.EmailDeviceRecord=u},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(2)),a=o(n(24)),u=o(n(20)),c=o(n(8)),l=o(n(0)),d=n(61),f=n(6),p=n(67),h=function(){function e(){}return e.onNotificationPermissionChange=function(){e.checkAndTriggerSubscriptionChanged()},e.onInternalSubscriptionSet=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){return a.default.put("subscription.optedOut",e),[2]})})},e.checkAndTriggerSubscriptionChanged=function(){return i(this,void 0,void 0,function(){var t,n,i,o;return r(this,function(r){switch(r.label){case 0:return f.OneSignalUtils.logMethodCall("checkAndTriggerSubscriptionChanged"),[4,OneSignal.context.subscriptionManager.getSubscriptionState()];case 1:return t=r.sent(),[4,OneSignal.privateIsPushNotificationsEnabled()];case 2:return n=r.sent(),[4,c.default.getAppState()];case 3:return i=r.sent(),o=i.lastKnownPushEnabled,null===o||n!==o?(l.default.info("The user's subscription state changed from "+(null===o?"(not stored)":o)+" âŸ¶ "+t.subscribed),i.lastKnownPushEnabled=n,[4,c.default.setAppState(i)]):[2];case 4:return r.sent(),e.triggerSubscriptionChanged(n),[2]}})})},e._onSubscriptionChanged=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){return e.onSubscriptionChanged_showWelcomeNotification(t),e.onSubscriptionChanged_evaluateNotifyButtonDisplayPredicate(),e.onSubscriptionChanged_updateCustomLink(),[2]})})},e.onSubscriptionChanged_showWelcomeNotification=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,a,d,f,h;return r(this,function(r){switch(r.label){case 0:return OneSignal.__doNotShowWelcomeNotification?(l.default.debug("Not showing welcome notification because user has previously subscribed."),[2]):!0!==e?[3,3]:[4,c.default.getSubscription()];case 1:return t=r.sent().deviceId,[4,c.default.getAppConfig()];case 2:n=r.sent().appId,i=OneSignal.config.userConfig.welcomeNotification,o=void 0!==i&&!0===i.disable,a=void 0!==i&&void 0!==i.title&&null!==i.title?i.title:"",d=void 0!==i&&void 0!==i.message&&null!==i.message&&i.message.length>0?i.message:"Thanks for subscribing!",f=new URL(location.href).origin+"?_osp=do_not_open",h=i&&i.url&&i.url.length>0?i.url:f,a=p.BrowserUtils.decodeHtmlEntities(a),d=p.BrowserUtils.decodeHtmlEntities(d),o||(l.default.debug("Sending welcome notification."),u.default.sendNotification(n,[t],{en:a},{en:d},h,null,{__isOneSignalWelcomeNotification:!0},void 0),s.default.trigger(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT,{title:a,message:d,url:h})),r.label=3;case 3:return[2]}})})},e.onSubscriptionChanged_evaluateNotifyButtonDisplayPredicate=function(){return i(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return OneSignal.config.userConfig.notifyButton?(e=OneSignal.config.userConfig.notifyButton.displayPredicate)&&"function"==typeof e&&OneSignal.notifyButton?[4,e()]:[3,2]:[2];case 1:!1!==t.sent()?(l.default.debug("Showing notify button because display predicate returned true."),OneSignal.notifyButton.launcher.show()):(l.default.debug("Hiding notify button because display predicate returned false."),OneSignal.notifyButton.launcher.hide()),t.label=2;case 2:return[2]}})})},e.onSubscriptionChanged_updateCustomLink=function(){return i(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return OneSignal.config.userConfig.promptOptions?[4,d.CustomLink.initialize(OneSignal.config.userConfig.promptOptions.customlink)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.triggerSubscriptionChanged=function(e){s.default.trigger(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,e)},e.fireStoredNotificationClicks=function(e){return void 0===e&&(e=document.URL),i(this,void 0,void 0,function(){function t(e){return i(this,void 0,void 0,function(){var t,n,i;return r(this,function(r){switch(r.label){case 0:return[4,c.default.getAppState()];case 1:return(t=r.sent()).clickedNotifications[e.url]=null,[4,c.default.setAppState(t)];case 2:return r.sent(),n=e.data,(i=e.timestamp)&&(Date.now()-i)/1e3/60>5?[2]:(s.default.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED,n),[2])}})})}var n,o,a,u,l,d;return r(this,function(i){switch(i.label){case 0:return[4,c.default.getAppState()];case 1:return n=i.sent(),[4,c.default.get("Options","notificationClickHandlerMatch")];case 2:if("origin"!==i.sent())return[3,7];o=0,a=Object.keys(n.clickedNotifications),i.label=3;case 3:return o<a.length?(u=a[o],new URL(u).origin!==location.origin?[3,5]:[4,t(n.clickedNotifications[u])]):[3,6];case 4:i.sent(),i.label=5;case 5:return o++,[3,3];case 6:return[3,11];case 7:return(l=n.clickedNotifications[e])?[4,t(l)]:[3,9];case 8:return i.sent(),[3,11];case 9:return l||!e.endsWith("/")?[3,11]:(d=e.substring(0,e.length-1),(l=n.clickedNotifications[d])?[4,t(l)]:[3,11]);case 10:i.sent(),i.label=11;case 11:return[2]}})})},e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.serialize=function(){return{deviceId:this.deviceId,subscriptionToken:this.subscriptionToken,optedOut:this.optedOut,createdAt:this.createdAt,expirationTime:this.expirationTime}},e.deserialize=function(t){var n=new e;return n.deviceId=t.deviceId,n.subscriptionToken=t.subscriptionToken,n.optedOut=t.optedOut,n.createdAt=t.createdAt,n.expirationTime=t.expirationTime,n},e}();t.Subscription=i},function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,u=n(83),c=n(3),l=n(25),d=s(n(1)),f=s(n(6)),p=s(n(10));(a=t.IntegrationConfigurationKind||(t.IntegrationConfigurationKind={}))[a.Dashboard=0]="Dashboard",a[a.JavaScript=1]="JavaScript";var h=function(){function e(){}return e.getAppConfig=function(e,t){return r(this,void 0,void 0,function(){var n,i,r;return o(this,function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),!e||!e.appId||!f.default.isValidUuid(e.appId))throw new l.SdkInitError(l.SdkInitErrorKind.InvalidAppId);return[4,t(e.appId)];case 1:return n=o.sent(),i=this.getMergedConfig(e,n),this.checkRestrictedOrigin(i),[2,i];case 2:if(r=o.sent()){if(1===r.code)throw new l.SdkInitError(l.SdkInitErrorKind.InvalidAppId);if(2===r.code)throw new l.SdkInitError(l.SdkInitErrorKind.AppNotConfiguredForWebPush)}throw r;case 3:return[2]}})})},e.checkRestrictedOrigin=function(e){if(e.restrictedOriginEnabled&&d.default.getWindowEnv()!==c.WindowEnvironmentKind.ServiceWorker&&window.top===window&&!p.default.contains(window.location.hostname,".os.tc")&&!p.default.contains(window.location.hostname,".onesignal.com")&&!this.doesCurrentOriginMatchConfigOrigin(e.origin))throw new l.SdkInitError(l.SdkInitErrorKind.WrongSiteUrl,{siteUrl:e.origin})},e.doesCurrentOriginMatchConfigOrigin=function(e){try{return location.origin===new URL(e).origin}catch(e){return!1}},e.getIntegrationCapabilities=function(e){switch(e){case u.ConfigIntegrationKind.Custom:case u.ConfigIntegrationKind.WordPress:return{configuration:t.IntegrationConfigurationKind.JavaScript};default:return{configuration:t.IntegrationConfigurationKind.Dashboard}}},e.getMergedConfig=function(e,t){var n=this.getConfigIntegrationKind(t);return{appId:t.app_id,subdomain:this.getSubdomainForConfigIntegrationKind(n,e,t),origin:t.config.origin,httpUseOneSignalCom:t.config.http_use_onesignal_com,cookieSyncEnabled:t.features.cookie_sync.enable,restrictedOriginEnabled:t.features.restrict_origin&&t.features.restrict_origin.enable,metrics:{enable:t.features.metrics.enable,mixpanelReportingToken:t.features.metrics.mixpanel_reporting_token},safariWebId:t.config.safari_web_id,vapidPublicKey:t.config.vapid_public_key,onesignalVapidPublicKey:t.config.onesignal_vapid_public_key,emailAuthRequired:t.features.email&&t.features.email.require_auth,userConfig:this.getUserConfigForConfigIntegrationKind(n,e,t),enableOnSession:t.features.enable_on_session||!1}},e.getConfigIntegrationKind=function(e){return e.config.integration?e.config.integration.kind:u.ConfigIntegrationKind.Custom},e.getCustomLinkConfig=function(e){var t={enabled:!1,style:"button",size:"medium",unsubscribeEnabled:!1,text:{explanation:"",subscribe:"",unsubscribe:""},color:{button:"",text:""}};if(!(e&&e.config&&e.config.staticPrompts&&e.config.staticPrompts.customlink&&e.config.staticPrompts.customlink.enabled))return t;var n=e.config.staticPrompts.customlink;return{enabled:n.enabled,style:n.style,size:n.size,unsubscribeEnabled:n.unsubscribeEnabled,text:n.text?{subscribe:n.text.subscribe,unsubscribe:n.text.unsubscribe,explanation:n.text.explanation}:t.text,color:n.color?{button:n.color.button,text:n.color.text}:t.color}},e.injectDefaultsIntoPromptOptions=function(e,t){if(!e)return e;var n=e.customlink||{enabled:void 0,style:void 0,size:void 0,unsubscribeEnabled:void 0,text:void 0,color:void 0},r=t.customlink;return i({},e,{customlink:{enabled:p.default.getValueOrDefault(n.enabled,r.enabled),style:p.default.getValueOrDefault(n.style,r.style),size:p.default.getValueOrDefault(n.size,r.size),unsubscribeEnabled:p.default.getValueOrDefault(n.unsubscribeEnabled,r.unsubscribeEnabled),text:{subscribe:p.default.getValueOrDefault(n.text?n.text.subscribe:void 0,r.text.subscribe),unsubscribe:p.default.getValueOrDefault(n.text?n.text.unsubscribe:void 0,r.text.unsubscribe),explanation:p.default.getValueOrDefault(n.text?n.text.explanation:void 0,r.text.explanation)},color:{button:p.default.getValueOrDefault(n.color?n.color.button:void 0,r.color.button),text:p.default.getValueOrDefault(n.color?n.color.text:void 0,r.color.text)}}})},e.getUserConfigForConfigIntegrationKind=function(e,n,r){switch(this.getIntegrationCapabilities(e).configuration){case t.IntegrationConfigurationKind.Dashboard:return{appId:r.app_id,autoRegister:!1,path:r.config.serviceWorker.path,serviceWorkerPath:r.config.serviceWorker.workerName,serviceWorkerUpdaterPath:r.config.serviceWorker.updaterWorkerName,serviceWorkerParam:{scope:r.config.serviceWorker.registrationScope},subdomainName:r.config.siteInfo.proxyOrigin,promptOptions:{slidedown:{autoPrompt:r.config.staticPrompts.slidedown.enabled,actionMessage:r.config.staticPrompts.slidedown.actionMessage,acceptButtonText:r.config.staticPrompts.slidedown.acceptButton,cancelButtonText:r.config.staticPrompts.slidedown.cancelButton},fullscreen:{actionMessage:r.config.staticPrompts.fullscreen.actionMessage,acceptButton:r.config.staticPrompts.fullscreen.acceptButton,cancelButton:r.config.staticPrompts.fullscreen.cancelButton,title:r.config.staticPrompts.fullscreen.title,message:r.config.staticPrompts.fullscreen.message,caption:r.config.staticPrompts.fullscreen.caption,autoAcceptTitle:r.config.staticPrompts.fullscreen.autoAcceptTitle},customlink:this.getCustomLinkConfig(r)},welcomeNotification:{disable:!r.config.welcomeNotification.enable,title:r.config.welcomeNotification.title,message:r.config.welcomeNotification.message,url:r.config.welcomeNotification.url},notifyButton:{enable:r.config.staticPrompts.bell.enabled,displayPredicate:r.config.staticPrompts.bell.hideWhenSubscribed?function(){return OneSignal.isPushNotificationsEnabled().then(function(e){return!e})}:null,size:r.config.staticPrompts.bell.size,position:r.config.staticPrompts.bell.location,showCredit:!1,offset:{bottom:r.config.staticPrompts.bell.offset.bottom+"px",left:r.config.staticPrompts.bell.offset.left+"px",right:r.config.staticPrompts.bell.offset.right+"px"},colors:{"circle.background":r.config.staticPrompts.bell.color.main,"circle.foreground":r.config.staticPrompts.bell.color.accent,"badge.background":"black","badge.foreground":"white","badge.bordercolor":"black","pulse.color":r.config.staticPrompts.bell.color.accent,"dialog.button.background.hovering":r.config.staticPrompts.bell.color.main,"dialog.button.background.active":r.config.staticPrompts.bell.color.main,"dialog.button.background":r.config.staticPrompts.bell.color.main,"dialog.button.foreground":"white"},text:{"tip.state.unsubscribed":r.config.staticPrompts.bell.tooltip.unsubscribed,"tip.state.subscribed":r.config.staticPrompts.bell.tooltip.subscribed,"tip.state.blocked":r.config.staticPrompts.bell.tooltip.blocked,"message.prenotify":r.config.staticPrompts.bell.tooltip.unsubscribed,"message.action.subscribed":r.config.staticPrompts.bell.message.subscribing,"message.action.resubscribed":r.config.staticPrompts.bell.message.subscribing,"message.action.unsubscribed":r.config.staticPrompts.bell.message.unsubscribing,"dialog.main.title":r.config.staticPrompts.bell.dialog.main.title,"dialog.main.button.subscribe":r.config.staticPrompts.bell.dialog.main.subscribeButton,"dialog.main.button.unsubscribe":r.config.staticPrompts.bell.dialog.main.unsubscribeButton,"dialog.blocked.title":r.config.staticPrompts.bell.dialog.blocked.title,"dialog.blocked.message":r.config.staticPrompts.bell.dialog.blocked.message}},persistNotification:r.config.notificationBehavior?r.config.notificationBehavior.display.persist:void 0,webhooks:{cors:r.config.webhooks.corsEnable,"notification.displayed":r.config.webhooks.notificationDisplayedHook,"notification.clicked":r.config.webhooks.notificationClickedHook,"notification.dismissed":r.config.webhooks.notificationDismissedHook},notificationClickHandlerMatch:r.config.notificationBehavior?r.config.notificationBehavior.click.match:void 0,notificationClickHandlerAction:r.config.notificationBehavior?r.config.notificationBehavior.click.action:void 0,allowLocalhostAsSecureOrigin:r.config.setupBehavior?r.config.setupBehavior.allowLocalhostAsSecureOrigin:void 0,requiresUserPrivacyConsent:n.requiresUserPrivacyConsent};case t.IntegrationConfigurationKind.JavaScript:return i({},n,{promptOptions:this.injectDefaultsIntoPromptOptions(n.promptOptions,r.config.staticPrompts)},{serviceWorkerParam:"undefined"!=typeof OneSignal&&OneSignal.SERVICE_WORKER_PARAM?OneSignal.SERVICE_WORKER_PARAM:{scope:"/"},serviceWorkerPath:"undefined"!=typeof OneSignal&&OneSignal.SERVICE_WORKER_PATH?OneSignal.SERVICE_WORKER_PATH:"OneSignalSDKWorker.js",serviceWorkerUpdaterPath:"undefined"!=typeof OneSignal&&OneSignal.SERVICE_WORKER_UPDATER_PATH?OneSignal.SERVICE_WORKER_UPDATER_PATH:"OneSignalSDUpdaterKWorker.js",path:n.path?n.path:"/"})}},e.getSubdomainForConfigIntegrationKind=function(e,n,i){var r=this.getIntegrationCapabilities(e),o=n.subdomainName,s="";switch(r.configuration){case t.IntegrationConfigurationKind.Dashboard:s=i.config.siteInfo.proxyOriginEnabled?i.config.siteInfo.proxyOrigin:void 0;break;case t.IntegrationConfigurationKind.JavaScript:s=i.config.subdomain}return s&&!this.shouldUseServerConfigSubdomain(o,r)?void 0:s},e.shouldUseServerConfigSubdomain=function(e,n){switch(n.configuration){case t.IntegrationConfigurationKind.Dashboard:return!0;case t.IntegrationConfigurationKind.JavaScript:switch(location.protocol){case"https:":return!!e;case"http:":return!0;default:return!1}}},e}();t.ConfigHelper=h},function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(36),u=n(15),c=s(n(0)),l=n(10),d=function(){function e(){}return e.downloadServerAppConfig=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return l.Utils.enforceAppId(e),[4,new Promise(function(t,n){t(a.OneSignalApiBase.get("sync/"+e+"/web",null))})];case 1:return[2,t.sent()]}})})},e.getUserIdFromSubscriptionIdentifier=function(e,t,n){return l.Utils.enforceAppId(e),a.OneSignalApiBase.post("players",{app_id:e,device_type:t,identifier:n,notification_types:u.SubscriptionStateKind.TemporaryWebRecord}).then(function(e){return e&&e.id?e.id:null}).catch(function(e){return c.default.debug("Error getting user ID from subscription identifier:",e),null})},e.updatePlayer=function(e,t,n){return l.Utils.enforceAppId(e),l.Utils.enforcePlayerId(t),a.OneSignalApiBase.put("players/"+t,i({app_id:e},n))},e}();t.OneSignalApiSW=d,t.default=d},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(84)),a=o(n(1)),u=n(3),c=o(n(42)),l=o(n(20)),d=function(){function e(){}return e.getPlayer=function(e,t){return l.default.getPlayer(e,t)},e.updatePlayer=function(e,t,n){return l.default.updatePlayer(e,t,n)},e.sendNotification=function(e,t,n,i,r,o,s,a){return l.default.sendNotification(e,t,n,i,r,o,s,a)},e.jsonpLib=function(e,t){s.default(e,null,t)},e.downloadServerAppConfig=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return a.default.getWindowEnv()===u.WindowEnvironmentKind.ServiceWorker?[3,2]:[4,new Promise(function(n,i){e.jsonpLib(a.default.getOneSignalApiUrl().toString()+"/sync/"+t+"/web",function(e,t){e?i(e):t.success?n(t):i(t)})})];case 1:return[2,n.sent()];case 2:return[4,c.default.downloadServerAppConfig(t)];case 3:return[2,n.sent()]}})})},e.createUser=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,l.default.createUser(e)];case 1:return[2,t.sent()]}})})},e.createEmailRecord=function(e,t,n){return i(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,l.default.createEmailRecord(e,t,n)];case 1:return[2,i.sent()]}})})},e.updateEmailRecord=function(e,t,n){return i(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,l.default.updateEmailRecord(e,t,n)];case 1:return[2,i.sent()]}})})},e.logoutEmail=function(e,t,n){return i(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,l.default.logoutEmail(e,t,n)];case 1:return[2,i.sent()]}})})},e.updateUserSession=function(e,t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,l.default.updateUserSession(e,t)];case 1:return[2,n.sent()]}})})},e}();t.default=d},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(43)),a=n(41),u=function(){function e(){}return e.prototype.getAppConfig=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,a.ConfigHelper.getAppConfig(e,s.default.downloadServerAppConfig)];case 1:return[2,t.sent()]}})})},e.prototype.getMergedConfig=function(e,t){return a.ConfigHelper.getMergedConfig(e,t)},e}();t.default=u},function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(20)),u=n(15),c=n(30),l=n(65),d=s(n(12)),f=s(n(8)),p=s(n(0)),h=function(){function e(e){this.context=e,this.onSessionSent=e.sessionManager.getPageViewCount()>1}return e.prototype.getDeviceId=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,f.default.getSubscription()];case 1:if(!(e=t.sent().deviceId))throw new l.NotSubscribedError(l.NotSubscribedReason.NoDeviceId);return[2,e]}})})},e.prototype.createDeviceRecord=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return(e=new c.PushDeviceRecord).appId=this.context.appConfig.appId,t=e,[4,d.default.getCurrentNotificationType()];case 1:return t.subscriptionState=n.sent(),[2,e]}})})},e.prototype.sendPlayerUpdate=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,this.context.subscriptionManager.isAlreadyRegisteredWithOneSignal()];case 1:return n.sent()?[4,this.getDeviceId()]:(p.default.debug("Not sending the update because user is not registered with OneSignal (no device id)"),[2]);case 2:return t=n.sent(),e?[3,4]:[4,this.createDeviceRecord()];case 3:e=n.sent(),n.label=4;case 4:return this.onSessionSent?[4,a.default.updatePlayer(this.context.appConfig.appId,t,i({notification_types:u.SubscriptionStateKind.Subscribed},e.serialize()))]:[3,6];case 5:return n.sent(),[3,8];case 6:return[4,this.sendOnSessionUpdate(e)];case 7:n.sent(),n.label=8;case 8:return[2]}})})},e.prototype.sendOnSessionUpdate=function(e){return r(this,void 0,void 0,function(){var t,n;return o(this,function(i){switch(i.label){case 0:return this.onSessionSent?[2]:this.context.sessionManager.isFirstPageView()?[4,this.context.subscriptionManager.isAlreadyRegisteredWithOneSignal()]:[2];case 1:return i.sent()?[4,this.getDeviceId()]:(p.default.debug("Not sending the on session because user is not registered with OneSignal (no device id)"),[2]);case 2:return t=i.sent(),e?[3,4]:[4,this.createDeviceRecord()];case 3:e=i.sent(),i.label=4;case 4:if(e.subscriptionState!==u.SubscriptionStateKind.Subscribed&&!0!==OneSignal.config.enableOnSession)return[2];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,a.default.updateUserSession(t,e)];case 6:return i.sent(),this.onSessionSent=!0,[3,8];case 7:return n=i.sent(),p.default.error('Failed to update user session. Error "'+n.message+'" '+n.stack),[3,8];case 8:return[2]}})})},e.prototype.sendPlayerCreate=function(e){return r(this,void 0,void 0,function(){var t,n;return o(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,a.default.createUser(e)];case 1:return(t=i.sent())?(p.default.info("Subscribed to web push and registered with OneSignal",e,t),this.onSessionSent=!0,[2,t]):(p.default.error("Failed to create user."),[2,void 0]);case 2:return n=i.sent(),p.default.error('Failed to create user. Error "'+n.message+'" '+n.stack),[2,void 0];case 3:return[2]}})})},e.prototype.onSessionAlreadyCalled=function(){return this.onSessionSent},e}();t.UpdateManager=h},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(7));(s=t.SubscriptionErrorReason||(t.SubscriptionErrorReason={}))[s.InvalidSafariSetup=0]="InvalidSafariSetup",s[s.Blocked=1]="Blocked",s[s.Dismissed=2]="Dismissed";var u=function(e){function n(i){var r=this;switch(i){case t.SubscriptionErrorReason.InvalidSafariSetup:r=e.call(this,"The Safari site URL, icon size, or push certificate is invalid, or Safari is in a private session.")||this;break;case t.SubscriptionErrorReason.Blocked:r=e.call(this,"Notification permissions are blocked.")||this;break;case t.SubscriptionErrorReason.Dismissed:r=e.call(this,"The notification permission prompt was dismissed.")||this}return Object.setPrototypeOf(r,n.prototype),r}return r(n,e),n}(a.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.isNewSubscription=function(){return this.existingW3cPushSubscription?!!this.existingW3cPushSubscription.w3cEndpoint!=!!this.w3cEndpoint||(!(!this.existingW3cPushSubscription.w3cEndpoint||!this.w3cEndpoint||this.existingW3cPushSubscription.w3cEndpoint.toString()===this.w3cEndpoint.toString())||(this.existingW3cPushSubscription.w3cP256dh!==this.w3cP256dh||this.existingW3cPushSubscription.w3cAuth!==this.w3cAuth)):!this.existingSafariDeviceToken||this.existingSafariDeviceToken!==this.safariDeviceToken},e.setFromW3cSubscription=function(t){var n=new e;if(t&&(n.w3cEndpoint=new URL(t.endpoint),t.getKey)){var i=null;try{i=t.getKey("p256dh")}catch(e){}var r=null;try{r=t.getKey("auth")}catch(e){}if(i){var o=btoa(String.fromCharCode.apply(null,new Uint8Array(i)));n.w3cP256dh=o}if(r){var s=btoa(String.fromCharCode.apply(null,new Uint8Array(r)));n.w3cAuth=s}}return n},e.prototype.setFromSafariSubscription=function(e){this.safariDeviceToken=e},e.prototype.serialize=function(){return{w3cEndpoint:this.w3cEndpoint?this.w3cEndpoint.toString():null,w3cP256dh:this.w3cP256dh,w3cAuth:this.w3cAuth,safariDeviceToken:this.safariDeviceToken,existingPushSubscription:this.existingW3cPushSubscription?this.existingW3cPushSubscription.serialize():null,existingSafariDeviceToken:this.existingSafariDeviceToken}},e.deserialize=function(t){var n=new e;if(!t)return n;try{n.w3cEndpoint=new URL(t.w3cEndpoint)}catch(e){}return n.w3cP256dh=t.w3cP256dh,n.w3cAuth=t.w3cAuth,n.existingW3cPushSubscription=void 0,t.existingW3cPushSubscription?n.existingW3cPushSubscription=e.deserialize(t.existingW3cPushSubscription):t.existingPushSubscription&&(n.existingW3cPushSubscription=e.deserialize(t.existingPushSubscription)),n.safariDeviceToken=t.safariDeviceToken,n.existingSafariDeviceToken=t.existingSafariDeviceToken,n},e}();t.RawPushSubscription=i},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),o=n(85),s=i(n(56)),a=i(n(1)),u=function(){function e(){}return e.getServiceWorkerManager=function(e){var t=e.appConfig,n=a.default.getBuildEnvPrefix(),i={workerAPath:new s.default("/"+n+"OneSignalSDKWorker.js"),workerBPath:new s.default("/"+n+"OneSignalSDKUpdaterWorker.js"),registrationOptions:{scope:"/"}};return t.userConfig&&(t.userConfig.path&&(i.workerAPath=new s.default(""+t.userConfig.path+n+t.userConfig.serviceWorkerPath),i.workerBPath=new s.default(""+t.userConfig.path+n+t.userConfig.serviceWorkerUpdaterPath)),t.userConfig.serviceWorkerParam&&(i.registrationOptions=t.userConfig.serviceWorkerParam)),new r.ServiceWorkerManager(e,i)},e.getSubscriptionManager=function(e){var t=e.appConfig,n={safariWebId:t.safariWebId,appId:t.appId,vapidPublicKey:t.vapidPublicKey,onesignalVapidPublicKey:t.onesignalVapidPublicKey};return new o.SubscriptionManager(e,n)},e}();t.ContextHelper=u,t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64ToUint8Array=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i},t.arrayBufferToBase64=function(e){for(var t,n="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(e),o=r.byteLength,s=o%3,a=o-s,u=0;u<a;u+=3)n+=i[(16515072&(t=r[u]<<16|r[u+1]<<8|r[u+2]))>>18]+i[(258048&t)>>12]+i[(4032&t)>>6]+i[63&t];return 1==s?n+=i[(252&(t=r[a]))>>2]+i[(3&t)<<4]+"==":2==s&&(n+=i[(64512&(t=r[a]<<8|r[a+1]))>>10]+i[(1008&t)>>4]+i[(15&t)<<2]+"="),n},t.base64Encode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},t.base64Decode=function(e){return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,u=n(49),c=s(n(5)),l=function(){function e(){}return e.prototype.getPropertiesAsJson=function(){return{origin:location.origin,url:location.href,sdkVersion:c.default.version()}},e}(),d=function(){return function(){}}();(a=t.ApiUsageMetricKind||(t.ApiUsageMetricKind={})).HttpPermissionRequest="HttpPermissionRequest",a.SyncHashedEmail="SyncHashedEmail";var f=function(e){function t(t){var n=e.call(this)||this;return n.apiName=t,n}return r(t,e),t.prototype.getEventName=function(){return"api-usage"},t.prototype.getPropertiesAsJson=function(){return o({api:this.apiName.toString()},e.prototype.getPropertiesAsJson.call(this))},t}(l);t.ApiUsageMetricEvent=f;var p=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.getProfileName=function(){return"all_websites"},t.prototype.getDateUtc=function(){var e=new Date;return e.getUTCMonth()+1+"_"+e.getUTCDate()+"_"+e.getUTCFullYear()},t.prototype.getOperationData=function(){var e={$add:{},$ignore_time:!0};return e.$add["pageview_"+this.getDateUtc()]=1,e},t}(d);t.PageViewMetricEngagement=p;var h=function(){function e(e,t){this.isFeatureEnabled=e,this.mixpanelReportingToken=t}return Object.defineProperty(e,"MIXPANEL_REPORTING_URL",{get:function(){return"https://api.mixpanel.com"},enumerable:!0,configurable:!0}),e.prototype.isEnabled=function(){return this.isFeatureEnabled&&!!this.mixpanelReportingToken},e.prototype.reportEvent=function(t){if(!this.isEnabled())return Promise.resolve(null);var n={event:t.getEventName(),properties:o({token:this.mixpanelReportingToken},t.getPropertiesAsJson())},i=u.base64Encode(JSON.stringify(n)),r={method:"GET",headers:new Headers,cache:"no-cache"};return fetch(e.MIXPANEL_REPORTING_URL+"/track/?data="+i,r)},e.prototype.reportEngagement=function(t){if(!this.isEnabled())return Promise.resolve(null);var n={$token:this.mixpanelReportingToken,$distinct_id:t.getProfileName()};n=o({},n,t.getOperationData());var i=u.base64Encode(JSON.stringify(n)),r={method:"GET",headers:new Headers,cache:"no-cache"};return fetch(e.MIXPANEL_REPORTING_URL+"/engage/?data="+i,r)},e.prototype.shouldCollectPageView=function(){var e=new Date;return e.getUTCMonth()+1<=2&&e.getUTCDate()<=10&&e.getUTCFullYear()<=2018&&e.getUTCMonth()+1>=2&&e.getUTCDate()>=8&&e.getUTCFullYear()>=2018},e.prototype.reportPageView=function(){this.shouldCollectPageView()&&this.reportEngagement(new p)},e}();t.default=h},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(6)),a=o(n(9)),u=n(21),c=o(n(8)),l=n(16),d=o(n(1)),f=function(){function e(){}return Object.defineProperty(e,"STORED_PERMISSION_KEY",{get:function(){return"storedNotificationPermission"},enumerable:!0,configurable:!0}),e.prototype.getNotificationPermission=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return[4,this.getReportedNotificationPermission(e)];case 1:return t=n.sent(),[4,this.isPermissionEnvironmentAmbiguous(t)];case 2:return n.sent()?[4,this.getInterpretedAmbiguousPermission(t)]:[3,4];case 3:return[2,n.sent()];case 4:return[2,t]}})})},e.prototype.getReportedNotificationPermission=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return a.default.safari?[2,e.getSafariNotificationPermission(t)]:s.default.isUsingSubscriptionWorkaround()?[4,this.getOneSignalSubdomainNotificationPermission(t)]:[3,2];case 1:return[2,n.sent()];case 2:return[2,this.getW3cNotificationPermission()]}})})},e.getSafariNotificationPermission=function(e){if(e)return window.safari.pushNotification.permission(e).permission;throw new u.InvalidArgumentError("safariWebId",u.InvalidArgumentReason.Empty)},e.prototype.getW3cNotificationPermission=function(){return window.Notification.permission},e.prototype.getOneSignalSubdomainNotificationPermission=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,new Promise(function(t){OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION,{safariWebId:e},function(e){var n=e.data;t(n)})})]})})},e.prototype.isPermissionEnvironmentAmbiguous=function(e){return i(this,void 0,void 0,function(){var t,n,i;return r(this,function(r){switch(r.label){case 0:return t=s.default.redetectBrowserUserAgent(),(n=!t.safari&&!t.firefox&&e===l.NotificationPermission.Denied)?(i=this.isCurrentFrameContextCrossOrigin())?[3,2]:[4,d.default.isFrameContextInsecure()]:[3,3];case 1:i=r.sent(),r.label=2;case 2:n=i||s.default.isUsingSubscriptionWorkaround()||d.default.isInsecureOrigin(),r.label=3;case 3:return[2,n]}})})},e.prototype.isCurrentFrameContextCrossOrigin=function(){var e;try{e=window.top.location.origin}catch(e){return!0}return window.top!==window&&e!==window.location.origin},e.prototype.getInterpretedAmbiguousPermission=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:switch(e){case l.NotificationPermission.Denied:return[3,1]}return[3,3];case 1:return[4,this.getStoredPermission()];case 2:return(t=n.sent())?[2,t]:[2,l.NotificationPermission.Default];case 3:return[2,e]}})})},e.prototype.getStoredPermission=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,c.default.get("Options",e.STORED_PERMISSION_KEY)];case 1:return[2,t.sent()]}})})},e.prototype.setStoredPermission=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,c.default.put("Options",{key:e.STORED_PERMISSION_KEY,value:t})];case 1:return n.sent(),[2]}})})},e.prototype.updateStoredPermission=function(){return i(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return[4,this.getNotificationPermission()];case 1:return e=t.sent(),[4,this.setStoredPermission(e)];case 2:return[2,t.sent()]}})})},e}();t.default=f},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(1)),o=n(3),s=i(n(0)),a=function(){function e(){this.incrementedPageViewCount=!1}return e.prototype.getPageViewCount=function(){try{var t=sessionStorage.getItem(e.SESSION_STORAGE_KEY_NAME),n=t?parseInt(t):0;return isNaN(n)?0:n}catch(e){return 0}},e.prototype.setPageViewCount=function(t){try{sessionStorage.setItem(e.SESSION_STORAGE_KEY_NAME,t.toString()),r.default.getWindowEnv()===o.WindowEnvironmentKind.OneSignalSubscriptionPopup&&OneSignal.subscriptionPopup&&OneSignal.subscriptionPopup.message(OneSignal.POSTMAM_COMMANDS.SET_SESSION_COUNT)}catch(e){}},e.prototype.incrementPageViewCount=function(){if(!this.incrementedPageViewCount){var e=this.getPageViewCount()+1;this.setPageViewCount(e),s.default.debug("Incremented page view count to "+e+"."),this.incrementedPageViewCount=!0}},e.prototype.simulatePageNavigationOrRefresh=function(){this.incrementedPageViewCount=!1},e.prototype.isFirstPageView=function(){return 1===this.getPageViewCount()},e}();t.SessionManager=a,a.SESSION_STORAGE_KEY_NAME="onesignal-pageview-count"},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),o=n(58),s=i(n(86)),a=n(52),u=i(n(51)),c=i(n(50)),l=i(n(48)),d=n(45),f=function(){return function(e){this.appConfig=e,this.subscriptionManager=l.default.getSubscriptionManager(this),this.serviceWorkerManager=l.default.getServiceWorkerManager(this),this.sessionManager=new a.SessionManager,this.permissionManager=new u.default,this.workerMessenger=new r.WorkerMessenger(this),this.updateManager=new d.UpdateManager(this),this.cookieSyncer=new s.default(this,e.cookieSyncEnabled),this.dynamicResourceLoader=new o.DynamicResourceLoader,this.metricsManager=new c.default(e.metrics.enable,e.metrics.mixpanelReportingToken)}}();t.default=f},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(1)),a=o(n(8)),u=o(n(35)),c=o(n(0)),l=n(4),d=function(){function e(){}return e.markHttpsNativePromptDismissed=function(){return i(this,void 0,void 0,function(){var e,t,n;return r(this,function(i){switch(i.label){case 0:return l.isUsingSubscriptionWorkaround()?[4,new Promise(function(e,t){OneSignal.proxyFrameHost.message(OneSignal.POSTMAM_COMMANDS.MARK_PROMPT_DISMISSED,{},function(n){n.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?e():t()})})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[4,a.default.get("Options","promptDismissCount")];case 3:return(e=i.sent())||(e=0),l.isUsingSubscriptionWorkaround()||(e+=1),t=3,2==e?t=7:e>2&&(t=30),c.default.debug("("+s.default.getWindowEnv().toString()+") OneSignal: User dismissed the native notification prompt; reprompt after "+t+" days."),[4,a.default.put("Options",{key:"promptDismissCount",value:e})];case 4:return i.sent(),n=24*t*60,[2,u.default.setItem("onesignal-notification-prompt","dismissed",n)]}})})},e}();t.default=d},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(n,i){var r=e.call(this,"Registration of a Service Worker failed.")||this;return r.status=n,r.statusText=i,Object.setPrototypeOf(r,t.prototype),r}return r(t,e),t}(o(n(7)).default);t.ServiceWorkerRegistrationError=s,t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),r=function(){function e(e){if(!e)throw new i.InvalidArgumentError("path",i.InvalidArgumentReason.Empty);this.path=e.trim()}return e.prototype.getQueryString=function(){var e=this.path.indexOf("?");return-1===e?null:this.path.length>e?this.path.substring(e+1):null},e.prototype.getWithoutQueryString=function(){return this.path.split(e.QUERY_STRING)[0]},e.prototype.getFileName=function(){return this.getWithoutQueryString().split("\\").pop().split("/").pop()},e.prototype.getFileNameWithQuery=function(){return this.path.split("\\").pop().split("/").pop()},e.prototype.getFullPath=function(){return this.path},e.prototype.getPathWithoutFileName=function(){var e=this.getWithoutQueryString(),t=e.lastIndexOf(this.getFileName()),n=e.substring(0,t);return n=n.replace(/[\\\/]$/,"")},e}();t.default=r,r.QUERY_STRING="?"},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),a=o(n(33)),u=o(n(22)),c=o(n(0)),l=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher-message","onesignal-bell-launcher-message-opened",null,"hidden",["opacity","transform"],".onesignal-bell-launcher-message-body")||this;return n.bell=t,n.contentType="",n.queued=[],n}return r(t,e),Object.defineProperty(t,"TIMEOUT",{get:function(){return 2500},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TYPES",{get:function(){return{TIP:"tip",MESSAGE:"message",QUEUED:"queued"}},enumerable:!0,configurable:!0}),t.prototype.display=function(e,t,n){var i=this;return void 0===n&&(n=0),c.default.debug("Calling %cdisplay("+e+", "+t+", "+n+").",s.getConsoleStyle("code")),(this.shown?this.hide():s.nothing()).then(function(){i.content=s.decodeHtmlEntities(t),i.contentType=e}).then(function(){return i.show()}).then(function(){return s.delay(n)}).then(function(){return i.hide()}).then(function(){i.content=i.getTipForState(),i.contentType="tip"})},t.prototype.getTipForState=function(){return this.bell.state===u.default.STATES.UNSUBSCRIBED?this.bell.text["tip.state.unsubscribed"]:this.bell.state===u.default.STATES.SUBSCRIBED?this.bell.text["tip.state.subscribed"]:this.bell.state===u.default.STATES.BLOCKED?this.bell.text["tip.state.blocked"]:void 0},t.prototype.enqueue=function(e){var t=this;return this.queued.push(s.decodeHtmlEntities(e)),new Promise(function(e){t.bell.badge.shown?t.bell.badge.hide().then(function(){return t.bell.badge.increment()}).then(function(){return t.bell.badge.show()}).then(e):(t.bell.badge.increment(),t.bell.initialized?t.bell.badge.show().then(e):e())})},t.prototype.dequeue=function(e){var t=this,n=this.queued.pop(e);return new Promise(function(e){t.bell.badge.shown?t.bell.badge.hide().then(function(){return t.bell.badge.decrement()}).then(function(e){return e>0?t.bell.badge.show():Promise.resolve(t)}).then(e(n)):(t.bell.badge.decrement(),e(n))})},t}(a.default);t.default=l},function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(1)),u=s(n(5)),c=function(){function e(){this.cache={}}return e.prototype.getCache=function(){return i({},this.cache)},e.prototype.loadSdkStylesheet=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return e=a.default.getOneSignalResourceUrlPath(),t=a.default.getOneSignalCssFileName(),[4,this.loadIfNew(0,new URL(e+"/"+t+"?v="+u.default.getSdkStylesVersionHash()))];case 1:return[2,n.sent()]}})})},e.prototype.loadFetchPolyfill=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.loadIfNew(1,new URL("https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"))];case 1:return[2,e.sent()]}})})},e.prototype.loadIfNew=function(t,n){return r(this,void 0,void 0,function(){return o(this,function(i){switch(i.label){case 0:return this.cache[n.toString()]||(this.cache[n.toString()]=e.load(t,n)),[4,this.cache[n.toString()]];case 1:return[2,i.sent()]}})})},e.load=function(e,t){return r(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,new Promise(function(n,i){switch(e){case 1:(r=document.createElement("script")).setAttribute("type","text/javascript"),r.setAttribute("async","async"),r.setAttribute("src",t.toString());break;case 0:var r;(r=document.createElement("link")).setAttribute("rel","stylesheet"),r.setAttribute("href",t.toString())}r.onerror=i,r.onload=n,document.querySelector("head").appendChild(r)})];case 1:return n.sent(),[2,0];case 2:return n.sent(),[2,1];case 3:return[2]}})})},e}();t.DynamicResourceLoader=c},function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(9)),u=s(n(66)),c=n(11),l=s(n(64)),d=s(n(2)),f=s(n(24)),p=n(16),h=s(n(1)),g=n(3),b=s(n(92)),v=s(n(8)),m=n(4),S=s(n(12)),y=s(n(23)),w=n(25),O=s(n(20)),_=n(18),P=n(58),E=s(n(13)),I=n(38),C=n(29),k=n(40),M=s(n(0)),A=s(n(5)),T=s(n(22)),N=n(61),x=n(32),R=s(n(87)),D=n(6),W=function(){function e(){}return e.storeInitialValues=function(){return r(this,void 0,void 0,function(){var e,t,n;return o(this,function(i){switch(i.label){case 0:return[4,OneSignal.privateIsPushNotificationsEnabled()];case 1:return e=i.sent(),[4,OneSignal.privateGetNotificationPermission()];case 2:return t=i.sent(),[4,OneSignal.internalIsOptedOut()];case 3:return n=i.sent(),f.default.put("subscription.optedOut",n),[4,v.default.put("Options",{key:"isPushEnabled",value:e})];case 4:return i.sent(),[4,v.default.put("Options",{key:"notificationPermission",value:t})];case 5:return i.sent(),[2]}})})},e.processExpiringSubscriptions=function(){return r(this,void 0,void 0,function(){var e,t,n,i,r;return o(this,function(o){switch(o.label){case 0:return e=OneSignal.context,M.default.debug("Checking subscription expiration..."),[4,e.subscriptionManager.isSubscriptionExpiring()];case 1:return o.sent()?[4,h.default.getIntegration()]:(M.default.debug("Subscription is not considered expired."),[2]);case 2:switch(t=o.sent(),n=h.default.getWindowEnv(),M.default.debug("Subscription is considered expiring. Current Integration:",t),t){case C.IntegrationKind.Secure:return[3,3];case C.IntegrationKind.SecureProxy:return[3,6];case C.IntegrationKind.InsecureProxy:return[3,11]}return[3,13];case 3:return[4,e.subscriptionManager.subscribe(1)];case 4:return i=o.sent(),[4,e.subscriptionManager.registerSubscription(i)];case 5:return o.sent(),[3,13];case 6:return n!==g.WindowEnvironmentKind.OneSignalProxyFrame?[3,8]:[4,new Promise(function(t){e.workerMessenger.once(_.WorkerMessengerCommand.SubscribeNew,function(e){t(k.Subscription.deserialize(e))}),e.workerMessenger.unicast(_.WorkerMessengerCommand.SubscribeNew,e.appConfig)})];case 7:return r=o.sent(),M.default.debug("Finished registering brand new subscription:",r),[3,10];case 8:return[4,OneSignal.proxyFrameHost.runCommand(OneSignal.POSTMAM_COMMANDS.PROCESS_EXPIRING_SUBSCRIPTIONS)];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return[4,v.default.remove("Ids","registrationId")];case 12:return o.sent(),M.default.debug("Unsubscribed expiring HTTP subscription by removing registration ID."),[3,13];case 13:return[2]}})})},e.onSdkInitialized=function(){return r(this,void 0,void 0,function(){var t,n,i,s,a=this;return o(this,function(u){switch(u.label){case 0:return t=OneSignal.context,[4,e.storeInitialValues()];case 1:return u.sent(),[4,e.installNativePromptPermissionChangedHook()];case 2:return u.sent(),[4,t.permissionManager.getNotificationPermission(t.appConfig.safariWebId)];case 3:return u.sent()===p.NotificationPermission.Granted&&(OneSignal.__doNotShowWelcomeNotification=!0),(n=navigator.serviceWorker&&"https:"===window.location.protocol)?[4,h.default.isFrameContextInsecure()]:[3,5];case 4:n=!u.sent(),u.label=5;case 5:if(!n)return[3,11];u.label=6;case 6:return u.trys.push([6,10,,11]),[4,x.ServiceWorkerManager.getRegistration()];case 7:return(i=u.sent())&&i.active?[4,t.serviceWorkerManager.establishServiceWorkerChannel()]:[3,9];case 8:u.sent(),u.label=9;case 9:return[3,11];case 10:return s=u.sent(),M.default.error(s),[3,11];case 11:return[4,e.processExpiringSubscriptions()];case 12:return u.sent(),!0!==OneSignal.config.userConfig.autoRegister||D.OneSignalUtils.isUsingSubscriptionWorkaround()?OneSignal.context.updateManager.sendOnSessionUpdate():OneSignal.once("ON_SESSION",function(){return r(a,void 0,void 0,function(){return o(this,function(e){return OneSignal.context.updateManager.sendOnSessionUpdate(),[2]})})}),[4,Promise.all([e.showNotifyButton(),e.showPromptsFromWebConfigEditor(),e.updateEmailSessionCount(),t.cookieSyncer.install()])];case 13:return u.sent(),[4,d.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED_PUBLIC)];case 14:return u.sent(),[2]}})})},e.showNotifyButton=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return!A.default.isBrowser()||OneSignal.notifyButton?[3,3]:(OneSignal.config.userConfig.notifyButton=OneSignal.config.userConfig.notifyButton||{},OneSignal.config.userConfig.bell&&(OneSignal.config.userConfig.bell=i({},OneSignal.config.userConfig.bell,OneSignal.config.userConfig.notifyButton),OneSignal.config.userConfig.notifyButton=i({},OneSignal.config.userConfig.notifyButton,OneSignal.config.userConfig.bell)),(e=OneSignal.config.userConfig.notifyButton.displayPredicate)&&"function"==typeof e?[4,Promise.resolve(OneSignal.config.userConfig.notifyButton.displayPredicate())]:[3,2]);case 1:return!1!==t.sent()?(OneSignal.notifyButton=new T.default(OneSignal.config.userConfig.notifyButton),OneSignal.notifyButton.create()):M.default.debug("Notify button display predicate returned false so not showing the notify button."),[3,3];case 2:OneSignal.notifyButton=new T.default(OneSignal.config.userConfig.notifyButton),OneSignal.notifyButton.create(),t.label=3;case 3:return[2]}})})},e.updateEmailSessionCount=function(){return r(this,void 0,void 0,function(){var e,t,n;return o(this,function(i){switch(i.label){case 0:return(e=OneSignal.context).sessionManager.isFirstPageView()?[4,v.default.getEmailProfile()]:[3,3];case 1:return(t=i.sent()).emailId?((n=new I.EmailDeviceRecord(t.emailAddress,t.emailAuthHash)).appId=e.appConfig.appId,[4,O.default.updateUserSession(t.emailId,n)]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.showPromptsFromWebConfigEditor=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return e=OneSignal.config,[4,OneSignal.privateIsPushNotificationsEnabled()];case 1:return(t=!n.sent()&&e.userConfig.promptOptions&&e.userConfig.promptOptions.slidedown&&e.userConfig.promptOptions.slidedown.autoPrompt)?[4,OneSignal.internalIsOptedOut()]:[3,3];case 2:t=!n.sent(),n.label=3;case 3:return t?[4,OneSignal.privateShowHttpPrompt()]:[3,5];case 4:n.sent(),n.label=5;case 5:return e.userConfig.promptOptions?[4,N.CustomLink.initialize(e.userConfig.promptOptions.customlink)]:[3,7];case 6:n.sent(),n.label=7;case 7:return[2]}})})},e.installNativePromptPermissionChangedHook=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return!navigator.permissions||a.default.firefox&&Number(a.default.version)<=45?[3,2]:(OneSignal._usingNativePermissionHook=!0,[4,navigator.permissions.query({name:"notifications"})]);case 1:e.sent().onchange=function(){m.triggerNotificationPermissionChanged()},e.label=2;case 2:return[2]}})})},e.saveInitOptions=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){return e=[],!1===OneSignal.config.userConfig.persistNotification?e.push(v.default.put("Options",{key:"persistNotification",value:!1})):!0===OneSignal.config.userConfig.persistNotification?e.push(v.default.put("Options",{key:"persistNotification",value:"force"})):e.push(v.default.put("Options",{key:"persistNotification",value:!0})),t=OneSignal.config.userConfig.webhooks,["notification.displayed","notification.clicked","notification.dismissed"].forEach(function(n){t&&t[n]?e.push(v.default.put("Options",{key:"webhooks."+n,value:t[n]})):e.push(v.default.put("Options",{key:"webhooks."+n,value:!1}))}),t&&t.cors?e.push(v.default.put("Options",{key:"webhooks.cors",value:!0})):e.push(v.default.put("Options",{key:"webhooks.cors",value:!1})),OneSignal.config.userConfig.notificationClickHandlerMatch?e.push(v.default.put("Options",{key:"notificationClickHandlerMatch",value:OneSignal.config.userConfig.notificationClickHandlerMatch})):e.push(v.default.put("Options",{key:"notificationClickHandlerMatch",value:"exact"})),OneSignal.config.userConfig.notificationClickHandlerAction?e.push(v.default.put("Options",{key:"notificationClickHandlerAction",value:OneSignal.config.userConfig.notificationClickHandlerAction})):e.push(v.default.put("Options",{key:"notificationClickHandlerAction",value:"navigate"})),[2,Promise.all(e)]})})},e.internalInit=function(){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return M.default.debug("Called %cinternalInit()",m.getConsoleStyle("code")),[4,(t=OneSignal.context).serviceWorkerManager.updateWorker()];case 1:return n.sent(),t.sessionManager.incrementPageViewCount(),a.default.safari&&!1===OneSignal.config.userConfig.autoRegister?(M.default.debug("On Safari and autoregister is false, skipping sessionInit()."),d.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED),[2]):!1!==OneSignal.config.userConfig.autoRegister||OneSignal.config.subdomain?[3,6]:(M.default.debug("Skipping internal init. Not auto-registering and no subdomain."),[4,OneSignal.privateIsPushNotificationsEnabled()]);case 2:return!n.sent()||m.isUsingSubscriptionWorkaround()?[3,4]:(M.default.info("Because the user is already subscribed and has enabled notifications, we will re-register their GCM token."),[4,y.default.registerForPush()]);case 3:n.sent(),n.label=4;case 4:return[4,d.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED)];case 5:return n.sent(),[2];case 6:return"visible"!==document.visibilityState?(m.once(document,"visibilitychange",function(t,n){"visible"===document.visibilityState&&(n(),e.sessionInit({__fromInit:!0}))},!0),[2]):[4,e.sessionInit({__fromInit:!0})];case 7:return n.sent(),[2]}})})},e.initSaveState=function(e){return r(this,void 0,void 0,function(){var t,n,i;return o(this,function(r){switch(r.label){case 0:return[4,S.default.getAppId()];case 1:return t=r.sent(),[4,v.default.put("Ids",{type:"appId",id:t})];case 2:return r.sent(),n=e||document.title||"Notification",[4,v.default.put("Options",{key:"pageTitle",value:n})];case 3:return r.sent(),M.default.info("OneSignal: Set pageTitle to be '"+n+"'."),i=OneSignal.config,[4,v.default.put("Options",{key:"emailAuthRequired",value:!!i.emailAuthRequired})];case 4:return r.sent(),[2]}})})},e.finishSessionInit=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return OneSignal._sessionInitAlreadyRunning=!1,e.__fromInit?[4,d.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.sessionInit=function(t){return r(this,void 0,void 0,function(){var n;return o(this,function(i){switch(i.label){case 0:return t||(t={}),M.default.debug("Called %csessionInit("+JSON.stringify(t)+")",m.getConsoleStyle("code")),OneSignal._sessionInitAlreadyRunning?(M.default.debug("Returning from sessionInit because it has already been called."),[2]):(OneSignal._sessionInitAlreadyRunning=!0,n=OneSignal.context.appConfig.appId,t.__fromRegister&&t.modalPrompt?(OneSignal.subscriptionModalHost=new b.default(n,t),[4,OneSignal.subscriptionModalHost.load()]):[3,3]);case 1:return i.sent(),[4,e.finishSessionInit(t)];case 2:return i.sent(),[2];case 3:return m.isUsingSubscriptionWorkaround()?[3,17]:t.__fromInit&&S.default.wasHttpsNativePromptDismissed()?(M.default.debug("OneSignal: Not automatically showing native HTTPS prompt because the user previously dismissed it."),[4,e.finishSessionInit(t)]):[3,5];case 4:return i.sent(),[2];case 5:return[4,OneSignal.internalIsOptedOut()];case 6:return i.sent()?[3,12]:!t.__fromRegister&&!0===OneSignal.config.userConfig.autoRegister&&(a.default.chrome&&Number(a.default.version)>=63&&(a.default.tablet||a.default.mobile)||a.default.safari&&Number(a.default.version)>=12.1)?[4,e.finishSessionInit(t)]:[3,8];case 7:return i.sent(),OneSignal.privateShowHttpPrompt(),[3,11];case 8:return[4,e.finishSessionInit(t)];case 9:return i.sent(),[4,y.default.registerForPush()];case 10:i.sent(),i.label=11;case 11:return[3,16];case 12:return t.__fromRegister?[4,e.finishSessionInit(t)]:[3,14];case 13:return i.sent(),OneSignal.setSubscription(!0),[3,16];case 14:return[4,e.finishSessionInit(t)];case 15:i.sent(),i.label=16;case 16:return d.default.trigger("ON_SESSION"),[2];case 17:return!0!==OneSignal.config.userConfig.autoRegister&&M.default.debug("OneSignal: Not automatically showing popover because autoRegister is not specifically true."),S.default.isHttpPromptAlreadyShown()&&M.default.debug("OneSignal: Not automatically showing popover because it was previously shown in the same session."),!0!==OneSignal.config.userConfig.autoRegister||S.default.isHttpPromptAlreadyShown()?[3,19]:[4,OneSignal.privateShowHttpPrompt().catch(function(e){e instanceof c.InvalidStateError&&e.reason===c.InvalidStateReason[c.InvalidStateReason.RedundantPermissionMessage]||e instanceof l.default||e instanceof u.default||e instanceof E.default?M.default.debug("[Prompt Not Showing]",e):M.default.info(e)})];case 18:i.sent(),i.label=19;case 19:return[4,e.finishSessionInit(t)];case 20:return i.sent(),d.default.trigger("ON_SESSION"),[2]}})})},e.polyfillSafariFetch=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:if(!a.default.safari||void 0!==window.fetch)return[3,4];M.default.debug("Loading fetch polyfill for Safari.."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(new P.DynamicResourceLoader).loadFetchPolyfill()];case 2:return t.sent(),M.default.debug("Done loading fetch polyfill."),[3,4];case 3:return e=t.sent(),M.default.debug("Error loading fetch polyfill:",e),[3,4];case 4:return[2]}})})},e.errorIfInitAlreadyCalled=function(){if(OneSignal._initCalled)throw new w.SdkInitError(w.SdkInitErrorKind.MultipleInitialization);OneSignal._initCalled=!0},e.loadSubscriptionPopup=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return OneSignal.subscriptionPopupHost=new R.default(OneSignal.proxyFrameHost.url,e),[4,OneSignal.subscriptionPopupHost.load()];case 1:return t.sent(),[2]}})})},e}();t.default=W},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=i(n(1)),s=function(){function e(){}return e.promiseStub=function(){return{then:e.promiseStub,catch:e.promiseStub}},e.ensureBackwardsCompatibility=function(t){e.environmentPolyfill(t),e.postmams(t),t.syncHashedEmail=e.promiseStub},e.environmentPolyfill=function(e){e.environment={},e.environment.getEnv=function(){return""},e.environment.isPopup=function(){return o.default.getWindowEnv()===r.WindowEnvironmentKind.OneSignalSubscriptionPopup},e.environment.isIframe=function(){return o.default.getWindowEnv()===r.WindowEnvironmentKind.OneSignalProxyFrame}},e.postmams=function(e){var t=function(){this.messenger.message.apply(this.messenger,arguments)},n=function(){this.messenger.postMessage.apply(this.messenger,arguments)};function i(e){e.message=t,e.postMessage=n}e.proxyFrame&&(e.iframePostmam=e.proxyFrame,i(e.iframePostmam)),e.subscriptionPopup&&(e.popupPostmam=e.subscriptionPopup,i(e.popupPostmam)),e.subscriptionModal&&(e.modalPostmam=e.subscriptionModal,i(e.modalPostmam))},e}();t.default=s},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),a=o(n(17)),u=o(n(0)),c=function(){function e(){}return e.initialize=function(t){return i(this,void 0,void 0,function(){var n;return r(this,function(i){switch(i.label){case 0:return t&&t.enabled?(u.default.info("Inititalize CustomLink"),[4,a.default.context.dynamicResourceLoader.loadSdkStylesheet()]):[2];case 1:return 0!==i.sent()?(u.default.debug("Not initializing custom link button because styles failed to load."),[2]):(document.querySelectorAll(e.containerSelector).forEach(function(n){e.isInitialized(n)||e.injectMarkup(n,t)}),[4,a.default.privateIsPushNotificationsEnabled()]);case 2:return n=i.sent(),document.querySelectorAll(e.subscribeSelector).forEach(function(i){return e.initSubscribeElement(i,t,n)}),document.querySelectorAll(e.explanationSelector).forEach(function(i){return e.initExplanationElement(i,t,n)}),[2]}})})},e.injectMarkup=function(t,n){if(n.text){if(t.innerHTML="",n.text.explanation){var i=document.createElement("p");s.addCssClass(i,e.explanationClass),t.appendChild(i)}if(n.text.subscribe){var r=document.createElement("button");s.addCssClass(r,e.subscribeClass),t.appendChild(r)}e.markAsInitialized(t)}else u.default.error("CustomLink: required property 'text' is missing in the config")},e.initSubscribeElement=function(t,n,i){n.text&&n.text.subscribe&&(i||(t.textContent=n.text.subscribe)),n.text&&n.text.unsubscribe&&i&&(t.textContent=n.text.unsubscribe),e.setResetClass(t),e.setStateClass(t,i),e.setStyleClass(t,n),e.setSizeClass(t,n),e.setCustomColors(t,n),!0!==n.unsubscribeEnabled&&s.addCssClass(t,"hide"),t.setAttribute(e.subscriptionStateAttribute,i.toString()),e.isInitialized(t)||(t.addEventListener("click",function(){u.default.info("CustomLink: subscribe clicked"),e.handleClick(t)}),e.markAsInitialized(t))},e.handleClick=function(t){return i(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return"true"===t.getAttribute(e.subscriptionStateAttribute)?[4,a.default.privateIsPushNotificationsEnabled()]:[3,4];case 1:return n.sent()?[4,a.default.setSubscription(!1)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[3,6];case 4:return[4,a.default.registerForPushNotifications()];case 5:n.sent(),n.label=6;case 6:return[2]}})})},e.initExplanationElement=function(t,n,i){n.text&&n.text.explanation&&(t.textContent=n.text.explanation),e.setResetClass(t),e.setStateClass(t,i),e.setSizeClass(t,n),!0!==n.unsubscribeEnabled&&s.addCssClass(t,"hide")},e.setCustomColors=function(e,t){"button"===t.style&&t.color&&t.color.button&&t.color.text?(e.style.backgroundColor=t.color.button,e.style.color=t.color.text):"link"===t.style&&t.color&&t.color.text&&(e.style.color=t.color.text)},e.setStateClass=function(e,t){var n=t?"state-unsubscribed":"state-subscribed",i=t?"state-subscribed":"state-unsubscribed";s.hasCssClass(e,n)&&s.removeCssClass(e,n),s.hasCssClass(e,i)||s.addCssClass(e,i)},e.setStyleClass=function(e,t){if(t&&t.style){var n=t.style;s.hasCssClass(e,n)||s.addCssClass(e,n)}},e.setSizeClass=function(e,t){if(t&&t.size){var n=t.size;s.hasCssClass(e,n)||s.addCssClass(e,n)}},e.setResetClass=function(t){var n=e.resetClass;s.hasCssClass(t,n)||s.addCssClass(t,n)},e.markAsInitialized=function(t){t.setAttribute(e.initializedAttribute,"true")},e.isInitialized=function(t){return"true"===t.getAttribute(e.initializedAttribute)},e}();t.CustomLink=c,c.initializedAttribute="data-cl-initialized",c.subscriptionStateAttribute="data-cl-state",c.containerClass="onesignal-customlink-container",c.containerSelector="."+c.containerClass,c.subscribeClass="onesignal-customlink-subscribe",c.subscribeSelector="."+c.subscribeClass,c.explanationClass="onesignal-customlink-explanation",c.explanationSelector="."+c.explanationClass,c.resetClass="onesignal-reset",t.default=c},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.DeliveryPlatformKind||(t.DeliveryPlatformKind={}))[i.ChromeLike=5]="ChromeLike",i[i.Safari=7]="Safari",i[i.Firefox=8]="Firefox",i[i.Edge=12]="Edge",i[i.Email=11]="Email"},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(7));(s=t.OneSignalApiErrorKind||(t.OneSignalApiErrorKind={}))[s.MissingAppId=0]="MissingAppId";var u=function(e){function n(i){var r=this;switch(i){case t.OneSignalApiErrorKind.MissingAppId:r=e.call(this,"The API call is missing an app ID.")||this}return Object.setPrototypeOf(r,n.prototype),r}return r(n,e),n}(a.default);t.OneSignalApiError=u},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var PermissionMessageDismissedError=function(e){function PermissionMessageDismissedError(){var t=e.call(this,"The permission message was previously dismissed.")||this;return Object.setPrototypeOf(t,PermissionMessageDismissedError.prototype),t}return r(PermissionMessageDismissedError,e),PermissionMessageDismissedError}(o(n(7)).default);t.default=PermissionMessageDismissedError},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(7));(s=t.NotSubscribedReason||(t.NotSubscribedReason={}))[s.Unknown=0]="Unknown",s[s.NoDeviceId=1]="NoDeviceId",s[s.NoEmailSet=2]="NoEmailSet",s[s.OptedOut=3]="OptedOut";var NotSubscribedError=function(e){function NotSubscribedError(n){var i=this;switch(n){case t.NotSubscribedReason.Unknown||t.NotSubscribedReason.NoDeviceId:i=e.call(this,"This operation can only be performed after the user is subscribed.")||this;break;case t.NotSubscribedReason.NoEmailSet:i=e.call(this,"No email is currently set.")||this;break;case t.NotSubscribedReason.OptedOut:i=e.call(this,"The user has manually opted out of receiving of notifications. This operation can only be performed after the user is fully resubscribed.")||this}return i.reason=t.NotSubscribedReason[n],Object.setPrototypeOf(i,NotSubscribedError.prototype),i}return r(NotSubscribedError,e),NotSubscribedError}(a.default);t.NotSubscribedError=NotSubscribedError},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var AlreadySubscribedError=function(e){function AlreadySubscribedError(){var t=e.call(this,"This operation can only be performed when the user is not subscribed.")||this;return Object.setPrototypeOf(t,AlreadySubscribedError.prototype),t}return r(AlreadySubscribedError,e),AlreadySubscribedError}(o(n(7)).default);t.default=AlreadySubscribedError},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(5)),o=function(){function e(){}return e.decodeHtmlEntities=function(t){return r.default.isBrowser()&&(e.decodeTextArea||(e.decodeTextArea=document.createElement("textarea"))),e.decodeTextArea?(e.decodeTextArea.innerHTML=t,e.decodeTextArea.value):t},e}();t.BrowserUtils=o,o.decodeTextArea=null,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.emailId=e,this.emailAddress=t,this.emailAuthHash=n}return e.prototype.serialize=function(){return{emailAddress:this.emailAddress,emailAuthHash:this.emailAuthHash,emailId:this.emailId}},e.deserialize=function(t){return new e(t.emailId,t.emailAddress,t.emailAuthHash)},e}();t.EmailProfile=i},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(27)),a=o(n(0)),u=o(n(10)),c=function(){function e(e){this.databaseName=e,this.emitter=new s.default}return e.prototype.open=function(e){var t=this;return new Promise(function(n){try{var i=indexedDB.open(e,1)}catch(e){}if(!i)return null;i.onerror=t.onDatabaseOpenError,i.onblocked=t.onDatabaseOpenBlocked,i.onupgradeneeded=t.onDatabaseUpgradeNeeded,i.onsuccess=function(){t.database=i.result,t.database.onerror=t.onDatabaseError,t.database.onversionchange=t.onDatabaseVersionChange,n(t.database)}})},e.prototype.ensureDatabaseOpen=function(){return i(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return this.openLock||(this.openLock=this.open(this.databaseName)),[4,this.openLock];case 1:return e.sent(),[2,this.database]}})})},e.prototype.onDatabaseOpenError=function(e){e.preventDefault();var t=e.target.error;u.default.contains(t.message,"The operation failed for reasons unrelated to the database itself and not covered by any other error code")||u.default.contains(t.message,"A mutation operation was attempted on a database that did not allow mutations")?a.default.warn("OneSignal: IndexedDb web storage is not available on this origin since this profile's IndexedDb schema has been upgraded in a newer version of Firefox. See: https://bugzilla.mozilla.org/show_bug.cgi?id=1236557#c6"):a.default.warn("OneSignal: Fatal error opening IndexedDb database:",t)},e.prototype.onDatabaseError=function(e){a.default.debug("IndexedDb: Generic database error",e.target.errorCode)},e.prototype.onDatabaseOpenBlocked=function(){a.default.debug("IndexedDb: Blocked event")},e.prototype.onDatabaseVersionChange=function(e){a.default.debug("IndexedDb: versionchange event")},e.prototype.onDatabaseUpgradeNeeded=function(e){a.default.debug("IndexedDb: Database is being rebuilt or upgraded (upgradeneeded event).");var t=e.target.result;t.createObjectStore("Ids",{keyPath:"type"}),t.createObjectStore("NotificationOpened",{keyPath:"url"}),t.createObjectStore("Options",{keyPath:"key"}),"undefined"!=typeof OneSignal&&(OneSignal._isNewVisitor=!0)},e.prototype.get=function(e,t){return i(this,void 0,void 0,function(){var n=this;return r(this,function(i){switch(i.label){case 0:return[4,this.ensureDatabaseOpen()];case 1:return i.sent(),t?[4,new Promise(function(i,r){var o=n.database.transaction(e).objectStore(e).get(t);o.onsuccess=function(){i(o.result)},o.onerror=function(){r(o.error)}})]:[3,3];case 2:return[2,i.sent()];case 3:return[4,new Promise(function(t,i){var r={},o=n.database.transaction(e).objectStore(e).openCursor();o.onsuccess=function(e){var n=e.target.result;if(n){var i=n.key;r[i]=n.value,n.continue()}else t(r)},o.onerror=function(){i(o.error)}})];case 4:return[2,i.sent()]}})})},e.prototype.put=function(e,t){return i(this,void 0,void 0,function(){var n=this;return r(this,function(i){switch(i.label){case 0:return[4,this.ensureDatabaseOpen()];case 1:return i.sent(),[4,new Promise(function(i,r){try{var o=n.database.transaction([e],"readwrite").objectStore(e).put(t);o.onsuccess=function(){i(t)},o.onerror=function(e){a.default.error("Database PUT Transaction Error:",e),r(e)}}catch(e){a.default.error("Database PUT Error:",e),r(e)}})];case 2:return[2,i.sent()]}})})},e.prototype.remove=function(e,t){var n=this;if(t)var i="delete";else i="clear";return new Promise(function(r,o){try{var s=n.database.transaction([e],"readwrite").objectStore(e)[i](t);s.onsuccess=function(){r(t)},s.onerror=function(e){a.default.error("Database REMOVE Transaction Error:",e),o(e)}}catch(e){a.default.error("Database REMOVE Error:",e),o(e)}})},e}();t.default=c},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.PermissionPromptType||(t.PermissionPromptType={}))[i.HttpsPermissionRequest="HTTPS permission request"]="HttpsPermissionRequest",i[i.FullscreenHttpPermissionMessage="fullscreen HTTP permission message"]="FullscreenHttpPermissionMessage",i[i.FullscreenHttpsPermissionMessage="fullscreen HTTPS permission message"]="FullscreenHttpsPermissionMessage",i[i.SlidedownPermissionMessage="slidedown permission message"]="SlidedownPermissionMessage",i[i.SubscriptionBell="subscription bell"]="SubscriptionBell"},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.TestEnvironmentKind||(t.TestEnvironmentKind={})).None="None",i.UnitTesting="Unit Testing"},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.BuildEnvironmentKind||(t.BuildEnvironmentKind={})).Development="Development",i.Staging="Staging",i.Production="Production"},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),o=n(52),s=i(n(51)),a=i(n(48)),u=n(45),c=function(){return function(e){this.appConfig=e,this.subscriptionManager=a.default.getSubscriptionManager(this),this.serviceWorkerManager=a.default.getServiceWorkerManager(this),this.sessionManager=new o.SessionManager,this.permissionManager=new s.default,this.workerMessenger=new r.WorkerMessenger(this),this.updateManager=new u.UpdateManager(this)}}();t.default=c},function(e,t,n){"use strict";(function(e){var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(9)),u=s(n(5)),c=n(18),l=s(n(1)),d=s(n(74)),f=s(n(36)),p=s(n(42)),h=s(n(8)),g=n(47),b=n(15),v=n(30),m=s(n(0)),S=n(41),y=n(6),w=n(10),O=function(){function e(){}return Object.defineProperty(e,"VERSION",{get:function(){return u.default.version()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"environment",{get:function(){return u.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"log",{get:function(){return m.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"database",{get:function(){return h.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"browser",{get:function(){return a.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"workerMessenger",{get:function(){return self.workerMessenger||(self.workerMessenger=new c.WorkerMessenger(null)),self.workerMessenger},enumerable:!0,configurable:!0}),e.run=function(){self.addEventListener("push",e.onPushReceived),self.addEventListener("notificationclose",e.onNotificationClosed),self.addEventListener("notificationclick",function(t){return t.waitUntil(e.onNotificationClicked(t))}),self.addEventListener("install",e.onServiceWorkerInstalled),self.addEventListener("activate",e.onServiceWorkerActivated),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onPushSubscriptionChange(t))}),m.default.debug("Setting up message listeners."),e.workerMessenger.listen(),e.setupMessageListeners()},e.getAppId=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return self.location.search&&(e=self.location.search.match(/appId=([0-9a-z-]+)&?/i))&&e.length>1?[2,e[1]]:[4,h.default.getAppConfig()];case 1:return[2,t.sent().appId]}})})},e.setupMessageListeners=function(){var t=this;e.workerMessenger.on(c.WorkerMessengerCommand.WorkerVersion,function(t){m.default.debug("[Service Worker] Received worker version message."),e.workerMessenger.broadcast(c.WorkerMessengerCommand.WorkerVersion,u.default.version())}),e.workerMessenger.on(c.WorkerMessengerCommand.Subscribe,function(n){return r(t,void 0,void 0,function(){var t,i,r,s;return o(this,function(o){switch(o.label){case 0:return t=n,m.default.debug("[Service Worker] Received subscribe message."),[4,(i=new d.default(t)).subscriptionManager.subscribe(0)];case 1:return r=o.sent(),[4,i.subscriptionManager.registerSubscription(r)];case 2:return s=o.sent(),e.workerMessenger.broadcast(c.WorkerMessengerCommand.Subscribe,s.serialize()),[2]}})})}),e.workerMessenger.on(c.WorkerMessengerCommand.SubscribeNew,function(n){return r(t,void 0,void 0,function(){var t,i,r,s;return o(this,function(o){switch(o.label){case 0:return t=n,m.default.debug("[Service Worker] Received subscribe new message."),[4,(i=new d.default(t)).subscriptionManager.subscribe(1)];case 1:return r=o.sent(),[4,i.subscriptionManager.registerSubscription(r)];case 2:return s=o.sent(),e.workerMessenger.broadcast(c.WorkerMessengerCommand.SubscribeNew,s.serialize()),[2]}})})}),e.workerMessenger.on(c.WorkerMessengerCommand.AmpSubscriptionState,function(n){return r(t,void 0,void 0,function(){var t,n,i,r;return o(this,function(o){switch(o.label){case 0:return m.default.debug("[Service Worker] Received AMP subscription state message."),[4,self.registration.pushManager.getSubscription()];case 1:return(t=o.sent())?[3,2]:(e.workerMessenger.broadcast(c.WorkerMessengerCommand.AmpSubscriptionState,!1),[3,5]);case 2:return[4,self.registration.pushManager.permissionState(t.options)];case 3:return n=o.sent(),[4,h.default.getSubscription()];case 4:i=o.sent().optedOut,r=!!t&&"granted"===n&&!0!==i,e.workerMessenger.broadcast(c.WorkerMessengerCommand.AmpSubscriptionState,r),o.label=5;case 5:return[2]}})})}),e.workerMessenger.on(c.WorkerMessengerCommand.AmpSubscribe,function(){return r(t,void 0,void 0,function(){var t,n,i,r,s;return o(this,function(o){switch(o.label){case 0:return m.default.debug("[Service Worker] Received AMP subscribe message."),[4,e.getAppId()];case 1:return t=o.sent(),[4,S.ConfigHelper.getAppConfig({appId:t},p.default.downloadServerAppConfig)];case 2:return n=o.sent(),[4,(i=new d.default(n)).subscriptionManager.subscribe(0)];case 3:return r=o.sent(),[4,i.subscriptionManager.registerSubscription(r)];case 4:return s=o.sent(),e.workerMessenger.broadcast(c.WorkerMessengerCommand.AmpSubscribe,s.deviceId),[2]}})})}),e.workerMessenger.on(c.WorkerMessengerCommand.AmpUnsubscribe,function(){return r(t,void 0,void 0,function(){var t,n;return o(this,function(i){switch(i.label){case 0:return m.default.debug("[Service Worker] Received AMP unsubscribe message."),[4,e.getAppId()];case 1:return t=i.sent(),[4,S.ConfigHelper.getAppConfig({appId:t},p.default.downloadServerAppConfig)];case 2:return n=i.sent(),[4,new d.default(n).subscriptionManager.unsubscribe(1)];case 3:return i.sent(),e.workerMessenger.broadcast(c.WorkerMessengerCommand.AmpUnsubscribe,null),[2]}})})})},e.onPushReceived=function(t){m.default.debug("Called %conPushReceived("+JSON.stringify(t,null,4)+"):",w.Utils.getConsoleStyle("code"),t),t.waitUntil(e.parseOrFetchNotifications(t).then(function(t){if(!t||0==t.length)return m.default.debug("Because no notifications were retrieved, we'll display the last known notification, so long as it isn't the welcome notification."),e.displayBackupNotification();for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i];m.default.debug("Raw Notification from OneSignal:",o);var s=e.buildStructuredNotificationObject(o);n.push(function(t){return e.displayNotification(t).then(function(){return e.updateBackupNotification(t).catch(function(e){return m.default.error(e)})}).then(function(){return e.workerMessenger.broadcast(c.WorkerMessengerCommand.NotificationDisplayed,t).catch(function(e){return m.default.error(e)})}).then(function(){return e.executeWebhooks("notification.displayed",t).catch(function(e){return m.default.error(e)})})}.bind(null,s))}return n.reduce(function(e,t){return e.then(t)},Promise.resolve())}).catch(function(t){return m.default.debug("Failed to display a notification:",t),e.UNSUBSCRIBED_FROM_NOTIFICATIONS?void m.default.debug("Because we have just unsubscribed from notifications, we will not show anything."):(m.default.debug("Because a notification failed to display, we'll display the last known notification, so long as it isn't the welcome notification."),e.displayBackupNotification())}))},e.executeWebhooks=function(e,t){return r(this,void 0,void 0,function(){var n,i,r,s,a;return o(this,function(o){switch(o.label){case 0:return[4,h.default.getSubscription()];case 1:return n=o.sent().deviceId,[4,h.default.get("Options","webhooks.cors")];case 2:return i=o.sent(),[4,h.default.get("Options","webhooks."+e)];case 3:return(r=o.sent())?(s={event:e,id:t.id,userId:n,action:t.action,buttons:t.buttons,heading:t.heading,content:t.content,url:t.url,icon:t.icon,data:t.data},a={method:"post",mode:"no-cors",body:JSON.stringify(s)},i&&(a.mode="cors",a.headers={"X-OneSignal-Event":e,"Content-Type":"application/json"}),m.default.debug("Executing "+e+" webhook "+(i?"with":"without")+" CORS %cPOST "+r,w.Utils.getConsoleStyle("code"),":",s),[4,fetch(r,a)]):[3,5];case 4:return[2,o.sent()];case 5:return[2]}})})},e.getActiveClients=function(){return r(this,void 0,void 0,function(){var e,t,n,i,r;return o(this,function(o){switch(o.label){case 0:return[4,self.clients.matchAll({type:"window",includeUncontrolled:!0})];case 1:for(e=o.sent(),t=[],n=0,i=e;n<i.length;n++){if((r=i[n]).frameType&&"nested"===r.frameType){if(!w.Utils.contains(r.url,l.default.getOneSignalApiUrl().host)&&!w.Utils.contains(r.url,".os.tc"))continue;r.isSubdomainIframe=!0}t.push(r)}return[2,t]}})})},e.buildStructuredNotificationObject=function(e){var t={id:e.custom.i,heading:e.title,content:e.alert,data:e.custom.a,url:e.custom.u,icon:e.icon,image:e.image,tag:e.tag,badge:e.badge,vibrate:e.vibrate};if(e.o){t.buttons=[];for(var n=0,i=e.o;n<i.length;n++){var r=i[n];t.buttons.push({action:r.i,title:r.n,icon:r.p,url:r.u})}}return w.Utils.trimUndefined(t)},e.ensureImageResourceHttps=function(e){if(!e)return null;try{var t=new URL(e);return"localhost"===t.hostname||-1!==t.hostname.indexOf("192.168")||"127.0.0.1"===t.hostname||"https:"===t.protocol?e:"i0.wp.com"===t.hostname||"i1.wp.com"===t.hostname||"i2.wp.com"===t.hostname||"i3.wp.com"===t.hostname?"https://"+t.hostname+t.pathname:"https://i0.wp.com/"+(t.host+t.pathname)}catch(e){}},e.ensureNotificationResourcesHttps=function(t){if(t&&(t.icon&&(t.icon=e.ensureImageResourceHttps(t.icon)),t.image&&(t.image=e.ensureImageResourceHttps(t.image)),t.buttons&&t.buttons.length>0))for(var n=0,i=t.buttons;n<i.length;n++){var r=i[n];r.icon&&(r.icon=e.ensureImageResourceHttps(r.icon))}},e.displayNotification=function(t,n){return r(this,void 0,void 0,function(){var r,s,a,u,c,l;return o(this,function(o){switch(o.label){case 0:return m.default.debug("Called %cdisplayNotification("+JSON.stringify(t,null,4)+"):",w.Utils.getConsoleStyle("code"),t),[4,e._getTitle()];case 1:return r=o.sent(),[4,h.default.get("Options","defaultIcon")];case 2:return s=o.sent(),[4,h.default.get("Options","persistNotification")];case 3:return a=o.sent(),[4,e.getAppId()];case 4:return u=o.sent(),t.heading=t.heading?t.heading:r,t.icon=t.icon?t.icon:s||void 0,(c={}).tag=t.tag||u,c.persistNotification="force"===a||a,n||(n={}),t=i({},t,n),e.ensureNotificationResourcesHttps(t),l={body:t.content,icon:t.icon,image:t.image,data:t,actions:t.buttons,tag:c.tag,requireInteraction:c.persistNotification,renotify:!0,badge:t.badge,vibrate:t.vibrate},l=e.filterNotificationOptions(l,"force"===a),[2,self.registration.showNotification(t.heading,l)]}})})},e.filterNotificationOptions=function(e,t){if("object"!=typeof e)return e;var n=i({},e);if(""===a.default.name&&""===a.default.version)var r=a.default._detect(navigator.userAgent);else r=a.default;return r.chrome&&r.mac&&n&&(n.requireInteraction=!1),t&&(n.requireInteraction=!0),n},e.updateBackupNotification=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return e.data&&e.data.__isOneSignalWelcomeNotification?[2]:[4,h.default.put("Ids",{type:"backupNotification",id:e})];case 1:return t.sent(),[2]}})})},e.displayBackupNotification=function(){return h.default.get("Ids","backupNotification").then(function(t){var n={persistNotification:!1,data:{__isOneSignalBackupNotification:!0}};return t?e.displayNotification(t,n):e.displayNotification({content:"You have new updates."},n)})},e.shouldOpenNotificationUrl=function(e){return"javascript:void(0);"!==e&&"do_not_open"!==e&&!w.Utils.contains(e,"_osp=do_not_open")},e.onNotificationClosed=function(t){m.default.debug("Called %conNotificationClosed("+JSON.stringify(t,null,4)+"):",w.Utils.getConsoleStyle("code"),t);var n=t.notification.data;e.workerMessenger.broadcast(c.WorkerMessengerCommand.NotificationDismissed,n).catch(function(e){return m.default.error(e)}),t.waitUntil(e.executeWebhooks("notification.dismissed",n))},e.getNotificationUrlToOpen=function(e){return r(this,void 0,void 0,function(){var t,n,i,r,s;return o(this,function(o){switch(o.label){case 0:return t=self.registration.scope,[4,h.default.getAppState()];case 1:if((n=o.sent().defaultNotificationUrl)&&(t=n),e.action)for(i=0,r=e.buttons;i<r.length;i++)(s=r[i]).action===e.action&&s.url&&""!==s.url&&(t=s.url);else e.url&&""!==e.url&&(t=e.url);return[2,t]}})})},e.onNotificationClicked=function(t){return r(this,void 0,void 0,function(){var n,i,r,s,a,u,l,d,f,p,g,b,v,S,y,O,_,P,E,I,C,k,M;return o(this,function(o){switch(o.label){case 0:return m.default.debug("Called %conNotificationClicked("+JSON.stringify(t,null,4)+"):",w.Utils.getConsoleStyle("code"),t),t.notification.close(),n=t.notification.data,t.action&&(n.action=t.action),i="exact",r="navigate",[4,h.default.get("Options","notificationClickHandlerMatch")];case 1:return(s=o.sent())&&(i=s),[4,this.database.get("Options","notificationClickHandlerAction")];case 2:return(a=o.sent())&&(r=a),[4,e.getActiveClients()];case 3:return u=o.sent(),[4,e.getNotificationUrlToOpen(n)];case 4:return l=o.sent(),d=e.shouldOpenNotificationUrl(l),[4,h.default.getAppConfig()];case 5:return f=o.sent().appId,[4,h.default.getSubscription()];case 6:p=o.sent().deviceId,g=e.sendConvertedAPIRequests(f,p,n),b=!1,v=0,S=u,o.label=7;case 7:return v<S.length?(y=S[v],O=y.url,y.isSubdomainIframe?[4,h.default.get("Options","lastKnownHostUrl")]:[3,10]):[3,39];case 8:return _=o.sent(),O=_,_?[3,10]:[4,h.default.get("Options","defaultUrl")];case 9:O=o.sent(),o.label=10;case 10:P="";try{P=new URL(O).origin}catch(e){m.default.error("Failed to get the HTTP site's actual origin:",e)}E=null;try{E=new URL(l).origin}catch(e){}if(!("exact"===i&&O===l||"origin"===i&&P===E))return[3,38];if(!(y.isSubdomainIframe&&O===l||!y.isSubdomainIframe&&y.url===l||"focus"===r&&P===E))return[3,15];e.workerMessenger.unicast(c.WorkerMessengerCommand.NotificationClicked,n,y),o.label=11;case 11:return o.trys.push([11,13,,14]),[4,y.focus()];case 12:return o.sent(),[3,14];case 13:return I=o.sent(),m.default.error("Failed to focus:",y,I),[3,14];case 14:return[3,37];case 15:if(!y.isSubdomainIframe)return[3,23];o.label=16;case 16:return o.trys.push([16,18,,19]),m.default.debug("Client is subdomain iFrame. Attempting to focus() client."),[4,y.focus()];case 17:return o.sent(),[3,19];case 18:return C=o.sent(),m.default.error("Failed to focus:",y,C),[3,19];case 19:return d?(m.default.debug("Redirecting HTTP site to "+l+"."),[4,h.default.put("NotificationOpened",{url:l,data:n,timestamp:Date.now()})]):[3,21];case 20:return o.sent(),e.workerMessenger.unicast(c.WorkerMessengerCommand.RedirectPage,l,y),[3,22];case 21:m.default.debug("Not navigating because link is special."),o.label=22;case 22:return[3,37];case 23:if(!y.navigate)return[3,34];o.label=24;case 24:return o.trys.push([24,26,,27]),m.default.debug("Client is standard HTTPS site. Attempting to focus() client."),[4,y.focus()];case 25:return o.sent(),[3,27];case 26:return k=o.sent(),m.default.error("Failed to focus:",y,k),[3,27];case 27:return o.trys.push([27,32,,33]),d?(m.default.debug("Redirecting HTTPS site to ("+l+")."),[4,h.default.put("NotificationOpened",{url:l,data:n,timestamp:Date.now()})]):[3,30];case 28:return o.sent(),[4,y.navigate(l)];case 29:return o.sent(),[3,31];case 30:m.default.debug("Not navigating because link is special."),o.label=31;case 31:return[3,33];case 32:return M=o.sent(),m.default.error("Failed to navigate:",y,l,M),[3,33];case 33:return[3,37];case 34:return[4,h.default.put("NotificationOpened",{url:l,data:n,timestamp:Date.now()})];case 35:return o.sent(),[4,e.openUrl(l)];case 36:o.sent(),o.label=37;case 37:return b=!0,[3,39];case 38:return v++,[3,7];case 39:return!d||b?[3,42]:[4,h.default.put("NotificationOpened",{url:l,data:n,timestamp:Date.now()})];case 40:return o.sent(),[4,e.openUrl(l)];case 41:o.sent(),o.label=42;case 42:return[4,g];case 43:return[2,o.sent()]}})})},e.sendConvertedAPIRequests=function(t,n,i){return r(this,void 0,void 0,function(){var r;return o(this,function(o){switch(o.label){case 0:return i.id?(t?r=f.default.put("notifications/"+i.id,{app_id:t,player_id:n,opened:!0}):console.error("No app Id, skipping OneSignal API call for notification open!"),[4,e.executeWebhooks("notification.clicked",i)]):(console.error("No notification id, skipping networks calls to report open!"),[2]);case 1:return o.sent(),r?[4,r]:[3,3];case 2:o.sent(),o.label=3;case 3:return[2]}})})},e.openUrl=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:m.default.debug("Opening notification URL:",e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,self.clients.openWindow(e)];case 2:return[2,n.sent()];case 3:return t=n.sent(),m.default.warn("Failed to open the URL '"+e+"':",t),[2,void 0];case 4:return[2]}})})},e.onServiceWorkerInstalled=function(e){e.waitUntil(self.skipWaiting())},e.onServiceWorkerActivated=function(e){m.default.info("%cOneSignal Service Worker activated (version "+u.default.version()+", "+l.default.getWindowEnv().toString()+" environment).",w.Utils.getConsoleStyle("bold")),e.waitUntil(self.clients.claim())},e.onPushSubscriptionChange=function(t){return r(this,void 0,void 0,function(){var n,i,r,s,a,u,c,l,f;return o(this,function(o){switch(o.label){case 0:return m.default.debug("Called %conPushSubscriptionChange("+JSON.stringify(t,null,4)+"):",w.Utils.getConsoleStyle("code"),t),[4,e.getAppId()];case 1:return(n=o.sent())?[4,S.ConfigHelper.getAppConfig({appId:n},p.default.downloadServerAppConfig)]:[2];case 2:return(i=o.sent())?(r=new d.default(i),[4,h.default.getSubscription()]):[2];case 3:return a=o.sent().deviceId,(s=!!a)||!t.oldSubscription?[3,7]:[4,p.default.getUserIdFromSubscriptionIdentifier(n,v.PushDeviceRecord.prototype.getDeliveryPlatform(),t.oldSubscription.endpoint)];case 4:return a=o.sent(),[4,h.default.getSubscription()];case 5:return(u=o.sent()).deviceId=a,[4,h.default.setSubscription(u)];case 6:o.sent(),o.label=7;case 7:return s=!!a,(l=t.newSubscription)?(c=g.RawPushSubscription.setFromW3cSubscription(l),[3,11]):[3,8];case 8:return o.trys.push([8,10,,11]),[4,r.subscriptionManager.subscribe(1)];case 9:return c=o.sent(),[3,11];case 10:return o.sent(),[3,11];case 11:return s||!!c?[3,14]:[4,h.default.remove("Ids","userId")];case 12:return o.sent(),[4,h.default.remove("Ids","registrationId")];case 13:return o.sent(),[3,17];case 14:return f=null,[4,navigator.permissions.query({name:"push",userVisibleOnly:!0})];case 15:return"granted"!==o.sent()?f=b.SubscriptionStateKind.PermissionRevoked:c||(f=b.SubscriptionStateKind.PushSubscriptionRevoked),[4,r.subscriptionManager.registerSubscription(c,f)];case 16:o.sent(),o.label=17;case 17:return[2]}})})},e._getTitle=function(){return new Promise(function(e){Promise.all([h.default.get("Options","defaultTitle"),h.default.get("Options","pageTitle")]).then(function(t){var n=t[0],i=t[1];e(null!==n?n:null!=i?i:"")})})},e.parseOrFetchNotifications=function(t){return t.data?e.isValidPushPayload(t.data)?(m.default.debug("Received a valid encrypted push payload."),Promise.resolve([t.data.json()])):Promise.reject("Unexpected push message payload received: "+t.data.text()):e.retrieveNotifications()},e.isValidPushPayload=function(e){try{var t=e.json();return!!(t&&t.custom&&t.custom.i&&y.OneSignalUtils.isValidUuid(t.custom.i))||(m.default.debug("isValidPushPayload: Valid JSON but missing notification UUID:",t),!1)}catch(e){return m.default.debug("isValidPushPayload: Parsing to JSON failed with:",e),!1}},e.retrieveNotifications=function(){return new Promise(function(t){var n=[];h.default.get("Ids","userId").then(function(t){return t?(m.default.debug("Legacy push signal received, retrieving contents from players/"+t+"/chromeweb_notification"),f.default.get("players/"+t+"/chromeweb_notification")):(m.default.debug("Tried to get notification contents, but IndexedDB is missing user ID info."),Promise.all([e.getAppId(),self.registration.pushManager.getSubscription().then(function(e){return e.endpoint})]).then(function(e){var t=e[0],n=e[1],i=v.PushDeviceRecord.prototype.getDeliveryPlatform();return p.default.getUserIdFromSubscriptionIdentifier(t,i,n).then(function(e){return e?(m.default.debug("Recovered OneSignal user ID:",e),Promise.all([h.default.put("Ids",{type:"userId",id:e}),h.default.put("Ids",{type:"registrationId",id:n.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"")})]).then(function(){return m.default.debug("Attempting to retrieve the notification again now with a recovered user ID."),f.default.get("players/"+e+"/chromeweb_notification")})):Promise.reject("Recovered user ID was null. Unsubscribing from push notifications.")})}).catch(function(t){return m.default.debug("Unsuccessfully attempted to recover OneSignal user ID:",t),self.registration.pushManager.getSubscription().then(function(e){return e.unsubscribe()}).then(function(t){m.default.debug("Unsubscribed from push notifications result:",t),e.UNSUBSCRIBED_FROM_NOTIFICATIONS=!0})}))}).then(function(e){for(var i=0;i<e.length;i++)n.push(JSON.parse(e[i]));0==n.length&&m.default.warn("OneSignal Worker: Received a GCM push signal, but there were no messages to retrieve. Are you using the wrong API URL?",l.default.getOneSignalApiUrl().toString()),t(n)})})},e}();t.ServiceWorker=O,"undefined"==typeof self&&void 0!==e?e.OneSignalWorker=O:self.OneSignalWorker=O,"undefined"!=typeof self&&O.run()}).call(this,n(70))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,a=o(n(7)),u=n(50);(s=t.DeprecatedApiReason||(t.DeprecatedApiReason={}))[s.HttpPermissionRequest=0]="HttpPermissionRequest",s[s.SyncHashedEmail=1]="SyncHashedEmail";var c=function(e){function n(i){var r=this;switch(i){case t.DeprecatedApiReason.HttpPermissionRequest:(r=e.call(this,"The HTTP permission request has been deprecated. Please remove any custom popups from your code.")||this).reportUsage(u.ApiUsageMetricKind.HttpPermissionRequest);break;case t.DeprecatedApiReason.SyncHashedEmail:(r=e.call(this,"API syncHashedEmail() has been deprecated and will be removed in a future SDK release. Please remove any usages from your code.")||this).reportUsage(u.ApiUsageMetricKind.SyncHashedEmail)}return Object.setPrototypeOf(r,n.prototype),r}return r(n,e),n.prototype.reportUsage=function(e){"undefined"!=typeof OneSignal&&OneSignal.context&&OneSignal.context.metricsManager&&OneSignal.context.metricsManager.reportEvent(new u.ApiUsageMetricEvent(e))},n}(a.default);t.DeprecatedApiError=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.isValidUrl=function(e,t){if(t&&t.allowNull&&null===e)return!0;if(t&&t.allowEmpty&&(null===e||void 0===e))return!0;try{var n=new URL(e);return!t||!t.requireHttps||"https:"===n.protocol}catch(e){return!1}},e.isValidBoolean=function(e,t){return!(!t||!t.allowNull||null!==e)||(!0===e||!1===e)},e.isValidArray=function(e,t){return!(!t||!t.allowNull||null!==e)||(!(!t||!t.allowEmpty||null!==e&&void 0!==e)||e instanceof Array)},e}();t.ValidatorUtils=i},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(9)),a=o(n(2)),u=o(n(12)),c=n(4),l=function(){function e(e){e||(e=u.default.getSlidedownPermissionMessageOptions()),this.options=e,this.options.actionMessage=e.actionMessage.substring(0,90),this.options.acceptButtonText=e.acceptButtonText.substring(0,15),this.options.cancelButtonText=e.cancelButtonText.substring(0,15),this.notificationIcons=null}return Object.defineProperty(e,"EVENTS",{get:function(){return{ALLOW_CLICK:"popoverAllowClick",CANCEL_CLICK:"popoverCancelClick",SHOWN:"popoverShown",CLOSED:"popoverClosed"}},enumerable:!0,configurable:!0}),e.prototype.create=function(){return i(this,void 0,void 0,function(){var t,n,i;return r(this,function(r){switch(r.label){case 0:return null!==this.notificationIcons?[3,2]:[4,u.default.getNotificationIcons()];case 1:t=r.sent(),this.notificationIcons=t,this.container&&c.removeDomElement("#onesignal-popover-container"),n=this.getPlatformNotificationIcon(),i='<div id="normal-popover"><div class="popover-body"><div class="popover-body-icon"><img alt="notification icon" class="'+("default-icon"===n?"default-icon":"")+'" src="'+("default-icon"===n?"data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%2239.5%22%20height%3D%2240.5%22%20viewBox%3D%220%200%2079%2081%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ctitle%3EOneSignal-Bell%3C%2Ftitle%3E%3Cg%20fill%3D%22%23BBB%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M39.96%2067.12H4.12s-3.2-.32-3.2-3.36%202.72-3.2%202.72-3.2%2010.72-5.12%2010.72-8.8c0-3.68-1.76-6.24-1.76-21.28%200-15.04%209.6-26.56%2021.12-26.56%200%200%201.6-3.84%206.24-3.84%204.48%200%206.08%203.84%206.08%203.84%2011.52%200%2021.12%2011.52%2021.12%2026.56s-1.6%2017.6-1.6%2021.28c0%203.68%2010.72%208.8%2010.72%208.8s2.72.16%202.72%203.2c0%202.88-3.36%203.36-3.36%203.36H39.96zM27%2070.8h24s-1.655%2010.08-11.917%2010.08S27%2070.8%2027%2070.8z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E":n)+'"></div><div class="popover-body-message">'+this.options.actionMessage+'</div><div class="clearfix"></div></div><div class="popover-footer"><button id="onesignal-popover-allow-button" class="align-right primary popover-button">'+this.options.acceptButtonText+'</button><button id="onesignal-popover-cancel-button" class="align-right secondary popover-button">'+this.options.cancelButtonText+'</button><div class="clearfix"></div></div></div>',c.addDomElement("body","beforeend",'<div id="onesignal-popover-container" class="onesignal-popover-container onesignal-reset"></div>'),c.addDomElement(this.container,"beforeend",'<div id="onesignal-popover-dialog" class="onesignal-popover-dialog">'+i+"</div>"),c.addCssClass(this.container,s.default.mobile?"slide-up":"slide-down"),this.allowButton.addEventListener("click",this.onPopoverAllowed.bind(this)),this.cancelButton.addEventListener("click",this.onPopoverCanceled.bind(this)),a.default.trigger(e.EVENTS.SHOWN),r.label=2;case 2:return[2]}})})},e.prototype.onPopoverAllowed=function(t){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,a.default.trigger(e.EVENTS.ALLOW_CLICK)];case 1:return t.sent(),[2]}})})},e.prototype.onPopoverCanceled=function(t){a.default.trigger(e.EVENTS.CANCEL_CLICK),this.close()},e.prototype.close=function(){var t=this;c.addCssClass(this.container,"close-popover"),c.once(this.dialog,"animationend",function(n,i){n.target!==t.dialog||"slideDownExit"!==n.animationName&&"slideUpExit"!==n.animationName||(c.removeDomElement("#onesignal-popover-container"),i(),a.default.trigger(e.EVENTS.CLOSED))},!0)},e.prototype.getPlatformNotificationIcon=function(){return this.notificationIcons?c.isChromeLikeBrowser()||s.default.firefox||s.default.msedge?this.notificationIcons.chrome?this.notificationIcons.chrome:this.notificationIcons.firefox?this.notificationIcons.firefox:"default-icon":s.default.safari?this.notificationIcons.safari?this.notificationIcons.safari:this.notificationIcons.chrome?this.notificationIcons.chrome:"default-icon":void 0:"default-icon"},Object.defineProperty(e.prototype,"container",{get:function(){return document.querySelector("#onesignal-popover-container")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialog",{get:function(){return document.querySelector("#onesignal-popover-dialog")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowButton",{get:function(){return document.querySelector("#onesignal-popover-allow-button")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelButton",{get:function(){return document.querySelector("#onesignal-popover-cancel-button")},enumerable:!0,configurable:!0}),e}();t.default=l},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(5)),a=o(n(2)),u=o(n(14)),c=n(4),l=o(n(0)),d=function(){function e(e){this.url=e,this.url.pathname="webPushIframe"}return Object.defineProperty(e,"LOAD_TIMEOUT_MS",{get:function(){return 15e3},enumerable:!0,configurable:!0}),e.prototype.load=function(){return i(this,void 0,void 0,function(){var t,n=this;return r(this,function(i){return l.default.debug("Opening an iFrame to",this.url.toString()),this.removeFrame(),(t=document.createElement("iframe")).style.display="none",t.src=this.url.toString(),t.sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation",this.loadPromise={},this.loadPromise.promise=new Promise(function(e,t){n.loadPromise.resolver=e,n.loadPromise.rejector=t}),document.body.appendChild(t),t.onload=this.onFrameLoad.bind(this),this.element=t,c.timeoutPromise(this.loadPromise.promise,e.LOAD_TIMEOUT_MS).catch(function(){window===window.top&&l.default.warn("OneSignal: Loading the required iFrame "+n.url.toString()+" timed out. Check that the Site URL onesignal.com dashboard web config is "+location.origin+". Only the Site URL specified there is allowed to use load the iFrame.")}),[2,this.loadPromise.promise]})})},e.prototype.removeFrame=function(){if(s.default.isBrowser()){var e=document.querySelector("iframe[src='"+this.url.toString()+"']");e&&e.remove()}},e.prototype.onFrameLoad=function(e){this.establishCrossOriginMessaging()},e.prototype.establishCrossOriginMessaging=function(){this.messenger&&this.messenger.destroy(),this.messenger=new u.default(this.element.contentWindow,this.url.toString(),this.url.toString()),this.messenger.on(OneSignal.POSTMAM_COMMANDS.CONNECTED,this.onMessengerConnect.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,this.onRemoteRetriggerEvent.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED,this.onRemoteNotificationPermissionChanged.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REQUEST_HOST_URL,this.onRequestHostUrl.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.SERVICEWORKER_COMMAND_REDIRECT,this.onServiceWorkerCommandRedirect.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.GET_EVENT_LISTENER_COUNT,this.onGetEventListenerCount.bind(this)),this.messenger.connect()},e.prototype.dispose=function(){this.messenger&&this.messenger.destroy(),this.removeFrame()},e.prototype.onMessengerConnect=function(e){return i(this,void 0,void 0,function(){var e=this;return r(this,function(t){return l.default.debug("Successfully established cross-origin communication for iFrame at "+this.url.toString()),this.messenger.message(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE,{hostInitOptions:JSON.parse(JSON.stringify(OneSignal.config)),pageUrl:window.location.href,pageTitle:document.title},function(t){return t.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE&&e.loadPromise.resolver(),!1}),[2]})})},e.prototype.onRemoteRetriggerEvent=function(e){var t=e.data,n=t.eventName,i=t.eventData;return a.default.trigger(n,i,e.source),!1},e.prototype.onRemoteNotificationPermissionChanged=function(e){var t=e.data.forceUpdatePermission;return c.triggerNotificationPermissionChanged(t),!1},e.prototype.onRequestHostUrl=function(e){return e.reply(location.href),!1},e.prototype.onServiceWorkerCommandRedirect=function(e){var t=e.data;return t&&t.startsWith("http")&&(window.location.href=t),!1},e.prototype.onGetEventListenerCount=function(e){var t=e.data;return l.default.debug("(Reposted from iFrame -> Host) Getting event listener count for ",t),e.reply(OneSignal.emitter.numberOfListeners(t)),!1},e.prototype.isSubscribed=function(){var e=this;return new Promise(function(t){e.messenger.message(OneSignal.POSTMAM_COMMANDS.IS_SUBSCRIBED,null,function(e){t(e.data)})})},e.prototype.unsubscribeFromPush=function(){var e=this;return new Promise(function(t){e.messenger.message(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_PROXY_FRAME,null,function(e){t()})})},e.prototype.getProxyServiceWorkerActiveState=function(){var e=this;return new Promise(function(t,n){e.message(OneSignal.POSTMAM_COMMANDS.SERVICE_WORKER_STATE,null,function(e){t(e.data)})})},e.prototype.runCommand=function(e){return i(this,void 0,void 0,function(){var t=this;return r(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,i){t.message(e,null,function(e){n(e.data)})})];case 1:return[2,n.sent()]}})})},e.prototype.message=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.messenger.message.apply(this.messenger,arguments)},e}();t.default=d},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(73),a=o(n(79)),u=n(4),c=o(n(1)),l=function(){function e(){}return e.discoverAltOrigin=function(t){return i(this,void 0,void 0,function(){var n,i,o,s,c,l,d,f,p,h;return r(this,function(r){switch(r.label){case 0:n=e.getOneSignalProxyIframeUrls(t),i=[],s=0,c=n,r.label=1;case 1:return s<c.length?(l=c[s],[4,(h=new a.default(l)).load()]):[3,4];case 2:r.sent(),i.push(h),r.label=3;case 3:return s++,[3,1];case 4:return[4,e.removeDuplicatedAltOriginSubscription(i)];case 5:return(d=r.sent())?(o=d[0],[3,10]):[3,6];case 6:f=0,p=i,r.label=7;case 7:return f<p.length?[4,(h=p[f]).isSubscribed()]:[3,10];case 8:if(r.sent())o=h;else{if(!u.contains(h.url.host,".os.tc"))return h.dispose(),[3,9];o?h.dispose():o=h}r.label=9;case 9:return f++,[3,7];case 10:return[2,o]}})})},e.removeDuplicatedAltOriginSubscription=function(e){return i(this,void 0,void 0,function(){var t,n,i,o,a,l,d;return r(this,function(r){switch(r.label){case 0:t=[],n=0,i=e,r.label=1;case 1:return n<i.length?[4,(o=i[n]).isSubscribed()]:[3,4];case 2:r.sent()&&t.push(o),r.label=3;case 3:return n++,[3,1];case 4:return t.length<2?[2,null]:(c.default.getBuildEnv()==s.BuildEnvironmentKind.Development?a=".localhost:3001":c.default.getBuildEnv()==s.BuildEnvironmentKind.Production&&(a=".onesignal.com"),(l=t.find(function(e){return u.contains(e.url.host,a)}))?[3,5]:[2,null]);case 5:return[4,l.unsubscribeFromPush()];case 6:return r.sent(),l.dispose(),d=e.indexOf(l),e.splice(d,1),[2,e]}})})},e.getCanonicalSubscriptionUrls=function(e,t){void 0===t&&(t=c.default.getBuildEnv());var n=[];if(e.httpUseOneSignalCom){var i=c.default.getOneSignalApiUrl(t);i.host=[e.subdomain,i.host].join("."),n.push(i)}var r=c.default.getOneSignalApiUrl(t);r.host=[e.subdomain,"os.tc"].join("."),n.push(r);for(var o=0,s=n;o<s.length;o++){s[o].pathname=""}return n},e.getOneSignalProxyIframeUrls=function(t){for(var n=e.getCanonicalSubscriptionUrls(t),i=0,r=n;i<r.length;i++){r[i].pathname="webPushIframe"}return n},e.getOneSignalSubscriptionPopupUrls=function(t){for(var n=e.getCanonicalSubscriptionUrls(t),i=0,r=n;i<r.length;i++){r[i].pathname="subscribe"}return n},e}();t.default=l},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(1)),a=o(n(14)),u=o(n(31)),c=o(n(0)),l=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.establishCrossOriginMessaging=function(){this.messenger=new a.default(window.opener,this.options.origin,this.options.origin),this.messenger.once(OneSignal.POSTMAM_COMMANDS.CONNECTED,this.onMessengerConnected.bind(this)),this.messenger.postMessage(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS,null),this.messenger.listen()},t.prototype.onMessengerConnected=function(e){c.default.debug("("+s.default.getWindowEnv().toString()+") The host page is now ready to receive commands from the HTTP popup."),this.finishInitialization()},t}(u.default);t.default=l},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(14)),a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.establishCrossOriginMessaging=function(){this.messenger&&this.messenger.destroy(),this.messenger=new s.default(window.parent,this.options.origin,this.options.origin)},t}(o(n(31)).default);t.default=a},function(e,t,n){"use strict";var i,r,o;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.ConfigIntegrationKind||(t.ConfigIntegrationKind={})).TypicalSite="typical",i.WordPress="wordpress",i.Shopify="shopify",i.Blogger="blogger",i.Magento="magento",i.Drupal="drupal",i.SquareSpace="squarespace",i.Joomla="joomla",i.Weebly="weebly",i.Wix="wix",i.Custom="custom",(r=t.NotificationClickMatchBehavior||(t.NotificationClickMatchBehavior={})).Exact="exact",r.Origin="origin",(o=t.NotificationClickActionBehavior||(t.NotificationClickActionBehavior={})).Navigate="navigate",o.Focus="focus"},function(e,t){e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={});t||(t={});var o,s,a=t.prefix||"__jp",u=t.name||a+n++,c=t.param||"callback",l=null!=t.timeout?t.timeout:6e4,d=encodeURIComponent,f=document.getElementsByTagName("script")[0]||document.head;l&&(s=setTimeout(function(){p(),r&&r(new Error("Timeout"))},l));function p(){o.parentNode&&o.parentNode.removeChild(o),window[u]=i,s&&clearTimeout(s)}return window[u]=function(e){p(),r&&r(null,e)},e=(e+=(~e.indexOf("?")?"&":"?")+c+"="+d(u)).replace("?&","?"),(o=document.createElement("script")).src=e,f.parentNode.insertBefore(o,f),function(){window[u]&&p()}};var n=0;function i(){}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(9)),a=o(n(8)),u=o(n(20)),c=n(32),l=o(n(5)),d=o(n(2)),f=o(n(0)),p=n(28),h=o(n(1)),g=n(16),b=n(47),v=n(15),m=n(3),S=n(30),y=n(29),w=n(11),O=o(n(13)),_=n(13),P=n(25),E=o(n(46)),I=n(46),C=o(n(55)),k=o(n(19)),M=n(26),A=n(49),T=function(){function e(e,t){this.context=e,this.config=t}return e.isSafari=function(){return l.default.isSafari()},e.prototype.subscribe=function(t){return i(this,void 0,void 0,function(){var n,i;return r(this,function(r){switch(r.label){case 0:switch(n=h.default.getWindowEnv()){case m.WindowEnvironmentKind.CustomIframe:case m.WindowEnvironmentKind.Unknown:case m.WindowEnvironmentKind.OneSignalProxyFrame:throw new w.InvalidStateError(w.InvalidStateReason.UnsupportedEnvironment)}switch(n){case m.WindowEnvironmentKind.ServiceWorker:return[3,1];case m.WindowEnvironmentKind.Host:case m.WindowEnvironmentKind.OneSignalSubscriptionModal:case m.WindowEnvironmentKind.OneSignalSubscriptionPopup:return[3,3]}return[3,9];case 1:return[4,this.subscribeFcmFromWorker(t)];case 2:return i=r.sent(),[3,10];case 3:return[4,OneSignal.privateGetNotificationPermission()];case 4:if(r.sent()===g.NotificationPermission.Denied)throw new O.default(_.PushPermissionNotGrantedErrorReason.Blocked);return e.isSafari()?[4,this.subscribeSafari()]:[3,6];case 5:return i=r.sent(),[3,8];case 6:return[4,this.subscribeFcmFromPage(t)];case 7:i=r.sent(),r.label=8;case 8:return[3,10];case 9:throw new w.InvalidStateError(w.InvalidStateReason.UnsupportedEnvironment);case 10:return[2,i]}})})},e.prototype.registerSubscription=function(t,n){return i(this,void 0,void 0,function(){var i,o,s;return r(this,function(r){switch(r.label){case 0:return t&&(t=b.RawPushSubscription.deserialize(t)),i=S.PushDeviceRecord.createFromPushSubscription(this.config.appId,t,n),o=void 0,[4,this.isAlreadyRegisteredWithOneSignal()];case 1:return r.sent()?[4,this.context.updateManager.sendPlayerUpdate(i)]:[3,3];case 2:return r.sent(),[3,6];case 3:return[4,this.context.updateManager.sendPlayerCreate(i)];case 4:return(o=r.sent())?[4,this.associateSubscriptionWithEmail(o)]:[3,6];case 5:r.sent(),r.label=6;case 6:return[4,a.default.getSubscription()];case 7:return(s=r.sent()).deviceId=o,s.optedOut=!1,t?e.isSafari()?s.subscriptionToken=t.safariDeviceToken:s.subscriptionToken=t.w3cEndpoint?t.w3cEndpoint.toString():null:s.subscriptionToken=null,[4,a.default.setSubscription(s)];case 8:return r.sent(),h.default.getWindowEnv()!==m.WindowEnvironmentKind.ServiceWorker&&d.default.trigger(OneSignal.EVENTS.REGISTERED),"undefined"!=typeof OneSignal&&(OneSignal._sessionInitAlreadyRunning=!1),[2,s]}})})},e.requestPresubscribeNotificationPermission=function(){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,e.requestNotificationPermission()];case 1:return[2,t.sent()]}})})},e.prototype.unsubscribe=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:if(0!==e)return[3,1];throw new k.default;case 1:return 1!==e?[3,7]:h.default.getWindowEnv()!==m.WindowEnvironmentKind.ServiceWorker?[3,5]:[4,a.default.getSubscription()];case 2:return t=n.sent().deviceId,[4,u.default.updatePlayer(this.context.appConfig.appId,t,{notification_types:v.SubscriptionStateKind.MutedByApi})];case 3:return n.sent(),[4,a.default.put("Options",{key:"optedOut",value:!0})];case 4:return n.sent(),[3,6];case 5:throw new k.default;case 6:return[3,8];case 7:throw new k.default;case 8:return[2]}})})},e.requestNotificationPermission=function(){return new Promise(function(e){return window.Notification.requestPermission(e)})},e.prototype.associateSubscriptionWithEmail=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return[4,a.default.getEmailProfile()];case 1:return(t=n.sent()).emailId?[4,u.default.updatePlayer(this.config.appId,e,{parent_player_id:t.emailId,email:t.emailAddress})]:[2];case 2:return n.sent(),[2]}})})},e.prototype.isAlreadyRegisteredWithOneSignal=function(){return i(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,a.default.getSubscription()];case 1:return[2,!!e.sent().deviceId]}})})},e.prototype.subscribeSafariPromptPermission=function(){var e=this;return new Promise(function(t){window.safari.pushNotification.requestPermission(h.default.getOneSignalApiUrl().toString()+"/safari",e.config.safariWebId,{app_id:e.config.appId},function(e){e.deviceToken?t(e.deviceToken.toLowerCase()):t(null)})})},e.prototype.subscribeSafari=function(){return i(this,void 0,void 0,function(){var e,t,n;return r(this,function(i){switch(i.label){case 0:if(e=new b.RawPushSubscription,!this.config.safariWebId)throw new P.SdkInitError(P.SdkInitErrorKind.MissingSafariWebId);return t=window.safari.pushNotification.permission(this.config.safariWebId).deviceToken,e.existingSafariDeviceToken=t,t||d.default.trigger(OneSignal.EVENTS.PERMISSION_PROMPT_DISPLAYED),[4,this.subscribeSafariPromptPermission()];case 1:if(n=i.sent(),M.PermissionUtils.triggerNotificationPermissionChanged(),!n)throw new E.default(I.SubscriptionErrorReason.InvalidSafariSetup);return e.setFromSafariSubscription(n),[2,e]}})})},e.prototype.subscribeFcmFromPage=function(t){return i(this,void 0,void 0,function(){var n,i,o;return r(this,function(r){switch(r.label){case 0:return h.default.getWindowEnv()===m.WindowEnvironmentKind.ServiceWorker||window.Notification.permission!==g.NotificationPermission.Default?[3,5]:[4,d.default.trigger(OneSignal.EVENTS.PERMISSION_PROMPT_DISPLAYED)];case 1:return r.sent(),[4,e.requestPresubscribeNotificationPermission()];case 2:return(n=r.sent())!==g.NotificationPermission.Default?[3,4]:[4,M.PermissionUtils.triggerNotificationPermissionChanged(!0)];case 3:r.sent(),r.label=4;case 4:switch(n){case g.NotificationPermission.Default:throw f.default.debug("Exiting subscription and not registering worker because the permission was dismissed."),OneSignal._sessionInitAlreadyRunning=!1,OneSignal._isRegisteringForPush=!1,new O.default(_.PushPermissionNotGrantedErrorReason.Dismissed);case g.NotificationPermission.Denied:throw f.default.debug("Exiting subscription and not registering worker because the permission was blocked."),OneSignal._sessionInitAlreadyRunning=!1,OneSignal._isRegisteringForPush=!1,new O.default(_.PushPermissionNotGrantedErrorReason.Blocked)}r.label=5;case 5:return[4,this.context.serviceWorkerManager.shouldInstallWorker()];case 6:if(!r.sent())return[3,14];r.label=7;case 7:return r.trys.push([7,9,,14]),[4,this.context.serviceWorkerManager.installWorker()];case 8:return r.sent(),[3,14];case 9:return(i=r.sent())instanceof C.default?403!==i.status?[3,11]:[4,this.context.subscriptionManager.registerFailedSubscription(v.SubscriptionStateKind.ServiceWorkerStatus403,this.context)]:[3,13];case 10:return r.sent(),[3,13];case 11:return 404!==i.status?[3,13]:[4,this.context.subscriptionManager.registerFailedSubscription(v.SubscriptionStateKind.ServiceWorkerStatus404,this.context)];case 12:r.sent(),r.label=13;case 13:throw i;case 14:return f.default.debug("Waiting for the service worker to activate..."),[4,navigator.serviceWorker.ready];case 15:return o=r.sent(),f.default.debug("Service worker is ready to continue subscribing."),[4,this.subscribeFcmVapidOrLegacyKey(o.pushManager,t)];case 16:return[2,r.sent()]}})})},e.prototype.subscribeFcmFromWorker=function(e){return i(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:if(!self.registration.active&&!s.default.firefox)throw new w.InvalidStateError(w.InvalidStateReason.ServiceWorkerNotActivated);return[4,self.registration.pushManager.permissionState({userVisibleOnly:!0})];case 1:if("denied"===(t=n.sent()))throw new O.default(_.PushPermissionNotGrantedErrorReason.Blocked);if("prompt"===t)throw new O.default(_.PushPermissionNotGrantedErrorReason.Default);return[4,this.subscribeFcmVapidOrLegacyKey(self.registration.pushManager,e)];case 2:return[2,n.sent()]}})})},e.prototype.getVapidKeyForBrowser=function(){var e=void 0;return(e=s.default.firefox?this.config.onesignalVapidPublicKey:this.config.vapidPublicKey)?A.base64ToUint8Array(e).buffer:void 0},e.prototype.subscribeFcmVapidOrLegacyKey=function(e,t){return i(this,void 0,void 0,function(){var n,i,o,s,u,c;return r(this,function(r){switch(r.label){case 0:return n={userVisibleOnly:!0,applicationServerKey:this.getVapidKeyForBrowser()?this.getVapidKeyForBrowser():void 0},[4,e.getSubscription()];case 1:switch(o=r.sent(),s=!o,t){case 0:return[3,2];case 1:return[3,6]}return[3,9];case 2:return o&&o.options?(f.default.debug("[Subscription Manager] An existing push subscription exists and options is not null. Using existing options to resubscribe."),n=o.options,s=!1,[3,5]):[3,3];case 3:return!o||o.options?[3,5]:(f.default.debug("[Subscription Manager] An existing push subscription exists and options is null. Unsubscribing from push first now."),[4,o.unsubscribe()]);case 4:r.sent(),s=!1,r.label=5;case 5:return[3,9];case 6:return o?(f.default.debug("[Subscription Manager] Unsubscribing existing push subscription."),[4,o.unsubscribe()]):[3,8];case 7:r.sent(),r.label=8;case 8:return s=!0,[3,9];case 9:return f.default.debug("[Subscription Manager] Subscribing to web push with these options:",n),[4,e.subscribe(n)];case 10:return i=r.sent(),s?[4,a.default.getSubscription()]:[3,13];case 11:return(u=r.sent()).createdAt=(new Date).getTime(),u.expirationTime=i.expirationTime,[4,a.default.setSubscription(u)];case 12:r.sent(),r.label=13;case 13:return c=b.RawPushSubscription.setFromW3cSubscription(i),o&&(c.existingW3cPushSubscription=b.RawPushSubscription.setFromW3cSubscription(o)),[2,c]}})})},e.prototype.isSubscriptionExpiring=function(){return i(this,void 0,void 0,function(){var e,t,n,i;return r(this,function(r){switch(r.label){case 0:return[4,h.default.getIntegration()];case 1:switch(e=r.sent(),t=h.default.getWindowEnv(),e){case y.IntegrationKind.Secure:return[3,2];case y.IntegrationKind.SecureProxy:return[3,4];case y.IntegrationKind.InsecureProxy:return[3,10]}return[3,12];case 2:return[4,this.isSubscriptionExpiringForSecureIntegration()];case 3:return[2,r.sent()];case 4:if(t!==m.WindowEnvironmentKind.Host)return[3,8];if(n=OneSignal.proxyFrameHost)return[3,5];throw new w.InvalidStateError(w.InvalidStateReason.NoProxyFrame);case 5:return[4,n.runCommand(OneSignal.POSTMAM_COMMANDS.SUBSCRIPTION_EXPIRATION_STATE)];case 6:return[2,r.sent()];case 7:return[3,10];case 8:return[4,this.isSubscriptionExpiringForSecureIntegration()];case 9:return[2,r.sent()];case 10:return[4,a.default.getSubscription()];case 11:return(i=r.sent().expirationTime)?[2,(new Date).getTime()>=i]:[2,!1];case 12:return[2]}})})},e.prototype.isSubscriptionExpiringForSecureIntegration=function(){return i(this,void 0,void 0,function(){var e,t,n,i,o,s;return r(this,function(r){switch(r.label){case 0:return[4,this.context.serviceWorkerManager.getActiveState()];case 1:return(e=r.sent())!==p.ServiceWorkerActiveState.WorkerA&&e!==p.ServiceWorkerActiveState.WorkerB?[2,!1]:[4,c.ServiceWorkerManager.getRegistration()];case 2:return(t=r.sent())&&t.pushManager?[4,t.pushManager.getSubscription()]:[2,!1];case 3:return(n=r.sent())&&n.expirationTime?[4,a.default.getSubscription()]:[2,!1];case 4:return(i=r.sent().createdAt)||(o=31536e6,i=(new Date).getTime()+o),s=i+(n.expirationTime-i)/2,[2,!!n.expirationTime&&((new Date).getTime()>=n.expirationTime||(new Date).getTime()>=s)]}})})},e.prototype.getSubscriptionState=function(){return i(this,void 0,void 0,function(){var t,n,i,o;return r(this,function(r){switch(r.label){case 0:if(e.isSafari())return[2,this.getSubscriptionStateForSecure()];switch(t=h.default.getWindowEnv(),t){case m.WindowEnvironmentKind.ServiceWorker:return[3,1]}return[3,4];case 1:return[4,self.registration.pushManager.getSubscription()];case 2:return n=r.sent(),[4,a.default.getSubscription()];case 3:return i=r.sent().optedOut,[2,{subscribed:!!n,optedOut:!!i}];case 4:return[4,h.default.getIntegration()];case 5:switch(o=r.sent(),o){case y.IntegrationKind.Secure:return[3,6];case y.IntegrationKind.SecureProxy:return[3,7];case y.IntegrationKind.InsecureProxy:return[3,11]}return[3,13];case 6:return[2,this.getSubscriptionStateForSecure()];case 7:switch(t){case m.WindowEnvironmentKind.OneSignalProxyFrame:case m.WindowEnvironmentKind.OneSignalSubscriptionPopup:case m.WindowEnvironmentKind.OneSignalSubscriptionModal:return[3,8]}return[3,9];case 8:return[2,this.getSubscriptionStateForSecure()];case 9:return[4,OneSignal.proxyFrameHost.runCommand(OneSignal.POSTMAM_COMMANDS.GET_SUBSCRIPTION_STATE)];case 10:return[2,r.sent()];case 11:return[4,this.getSubscriptionStateForInsecure()];case 12:return[2,r.sent()];case 13:throw new w.InvalidStateError(w.InvalidStateReason.UnsupportedEnvironment)}})})},e.prototype.getSubscriptionStateForSecure=function(){return i(this,void 0,void 0,function(){var t,n,i,o,s,u,l,d;return r(this,function(r){switch(r.label){case 0:return[4,a.default.getSubscription()];case 1:return t=r.sent(),n=t.deviceId,i=t.optedOut,e.isSafari()?(o=window.safari.pushNotification.permission(this.config.safariWebId),[2,{subscribed:!("granted"!==o.permission||!o.deviceToken||!n),optedOut:!!i}]):[4,this.context.serviceWorkerManager.getActiveState()];case 2:return s=r.sent(),[4,c.ServiceWorkerManager.getRegistration()];case 3:return u=r.sent(),[4,this.context.permissionManager.getNotificationPermission(this.context.appConfig.safariWebId)];case 4:return l=r.sent(),d=s===p.ServiceWorkerActiveState.WorkerA||s===p.ServiceWorkerActiveState.WorkerB,u?[2,{subscribed:!(!n||l!==g.NotificationPermission.Granted||!d),optedOut:!!i}]:[2,{subscribed:!1,optedOut:!!i}]}})})},e.prototype.getSubscriptionStateForInsecure=function(){return i(this,void 0,void 0,function(){var e,t,n,i,o;return r(this,function(r){switch(r.label){case 0:return[4,a.default.getSubscription()];case 1:return e=r.sent(),t=e.deviceId,n=e.subscriptionToken,i=e.optedOut,[4,this.context.permissionManager.getNotificationPermission(this.context.appConfig.safariWebId)];case 2:return o=r.sent(),[2,{subscribed:!(!t||!n||o!==g.NotificationPermission.Granted),optedOut:!!i}]}})})},e.prototype.registerFailedSubscription=function(e,t){return i(this,void 0,void 0,function(){return r(this,function(n){return t.sessionManager.isFirstPageView()&&(t.subscriptionManager.registerSubscription(new b.RawPushSubscription,e),t.sessionManager.incrementPageViewCount()),[2]})})},e}();t.SubscriptionManager=T},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(1)),a=function(){function e(e,t){void 0===t&&(t=!1),this.context=e,this.isFeatureEnabled=t}return Object.defineProperty(e.prototype,"PUBLISHER_ID",{get:function(){try{return"os!"+this.context.appConfig.appId.replace(/-/g,"").substr(0,15).toLowerCase()}catch(e){return"os!os"}},enumerable:!0,configurable:!0}),e.prototype.getFrameOrigin=function(){return!!this.context.appConfig.subdomain?new URL("https://"+this.context.appConfig.subdomain+".os.tc"):new URL(s.default.getOneSignalApiUrl().origin)},e.prototype.install=function(){return i(this,void 0,void 0,function(){var e,t,n;return r(this,function(i){return window.top!==window?[2]:(e=this.getFrameOrigin(),this.isFeatureEnabled?(e.pathname="/webPushAnalytics",e.search="sync=true&appId="+this.PUBLISHER_ID):e.pathname="/webPushAnalytics",(t=document.createElement("iframe")).style.display="none",t.src=e.href,(n={promise:void 0,resolver:void 0,rejector:void 0}).promise=new Promise(function(e,t){n.resolver=e,n.rejector=t}),document.body.appendChild(t),t.onload=n.resolver,t.onerror=n.rejector,[2,n.promise])})})},e}();t.default=a},function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(2)),u=s(n(39)),c=s(n(12)),l=s(n(1)),d=s(n(14)),f=s(n(0)),p=function(){function e(e,t){this.url=e,this.url.pathname="subscribe",this.options=t||{autoAccept:!1}}return e.prototype.load=function(){var e=this,t=i({},c.default.getPromptOptionsPostHash(),{promptType:"popup",parentHostname:encodeURIComponent(location.hostname)});return this.options.autoAccept&&(t.autoAccept=!0),f.default.info("Opening a popup to "+this.url.toString()+" with POST data:",t),this.popupWindow=this.openWindowViaPost(this.url.toString(),t,null),this.establishCrossOriginMessaging(),this.loadPromise={},this.loadPromise.promise=new Promise(function(t,n){e.loadPromise.resolver=t,e.loadPromise.rejector=n}),this.loadPromise.promise},e.prototype.openWindowViaPost=function(e,t,n){var i=document.createElement("form");i.action=e,i.method="POST",i.target="onesignal-http-popup";var r=void 0!=window.screenLeft?window.screenLeft:screen.left,o=void 0!=window.screenTop?window.screenTop:screen.top,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=OneSignal._windowWidth,c=OneSignal._windowHeight,l=s/2-u/2+r,d=a/2-c/2+o;n&&(n.childWidth&&(u=n.childWidth),n.childHeight&&(c=n.childHeight),n.left&&(l=n.left),n.top&&(d=n.top));var f=window.open("about:blank","onesignal-http-popup","'scrollbars=yes, width="+u+", height="+c+", top="+d+", left="+l);if(t)for(var p in t){var h=document.createElement("textarea");h.name=p,h.value="object"==typeof t[p]?JSON.stringify(t[p]):t[p],i.appendChild(h)}return i.style.display="none",document.body.appendChild(i),i.submit(),document.body.removeChild(i),f},e.prototype.establishCrossOriginMessaging=function(){this.messenger=new d.default(this.popupWindow,this.url.toString(),this.url.toString()),this.messenger.on(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS,this.onBeginMessagePortCommunications.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_LOADED,this.onPopupLoaded.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_ACCEPTED,this.onPopupAccepted.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_REJECTED,this.onPopupRejected.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING,this.onPopupClosing.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.SET_SESSION_COUNT,this.onSetSessionCount.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.WINDOW_TIMEOUT,this.onWindowTimeout.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION,this.onFinishingRegistrationRemotely.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,this.onRemoteRetriggerEvent.bind(this)),this.messenger.startPostMessageReceive()},e.prototype.dispose=function(){this.messenger.destroy()},e.prototype.onBeginMessagePortCommunications=function(e){return r(this,void 0,void 0,function(){return o(this,function(e){return f.default.debug("("+l.default.getWindowEnv().toString()+") Successfully established cross-origin messaging with the popup window."),this.messenger.connect(),[2,!1]})})},e.prototype.onPopupLoaded=function(e){return r(this,void 0,void 0,function(){return o(this,function(e){return this.loadPromise.resolver(),a.default.trigger("popupLoad"),[2]})})},e.prototype.onPopupAccepted=function(e){return r(this,void 0,void 0,function(){return o(this,function(e){return c.default.triggerCustomPromptClicked("granted"),[2]})})},e.prototype.onPopupRejected=function(e){return r(this,void 0,void 0,function(){return o(this,function(e){return c.default.triggerCustomPromptClicked("denied"),[2]})})},e.prototype.onPopupClosing=function(e){return r(this,void 0,void 0,function(){return o(this,function(e){return f.default.info("Popup window is closing, running cleanup events."),a.default.trigger(OneSignal.EVENTS.POPUP_CLOSING),this.dispose(),[2]})})},e.prototype.onSetSessionCount=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){return f.default.debug(l.default.getWindowEnv().toString()+" Marking current session as a continuing browsing session."),t=e.data.sessionCount,OneSignal.context.sessionManager.setPageViewCount(t),[2]})})},e.prototype.onWindowTimeout=function(e){return r(this,void 0,void 0,function(){return o(this,function(e){return f.default.debug(l.default.getWindowEnv().toString()+" Popup window timed out and was closed."),a.default.trigger(OneSignal.EVENTS.POPUP_WINDOW_TIMEOUT),[2]})})},e.prototype.onFinishingRegistrationRemotely=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return f.default.debug(location.origin,l.default.getWindowEnv().toString()+" Finishing HTTP popup registration inside the iFrame, sent from popup."),e.reply({progress:!0}),t=e.data.rawPushSubscription,[4,c.default.getAppId()];case 1:return n.sent(),this.messenger.stopPostMessageReceive(),[4,OneSignal.context.subscriptionManager.registerSubscription(t)];case 2:return n.sent(),[4,u.default.checkAndTriggerSubscriptionChanged()];case 3:return n.sent(),[4,c.default.checkAndTriggerNotificationPermissionChanged()];case 4:return n.sent(),[2]}})})},e.prototype.onRemoteRetriggerEvent=function(e){var t=e.data,n=t.eventName,i=t.eventData;return a.default.trigger(n,i,e.source),!1},e.prototype.message=function(){this.messenger.message.apply(this.messenger,arguments)},e}();t.default=p},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(11),c=n(4),l=a(n(34)),d=a(n(0)),f=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher","onesignal-bell-launcher-active",null,null,"onesignal-bell-launcher-inactive","hidden","active")||this;return n.bell=t,n.wasInactive=!1,n}return r(t,e),t.prototype.resize=function(e){return o(this,void 0,void 0,function(){var t=this;return s(this,function(n){switch(n.label){case 0:if(!this.element)throw new u.InvalidStateError(u.InvalidStateReason.MissingDomElement);if("small"===e&&c.hasCssClass(this.element,"onesignal-bell-launcher-sm")||"medium"===e&&c.hasCssClass(this.element,"onesignal-bell-launcher-md")||"large"===e&&c.hasCssClass(this.element,"onesignal-bell-launcher-lg"))return[2,Promise.resolve(this)];if(c.removeCssClass(this.element,"onesignal-bell-launcher-sm"),c.removeCssClass(this.element,"onesignal-bell-launcher-md"),c.removeCssClass(this.element,"onesignal-bell-launcher-lg"),"small"===e)c.addCssClass(this.element,"onesignal-bell-launcher-sm");else if("medium"===e)c.addCssClass(this.element,"onesignal-bell-launcher-md");else{if("large"!==e)throw new Error("Invalid OneSignal bell size "+e);c.addCssClass(this.element,"onesignal-bell-launcher-lg")}return this.shown?[3,1]:[2,this];case 1:return[4,new Promise(function(e){if(0==t.targetTransitionEvents.length)return e(t);var n=setTimeout(function(){d.default.debug("Launcher did not completely resize (state: "+t.state+", activeState: "+t.activeState+").")},t.transitionCheckTimeout);c.once(t.element,"transitionend",function(i,r){if(i.target===t.element&&c.contains(t.targetTransitionEvents,i.propertyName))return clearTimeout(n),r(),e(t)},!0)})];case 2:return[2,n.sent()]}})})},t.prototype.activateIfInactive=function(){return this.inactive?(this.wasInactive=!0,this.activate()):c.nothing()},t.prototype.inactivateIfWasInactive=function(){return this.wasInactive?(this.wasInactive=!1,this.inactivate()):c.nothing()},t.prototype.clearIfWasInactive=function(){this.wasInactive=!1},t.prototype.inactivate=function(){var t=this;return this.bell.message.hide().then(function(){return t.bell.badge.content.length>0?t.bell.badge.hide().then(function(){return Promise.all([e.prototype.inactivate.call(t),t.resize("small")])}).then(function(){return t.bell.badge.show()}):Promise.all([e.prototype.inactivate.call(t),t.resize("small")])})},t.prototype.activate=function(){var t=this;return this.bell.badge.content.length>0?this.bell.badge.hide().then(function(){return Promise.all([e.prototype.activate.call(t),t.resize(t.bell.options.size)])}):Promise.all([e.prototype.activate.call(this),this.resize(this.bell.options.size)])},t}(l.default);t.default=f},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(9)),a=o(n(2)),u=o(n(1)),c=n(4),l=o(n(33)),d=o(n(22)),f=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher-dialog","onesignal-bell-launcher-dialog-opened",null,"hidden",["opacity","transform"],".onesignal-bell-launcher-dialog-body")||this;return n.bell=t,n.subscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #subscribe-button",n.unsubscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #unsubscribe-button",n.notificationIcons=null,n}return r(t,e),t.prototype.getPlatformNotificationIcon=function(){return this.notificationIcons?c.isChromeLikeBrowser()||s.default.firefox||s.default.msedge?this.notificationIcons.chrome||this.notificationIcons.safari:s.default.safari?this.notificationIcons.safari||this.notificationIcons.chrome:void 0:null},t.prototype.show=function(){var t=this;return this.updateBellLauncherDialogBody().then(function(){return e.prototype.show.call(t)})},Object.defineProperty(t.prototype,"subscribeButtonSelectorId",{get:function(){return"subscribe-button"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unsubscribeButtonSelectorId",{get:function(){return"unsubscribe-button"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subscribeButton",{get:function(){return this.element.querySelector("#"+this.subscribeButtonSelectorId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unsubscribeButton",{get:function(){return this.element.querySelector("#"+this.unsubscribeButtonSelectorId)},enumerable:!0,configurable:!0}),t.prototype.updateBellLauncherDialogBody=function(){var e=this;return OneSignal.getSubscription().then(function(t){c.clearDomElementChildren(document.querySelector(e.nestedContentSelector));var n="Nothing to show.",i="";if(e.bell.options.showCredit&&(i='<div class="divider"></div><div class="kickback">Powered by <a href="https://onesignal.com" class="kickback" target="_blank">OneSignal</a></div>'),e.bell.state===d.default.STATES.SUBSCRIBED&&!0===t||e.bell.state===d.default.STATES.UNSUBSCRIBED&&!1===t){var r="";r=(l=e.getPlatformNotificationIcon())?'<div class="push-notification-icon"><img src="'+l+'"></div>':'<div class="push-notification-icon push-notification-icon-default"></div>';var o="";o=e.bell.state!==d.default.STATES.SUBSCRIBED?'<button type="button" class="action" id="'+e.subscribeButtonSelectorId+'">'+e.bell.text["dialog.main.button.subscribe"]+"</button>":'<button type="button" class="action" id="'+e.unsubscribeButtonSelectorId+'">'+e.bell.text["dialog.main.button.unsubscribe"]+"</button>",n="<h1>"+e.bell.text["dialog.main.title"]+'</h1><div class="divider"></div><div class="push-notification">'+r+'<div class="push-notification-text-container"><div class="push-notification-text push-notification-text-short"></div><div class="push-notification-text"></div><div class="push-notification-text push-notification-text-medium"></div><div class="push-notification-text"></div><div class="push-notification-text push-notification-text-medium"></div></div></div><div class="action-container">'+o+"</div>"+i}else if(e.bell.state===d.default.STATES.BLOCKED){var l=null;s.default.chrome?s.default.mobile||s.default.tablet||(l="/bell/chrome-unblock.jpg"):s.default.firefox?l="/bell/firefox-unblock.jpg":s.default.safari?l="/bell/safari-unblock.jpg":s.default.msedge&&(l="/bell/edge-unblock.png");var f="";l&&(f='<a href="'+(l=u.default.getOneSignalApiUrl().origin+l)+'" target="_blank"><img src="'+l+'"></a></div>'),(s.default.mobile||s.default.tablet)&&s.default.chrome&&(f="<ol><li>Access <strong>Settings</strong> by tapping the three menu dots <strong>â‹®</strong></li><li>Click <strong>Site settings</strong> under Advanced.</li><li>Click <strong>Notifications</strong>.</li><li>Find and click this entry for this website.</li><li>Click <strong>Notifications</strong> and set it to <strong>Allow</strong>.</li></ol>"),n="<h1>"+e.bell.text["dialog.blocked.title"]+'</h1><div class="divider"></div><div class="instructions"><p>'+e.bell.text["dialog.blocked.message"]+"</p>"+f+"</div>"+i}c.addDomElement(document.querySelector(e.nestedContentSelector),"beforeend",n),e.subscribeButton&&e.subscribeButton.addEventListener("click",function(){OneSignal.__doNotShowWelcomeNotification=!1,a.default.trigger(d.default.EVENTS.SUBSCRIBE_CLICK)}),e.unsubscribeButton&&e.unsubscribeButton.addEventListener("click",function(){return a.default.trigger(d.default.EVENTS.UNSUBSCRIBE_CLICK)}),e.bell.setCustomColorsIfSpecified()})},t}(l.default);t.default=f},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),a=o(n(2)),u=o(n(34)),c=o(n(22)),l=o(n(24)),d=o(n(57)),f=o(n(17)),p=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher-button",null,null,"onesignal-bell-launcher-button-active",null,"shown","")||this;return n.bell=t,n.events={mouse:"bell.launcher.button.mouse"},n.element.addEventListener("touchstart",function(){n.onHovering(),n.onTap()},{passive:!0}),n.element.addEventListener("mouseenter",function(){n.onHovering()}),n.element.addEventListener("mouseleave",function(){n.onHovered()}),n.element.addEventListener("touchmove",function(){n.onHovered()},{passive:!0}),n.element.addEventListener("mousedown",function(){n.onTap()}),n.element.addEventListener("mouseup",function(){n.onEndTap()}),n.element.addEventListener("click",function(){n.onHovered(),n.onClick()}),n}return r(t,e),t.prototype.onHovering=function(){(l.default.isEmpty(this.events.mouse)||"out"===l.default.getLast(this.events.mouse))&&a.default.trigger(c.default.EVENTS.HOVERING),l.default.put(this.events.mouse,"over")},t.prototype.onHovered=function(){l.default.put(this.events.mouse,"out"),a.default.trigger(c.default.EVENTS.HOVERED)},t.prototype.onTap=function(){this.pulse(),this.activate(),this.bell.badge.activate()},t.prototype.onEndTap=function(){this.inactivate(),this.bell.badge.inactivate()},t.prototype.onClick=function(){var e=this;if(a.default.trigger(c.default.EVENTS.BELL_CLICK),a.default.trigger(c.default.EVENTS.LAUNCHER_CLICK),!this.bell.message.shown||this.bell.message.contentType!=d.default.TYPES.MESSAGE){var t=l.default.getLast("subscription.optedOut");return this.bell.unsubscribed?t?this.bell.launcher.activateIfInactive().then(function(){e.bell.showDialogProcedure()}):(f.default.registerForPushNotifications(),this.bell._ignoreSubscriptionState=!0,f.default.emitter.once(f.default.EVENTS.SUBSCRIPTION_CHANGED,function(){e.bell.message.display(d.default.TYPES.MESSAGE,e.bell.text["message.action.subscribed"],d.default.TIMEOUT).then(function(){e.bell._ignoreSubscriptionState=!1,e.bell.launcher.inactivate()})})):this.bell.subscribed?this.bell.launcher.activateIfInactive().then(function(){e.bell.showDialogProcedure()}):this.bell.blocked&&(s.isUsingSubscriptionWorkaround()?f.default.registerForPushNotifications():this.bell.launcher.activateIfInactive().then(function(){e.bell.showDialogProcedure()})),this.bell.message.hide()}},t.prototype.pulse=function(){s.removeDomElement(".pulse-ring"),s.addDomElement(this.element,"beforeend",'<div class="pulse-ring"></div>'),this.bell.setCustomColorsIfSpecified()},t}(u.default);t.default=p},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this,".onesignal-bell-launcher-badge","onesignal-bell-launcher-badge-opened",null,"onesignal-bell-launcher-badge-active",null,"hidden")||this}return r(t,e),t.prototype.increment=function(){if(!isNaN(this.content)){var e=+this.content;e+=1,this.content=e.toString()}},t.prototype.show=function(){var t=e.prototype.show.call(this);return OneSignal.notifyButton.setCustomColorsIfSpecified(),t},t.prototype.decrement=function(){if(!isNaN(this.content)){var e=+this.content;e-=1,this.content=e>0?e.toString():""}},t}(o(n(34)).default);t.default=s},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(2)),a=o(n(12)),u=o(n(23)),c=o(n(1)),l=o(n(14)),d=o(n(0)),f=function(){function e(e,t){this.appId=e,this.registrationOptions=t}return e.prototype.load=function(){return i(this,void 0,void 0,function(){var e,t;return r(this,function(n){switch(n.label){case 0:return[4,OneSignal.isPushNotificationsEnabled()];case 1:return e=n.sent(),[4,OneSignal.getNotificationPermission()];case 2:return t=n.sent(),this.url=c.default.getOneSignalApiUrl(),this.url.pathname="webPushModal",this.url.search=a.default.getPromptOptionsQueryString()+"&id="+this.appId+"&httpsPrompt=true&pushEnabled="+e+"&permissionBlocked="+("denied"===t)+"&promptType=modal",d.default.info("Loading iFrame for HTTPS subscription modal at "+this.url.toString()),this.modal=this.createHiddenSubscriptionDomModal(this.url.toString()),this.establishCrossOriginMessaging(),[2]}})})},e.prototype.createHiddenSubscriptionDomModal=function(e){var t=document.createElement("div");t.setAttribute("id","OneSignal-iframe-modal"),t.setAttribute("style","display:none !important"),t.innerHTML='<div id="notif-permission" style="background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 3000000000; display: flex; align-items: center; justify-content: center;"></div>',document.body.appendChild(t);var n=document.createElement("style");n.innerHTML="@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }",document.getElementsByTagName("head")[0].appendChild(n);var i=document.createElement("iframe");return i.className="OneSignal-permission-iframe",i.setAttribute("frameborder","0"),i.width=OneSignal._windowWidth.toString(),i.height=OneSignal._windowHeight.toString(),i.src=e,document.getElementById("notif-permission").appendChild(i),i},e.prototype.removeFrame=function(){var e=document.querySelector("#OneSignal-iframe-modal");e&&e.remove()},e.prototype.showSubscriptionDomModal=function(){document.getElementById("OneSignal-iframe-modal").setAttribute("style","")},e.prototype.establishCrossOriginMessaging=function(){this.messenger=new l.default(this.modal,this.url.origin,this.url.origin),this.messenger.startPostMessageReceive(),this.messenger.once(OneSignal.POSTMAM_COMMANDS.MODAL_LOADED,this.onModalLoaded.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_ACCEPTED,this.onModalAccepted.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_REJECTED,this.onModalRejected.bind(this)),this.messenger.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING,this.onModalClosing.bind(this))},e.prototype.onModalLoaded=function(e){this.showSubscriptionDomModal(),s.default.trigger("modalLoaded")},e.prototype.onModalAccepted=function(e){return i(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return d.default.debug("User accepted the HTTPS modal prompt.",location.origin),OneSignal._sessionInitAlreadyRunning=!1,this.dispose(),a.default.triggerCustomPromptClicked("granted"),d.default.debug("Calling setSubscription(true)"),[4,u.default.registerForPush()];case 1:return e.sent(),[4,OneSignal.setSubscription(!0)];case 2:return e.sent(),[2]}})})},e.prototype.onModalRejected=function(e){d.default.debug("User rejected the HTTPS modal prompt."),OneSignal._sessionInitAlreadyRunning=!1,this.dispose(),a.default.triggerCustomPromptClicked("denied")},e.prototype.onModalClosing=function(e){d.default.info("Detected modal is closing."),this.dispose()},e.prototype.dispose=function(){this.messenger&&this.messenger.destroy(),this.removeFrame()},e.prototype.message=function(){this.messenger.message.apply(this.messenger,arguments)},e}();t.default=f},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(2)),l=u(n(59)),d=u(n(54)),f=u(n(1)),p=u(n(14)),h=u(n(8)),g=n(4),b=u(n(31)),v=u(n(0)),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initialize=function(){var t=e.prototype.initialize.call(this);return c.default.trigger("httpInitialize"),t},t.prototype.establishCrossOriginMessaging=function(){this.messenger&&this.messenger.destroy(),this.messenger=new p.default(window,this.options.origin,this.options.origin),this.messenger.on(OneSignal.POSTMAM_COMMANDS.CONNECTED,this.onMessengerConnect.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE,this.onProxyFrameInitializing.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION,this.onRemoteNotificationPermission.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET,this.onRemoteDatabaseGet.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT,this.onRemoteDatabasePut.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE,this.onRemoteDatabaseRemove.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH,this.onUnsubscribeFromPush.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.MARK_PROMPT_DISMISSED,this.onMarkPromptDismissed.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.IS_SUBSCRIBED,this.onIsSubscribed.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_PROXY_FRAME,this.onUnsubscribeProxyFrame.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.SERVICE_WORKER_STATE,this.onServiceWorkerState.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.GET_WORKER_VERSION,this.onWorkerVersion.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.SUBSCRIPTION_EXPIRATION_STATE,this.onSubscriptionExpirationState.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.PROCESS_EXPIRING_SUBSCRIPTIONS,this.onProcessExpiringSubscriptions.bind(this)),this.messenger.on(OneSignal.POSTMAM_COMMANDS.GET_SUBSCRIPTION_STATE,this.onGetSubscriptionState.bind(this)),this.messenger.listen()},t.prototype.retriggerRemoteEvent=function(e,t){this.messenger.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,{eventName:e,eventData:t})},t.prototype.onMessengerConnect=function(e){return s(this,void 0,void 0,function(){return a(this,function(e){return v.default.debug("("+f.default.getWindowEnv().toString()+") Successfully established cross-origin communication."),this.finishInitialization(),[2,!1]})})},t.prototype.onProxyFrameInitializing=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return v.default.info("("+f.default.getWindowEnv().toString()+") The iFrame has just received initOptions from the host page!"),OneSignal.config=o({},e.data.hostInitOptions,OneSignal.config,{pageUrl:e.data.pageUrl,pageTitle:e.data.pageTitle}),l.default.installNativePromptPermissionChangedHook(),[4,h.default.get("Options","defaultUrl")];case 1:return t.sent()?[3,3]:[4,h.default.put("Options",{key:"defaultUrl",value:new URL(OneSignal.config.pageUrl).origin})];case 2:t.sent(),t.label=3;case 3:return[4,h.default.put("Options",{key:"lastKnownHostUrl",value:OneSignal.config.pageUrl})];case 4:return t.sent(),[4,l.default.initSaveState(OneSignal.config.pageTitle)];case 5:return t.sent(),[4,l.default.storeInitialValues()];case 6:return t.sent(),[4,l.default.saveInitOptions()];case 7:if(t.sent(),navigator.serviceWorker&&"https:"===window.location.protocol)try{OneSignal.context.serviceWorkerManager.establishServiceWorkerChannel()}catch(e){v.default.error("Error interacting with Service Worker inside an HTTP-hosted iFrame:",e)}return e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2]}})})},t.prototype.onRemoteNotificationPermission=function(e){return s(this,void 0,void 0,function(){var t,n;return a(this,function(i){switch(i.label){case 0:return[4,(t=OneSignal.context).permissionManager.getReportedNotificationPermission(t.appConfig.safariWebId)];case 1:return n=i.sent(),e.reply(n),[2,!1]}})})},t.prototype.onRemoteDatabaseGet=function(e){return s(this,void 0,void 0,function(){var t,n,i,r,o,s,u,c;return a(this,function(a){switch(a.label){case 0:for(t=e.data,n=[],i=0,r=t;i<r.length;i++)o=r[i],s=o.table,u=o.key,n.push(h.default.get(s,u));return[4,Promise.all(n)];case 1:return c=a.sent(),e.reply(c),[2,!1]}})})},t.prototype.onRemoteDatabasePut=function(e){return s(this,void 0,void 0,function(){var t,n,i,r,o,s,u;return a(this,function(a){switch(a.label){case 0:for(t=e.data,n=[],i=0,r=t;i<r.length;i++)o=r[i],s=o.table,u=o.keypath,n.push(h.default.put(s,u));return[4,Promise.all(n)];case 1:return a.sent(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2,!1]}})})},t.prototype.onRemoteDatabaseRemove=function(e){return s(this,void 0,void 0,function(){var t,n,i,r,o,s,u;return a(this,function(a){switch(a.label){case 0:for(t=e.data,n=[],i=0,r=t;i<r.length;i++)o=r[i],s=o.table,u=o.keypath,n.push(h.default.remove(s,u));return[4,Promise.all(n)];case 1:return a.sent(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2,!1]}})})},t.prototype.onUnsubscribeFromPush=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:v.default.debug("(Reposted from iFrame -> Host) User unsubscribed but permission granted. Re-prompting the user for push."),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,g.unsubscribeFromPush()];case 2:return n.sent(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[3,4];case 3:return t=n.sent(),v.default.debug("Failed to unsubscribe from push remotely:",t),[3,4];case 4:return[2]}})})},t.prototype.onMarkPromptDismissed=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return v.default.debug("(Reposted from iFrame -> Host) Marking prompt as dismissed."),[4,d.default.markHttpsNativePromptDismissed()];case 1:return t.sent(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2,!1]}})})},t.prototype.onIsSubscribed=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return[4,OneSignal.isPushNotificationsEnabled()];case 1:return t=n.sent(),e.reply(t),[2,!1]}})})},t.prototype.onUnsubscribeProxyFrame=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,OneSignal.isPushNotificationsEnabled()];case 1:return t.sent()?[4,OneSignal.setSubscription(!1)]:[3,4];case 2:return t.sent(),[4,OneSignal.database.rebuild()];case 3:t.sent(),t.label=4;case 4:return e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2,!1]}})})},t.prototype.onServiceWorkerState=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return[4,OneSignal.context.serviceWorkerManager.getActiveState()];case 1:return t=n.sent(),e.reply(t),[2,!1]}})})},t.prototype.onWorkerVersion=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return[4,OneSignal.context.serviceWorkerManager.getWorkerVersion()];case 1:return t=n.sent(),e.reply(t),[2,!1]}})})},t.prototype.onSubscriptionExpirationState=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return[4,OneSignal.context.subscriptionManager.isSubscriptionExpiring()];case 1:return t=n.sent(),e.reply(t),[2,!1]}})})},t.prototype.onProcessExpiringSubscriptions=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return OneSignal.context,[4,l.default.processExpiringSubscriptions()];case 1:return t.sent(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),[2,!1]}})})},t.prototype.onGetSubscriptionState=function(e){return s(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return[4,OneSignal.context.subscriptionManager.getSubscriptionState()];case 1:return t=n.sent(),e.reply(t),[2,!1]}})})},t}(b.default);t.default=m},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(2)),a=o(n(60)),u=o(n(1)),c=n(3),l=o(n(93)),d=o(n(82)),f=o(n(81)),p=n(4),h=o(n(0)),g=function(){function e(){}return e.initHttp=function(e){return i(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:switch(h.default.debug("Called %cinitHttp("+JSON.stringify(e,null,4)+")",p.getConsoleStyle("code")),u.default.getWindowEnv()){case c.WindowEnvironmentKind.OneSignalProxyFrame:return[3,1];case c.WindowEnvironmentKind.OneSignalSubscriptionPopup:return[3,3];case c.WindowEnvironmentKind.OneSignalSubscriptionModal:return[3,5]}return[3,6];case 1:return OneSignal.proxyFrame=new l.default(e),[4,OneSignal.proxyFrame.initialize()];case 2:return t.sent(),a.default.ensureBackwardsCompatibility(OneSignal),[3,7];case 3:return OneSignal.subscriptionPopup=new f.default(e),[4,OneSignal.subscriptionPopup.initialize()];case 4:return t.sent(),a.default.ensureBackwardsCompatibility(OneSignal),s.default.trigger("httpInitialize"),[3,7];case 5:return OneSignal.subscriptionModal=new d.default(e),OneSignal.subscriptionModal.establishCrossOriginMessaging(),OneSignal.subscriptionModal.initialize(),a.default.ensureBackwardsCompatibility(OneSignal),s.default.trigger("httpInitialize"),[3,7];case 6:return h.default.error("Unsupported HTTP initialization branch."),[3,7];case 7:return[2]}})})},e}();t.default=g},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.DevicePlatformKind||(t.DevicePlatformKind={})).Mobile="mobile",i.Tablet="tablet",i.Desktop="desktop"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.ServiceWorkerState=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(){}}();t.AppState=i},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var TimeoutError=function(e){function TimeoutError(t){void 0===t&&(t="The asynchronous operation has timed out.");var n=e.call(this,t)||this;return n.message=t,Object.setPrototypeOf(n,TimeoutError.prototype),n}return r(TimeoutError,e),TimeoutError}(o(n(7)).default);t.default=TimeoutError},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(5)),o=function(){function e(){}return e.promiseStub=function(){return{then:e.promiseStub,catch:e.promiseStub}},Object.defineProperty(e,"log",{get:function(){return{setLevel:function(){}}},enumerable:!0,configurable:!0}),e.isPushNotificationsSupported=function(){return!1},e.push=function(e){if("function"==typeof e)e();else{var t=e.shift();OneSignal[t].apply(null,e)}},e.VERSION=function(){return r.default.version()},e}();t.default=o;var s=o;s.init=s.showHttpPrompt=s.registerForPushNotifications=s.showHttpPermissionRequest=s.getNotificationPermission=s.on=s.off=s.once=s.config=s.SERVICE_WORKER_PATH=s.SERVICE_WORKER_UPDATER_PATH=s.checkAndWipeUserSubscription=s.subscriptionBell=s.notifyButton=function(){},s.setDefaultNotificationUrl=s.setDefaultTitle=s.syncHashedEmail=s.getTags=s.sendTag=s.sendTags=s.deleteTag=s.deleteTags=s.addListenerForNotificationOpened=s.getIdsAvailable=s.isPushNotificationsEnabled=s.setSubscription=s.getUserId=s.getRegistrationId=s.getSubscription=s.sendSelfNotification=s.setEmail=s.logoutEmail=s.promiseStub},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(100)),o=i(n(0)),s=n(4);t.oneSignalSdkInit=function(){if(s.incrementSdkLoadCount(),s.getSdkLoadCount()>1)return o.default.warn("OneSignal: The web push SDK is included more than once. For optimal performance, please include our SDK only once on your page."),void o.default.debug("OneSignal: Exiting from SDK initialization to prevent double-initialization errors. Occurred "+s.getSdkLoadCount()+" times.");var e;if("undefined"!=typeof OneSignal&&(e=OneSignal),s.isPushNotificationsSupported()?window.OneSignal=n(17).default:(o.default.debug("OneSignal: Push notifications are not supported. A stubbed version of the SDK will be initialized."),window.OneSignal=r.default),e){if(!Array.isArray(e))return void o.default.error("'OneSignal' was not defined as an Array. Skipping pushes");for(var t=0,i=e;t<i.length;t++){var a=i[t];try{OneSignal.push(a)}catch(e){o.default.error(e)}}}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(101),o=n(3);i(n(1)).default.getWindowEnv()===o.WindowEnvironmentKind.ServiceWorker?self.OneSignal=n(75):r.oneSignalSdkInit()}]);
//# sourceMappingURL=OneSignalSDK.js.map

(function(){var aa="&action=",ba=".wikipedia.org",ca="CSSStyleDeclaration",da="Clobbering detected",ea="Edge",fa="Element",ha="GET",ia="SCRIPT",ja="SPAN",ka="STYLE",la="SW_READER_LIST_",ma="SW_READER_LIST_CLOSED_",na="Share this post",oa="_blank",qa="about:invalid#zClosurez",ra="about:invalid#zSoyz",sa="absolute",ta="attributes",ua="block",va="blog.gPlusViewType",wa="chooseWidget",xa="click",ya="collapsed",za="collapsed-backlink",Aa="collapsible",Ba="comment-editor",Ca="complete",Da="configure",Ea="contact-form-email",
Fa="contact-form-email-message",Ga="contact-form-error-message",Ha="contact-form-error-message-with-border",Ia="contact-form-name",Ja="contact-form-submit",Ka="contact-form-success-message",La="contact-form-success-message-with-border",Ma="content",Na="data-height",Oa="data-viewurl",Pa="displayModeFull",Qa="displayModeLayout",Ra="displayModeNone",g="div",Sa="dropdown-toggle",Ta="error",Ua="expanded",Va="expanded-backlink",Wa="followers-grid",k="function",Xa="getAttribute",Ya="getElementsByTagName",
Za="getPropertyValue",$a="hasAttribute",ab="hidden",bb="https://",cb="inline",db="layout-widget-description",eb="layout-widget-title",fb="max-height: 0;",gb="msMatchesSelector",l="none",hb="number",ib="object",jb="ready",kb="removeAttribute",lb="rotate(-45deg)",nb="setAttribute",ob="status-message",pb="status-message-inner",qb="string",rb="style",sb="success",tb="text/javascript",ub="thread-collapsed",vb="thread-expanded",wb="toggle",xb="visible",yb="wikipedia-search-input",zb="wikipedia-search-more",
Ab="wikipedia-search-results",Bb="wikipedia-search-results-header";function Cb(){return function(){}}function m(a){return function(){return this[a]}}function Db(a){return function(){return a}}var p;function Eb(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}
var Fb=typeof Object.defineProperties==k?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},Gb="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function Hb(a,b){if(b){var c=Gb;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&Fb(c,a,{configurable:!0,writable:!0,value:b})}}
Hb("String.prototype.endsWith",function(a){return a?a:function(a,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.endsWith must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.endsWith must not be a regular expression");var b=this+"";a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}});
Hb("Array.from",function(a){return a?a:function(a,c,d){c=null!=c?c:function(a){return a};var b=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(typeof f==k){a=f.call(a);for(var h=0;!(f=a.next()).done;)b.push(c.call(d,f.value,h++))}else for(f=a.length,h=0;h<f;h++)b.push(c.call(d,a[h],h));return b}});function Ib(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
Hb("WeakMap",function(a){function b(a){this.ea=(h+=Math.random()+1).toString();if(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];for(a=b?b.call(a):{next:Eb(a)};!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(){}function d(a){Ib(a,f)||Fb(a,f,{value:new c})}function e(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof c)return a;d(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,
3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d["delete"](b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(O){return!1}}())return a;var f="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var h=0;b.prototype.set=function(a,b){d(a);if(!Ib(a,f))throw Error("WeakMap key fail: "+a);a[f][this.ea]=b;return this};b.prototype.get=function(a){return Ib(a,f)?a[f][this.ea]:void 0};b.prototype.has=function(a){return Ib(a,f)&&Ib(a[f],this.ea)};b.prototype["delete"]=function(a){return Ib(a,
f)&&Ib(a[f],this.ea)?delete a[f][this.ea]:!1};return b});window.jstiming&&window.jstiming.load.tick("widgetJsStart");function Jb(){window.jstiming.load.tick("ol")}function Kb(a,b){a.addEventListener?a.addEventListener("load",b,!1):a.attachEvent("onload",b)}function Lb(a,b){return a.className&&-1!=a.className.indexOf(b)?a:a.parentNode?Lb(a.parentNode,b):null}function Mb(){window.jstiming.load.tick("prt");window.tickAboveFold&&window.tickAboveFold(this)}
window.BLOG_attachCsiOnload=function(a,b){if(window.jstiming){window.jstiming.load.tick("widgetJsEnd");window.jstiming.load.tick("prt");window.jstiming.load.name=a+"blogspot";a=document.getElementsByTagName("img");for(var c=0;c<a.length;c++)a[c].complete?null!=Lb(a[c],"post")&&Mb.apply(a[c]):null!=Lb(a[c],"post")&&Kb(a[c],Mb);Kb(window,Jb);a=function(){for(var a={},c=window.blogger_blog_id,f=["google_blogger_adsense_experiment_id","blogger_csi_e","blogger_templates_experiment_id","blogger_active_experiments"],
h=[],n=f.length,q=0;q<n;q++){var w=f[q];w in window&&h.push(window[w])}c&&(a.blogId=c);0<h.length&&(a.e=h.join(","));c=("https:"==document.location.protocol?"https:":"http:")+"//csi.gstatic.com/csi";window.jstiming.report(window.jstiming.load,a,b||c)};window.addEventListener?window.addEventListener("beforeunload",a,!1):window.attachEvent("onbeforeunload",a)}};var Nb=Nb||{},r=this;function t(a){return void 0!==a}function u(a){return typeof a==qb}var Ob=/^[\w+/_-]+[=]{0,2}$/,Pb=null;function Qb(){}function Rb(a){a.Lb=void 0;a.Ha=function(){return a.Lb?a.Lb:a.Lb=new a}}
function Sb(a){var b=typeof a;if(b==ib)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return ib;if("[object Array]"==c||typeof a.length==hb&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return k}else return"null";
else if(b==k&&"undefined"==typeof a.call)return ib;return b}function v(a){return"array"==Sb(a)}function Tb(a){var b=Sb(a);return"array"==b||b==ib&&typeof a.length==hb}function Ub(a){return Sb(a)==k}function Vb(a){var b=typeof a;return b==ib&&null!=a||b==k}var Wb="closure_uid_"+(1E9*Math.random()>>>0),Xb=0;function Yb(a,b,c){return a.call.apply(a.bind,arguments)}
function Zb(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?x=Yb:x=Zb;return x.apply(null,arguments)}
function $b(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ac=Date.now||function(){return+new Date};function y(a,b){a=a.split(".");var c=r;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&t(b)?c[d]=b:c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}}
function z(a,b){function c(){}c.prototype=b.prototype;a.O=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ki=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function bc(a){if(Error.captureStackTrace)Error.captureStackTrace(this,bc);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}z(bc,Error);bc.prototype.name="CustomError";var cc;var dc=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(u(a))return u(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},A=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=u(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},ec=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,b,void 0)}:function(a,b){for(var c=
a.length,d=[],e=0,f=u(a)?a.split(""):a,h=0;h<c;h++)if(h in f){var n=f[h];b.call(void 0,n,h,a)&&(d[e++]=n)}return d},fc=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=u(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},gc=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=u(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;
return!1};function hc(a){a:{var b=ic;for(var c=a.length,d=u(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:u(a)?a.charAt(b):a[b]}function jc(a,b){return 0<=dc(a,b)}function kc(a){if(!v(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function lc(a,b){b=dc(a,b);var c;(c=0<=b)&&Array.prototype.splice.call(a,b,1);return c}function mc(a){return Array.prototype.concat.apply([],arguments)}
function nc(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function oc(a,b,c,d){Array.prototype.splice.apply(a,pc(arguments,1))}function pc(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}
function qc(a){if(!arguments.length)return[];for(var b=[],c=arguments[0].length,d=1;d<arguments.length;d++)arguments[d].length<c&&(c=arguments[d].length);for(d=0;d<c;d++){for(var e=[],f=0;f<arguments.length;f++)e.push(arguments[f][d]);b.push(e)}return b}function rc(a,b){return mc.apply([],fc(a,b,void 0))};function sc(a){a=a.className;return u(a)&&a.match(/\S+/g)||[]}function tc(a,b){var c=sc(a);uc(c,pc(arguments,1));a.className=c.join(" ")}function vc(a,b){var c=sc(a);c=wc(c,pc(arguments,1));a.className=c.join(" ")}function uc(a,b){for(var c=0;c<b.length;c++)jc(a,b[c])||a.push(b[c])}function wc(a,b){return ec(a,function(a){return!jc(b,a)})}function xc(a,b,c){for(var d=sc(a),e=!1,f=0;f<d.length;f++)d[f]==b&&(oc(d,f--,1),e=!0);e&&(d.push(c),a.className=d.join(" "))}
function B(a,b){return jc(sc(a),b)};function yc(){return function(a){return 500<=zc(a)?(a.responseText.length?document.body.innerHTML=a.responseText:window.alert(LayoutsMessages.SERVER_ERROR),!1):!0}};function Ac(a,b){var c=C,d=a.ownerDocument;b=b._GetHelper();var e=b._GetData(),f=c._GetAllData();a=Bc(d,a,g,"widget-wrap1");a=Bc(d,a,g,"widget-wrap2");a=Bc(d,a,g,"widget-wrap3");var h=Bc(d,a,g,"widget-content");if(a=e.version&&1<e.version)h.className+=" visibility",Bc(d,h,g,"layout-widget-state "+(e.isVisible?xb:"not-visible")).setAttribute("title",e.visibilityTooltipMessage);var n=Bc(d,h,g,"layout-title");if(e[eb]){var q=Bc(d,h,g,db);q.appendChild(d.createTextNode(e[eb]));q.setAttribute("title",
e[db])}n.appendChild(d.createTextNode(e["layout-title"]));e=Bc(d,h,"a","editlink");var w=b._GenerateWidgetMetadata();e.setAttribute("href",w.quickEditUrl);e.target=wa;e.onclick=function(){return c._PopupConfig(d.getElementById(w.instanceId))};a&&(e.className+=" icon");e.appendChild(d.createTextNode(f.messages.edit||"Edit"))}function Bc(a,b,c,d){a=a.createElement(c);a.className=d;b.appendChild(a);return a};var D=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Cc(a){if(!Dc.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ec,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Fc,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Gc,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Hc,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ic,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Jc,"&#0;"));return a}
var Ec=/&/g,Fc=/</g,Gc=/>/g,Hc=/"/g,Ic=/'/g,Jc=/\x00/g,Dc=/[\x00&<>"']/;function Kc(a){for(var b=0;2>b;b++){var c="\"'".charAt(b);if(a.charAt(0)==c&&a.charAt(a.length-1)==c)return a.substring(1,a.length-1)}return a}var Lc=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};
function Mc(a,b){var c=0;a=D(String(a)).split(".");b=D(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",h=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;c=Nc(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||Nc(0==f[2].length,0==h[2].length)||Nc(f[2],h[2]);f=f[3];h=h[3]}while(0==c)}return c}function Nc(a,b){return a<b?-1:a>b?1:0}
function Oc(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function Pc(a){var b=u(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var Qc;a:{var Rc=r.navigator;if(Rc){var Sc=Rc.userAgent;if(Sc){Qc=Sc;break a}}Qc=""}function G(a){return-1!=Qc.indexOf(a)};function Tc(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Uc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Vc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Wc(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function Xc(a){for(var b in a)return!1;return!0}function Yc(a){var b={},c;for(c in a)b[c]=a[c];return b}var Zc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function $c(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Zc.length;f++)c=Zc[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function ad(){return G("Firefox")||G("FxiOS")}function bd(){return G("Safari")&&!(cd()||G("Coast")||G("Opera")||G(ea)||ad()||G("Silk")||G("Android"))}function cd(){return(G("Chrome")||G("CriOS"))&&!G(ea)}function dd(){return G("Android")&&!(cd()||ad()||G("Opera")||G("Silk"))};function ed(){return G("iPhone")&&!G("iPod")&&!G("iPad")};function fd(a){fd[" "](a);return a}fd[" "]=Qb;function gd(a,b){var c=H.Ef;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var H={mb:!1,lb:!1,Sb:!1,Wb:!1,ob:!1,pb:!1,Zc:!1};H.La=H.mb||H.lb||H.Sb||H.ob||H.Wb||H.pb;H.jf=function(){return Qc};H.Gb=function(){return r.navigator||null};H.li=function(){return H.Gb()};H.Ma=H.La?H.pb:G("Opera");H.R=H.La?H.mb:G("Trident")||G("MSIE");H.Ra=H.La?H.lb:G(ea);H.Vh=H.Ra||H.R;H.qb=H.La?H.Sb:G("Gecko")&&!(-1!=Qc.toLowerCase().indexOf("webkit")&&!G(ea))&&!(G("Trident")||G("MSIE"))&&!G(ea);H.va=H.La?H.Wb||H.ob:-1!=Qc.toLowerCase().indexOf("webkit")&&!G(ea);H.Cf=function(){return H.va&&G("Mobile")};
H.di=H.ob||H.Cf();H.Ad=H.va;H.Qd=function(){var a=H.Gb();return a&&a.platform||""};H.hi=H.Qd();H.Ub=!1;H.Xb=!1;H.Tb=!1;H.Yb=!1;H.Ka=!1;H.Ba=!1;H.Aa=!1;H.nb=!1;H.$c=!1;H.la=H.Ub||H.Xb||H.Tb||H.Yb||H.Ka||H.Ba||H.Aa||H.nb;H.bi=H.la?H.Ub:G("Macintosh");H.ii=H.la?H.Xb:G("Windows");H.Bf=function(){return G("Linux")||G("CrOS")};H.$h=H.la?H.Tb:H.Bf();H.Ff=function(){var a=H.Gb();return!!a&&-1!=(a.appVersion||"").indexOf("X11")};H.ji=H.la?H.Yb:H.Ff();H.Yc=H.la?H.Ka:G("Android");H.sd=H.la?H.Ba:ed();
H.rd=H.la?H.Aa:G("iPad");H.Yh=H.la?H.nb:G("iPod");H.Xh=H.la?H.Ba||H.Aa||H.nb:ed()||G("iPad")||G("iPod");var hd;H.la?hd=H.$c:hd=-1!=Qc.toLowerCase().indexOf("kaios");H.Zh=hd;H.Rd=function(){var a="",b=H.kf();b&&(a=b?b[1]:"");return H.R&&(b=H.tc(),null!=b&&b>parseFloat(a))?String(b):a};H.kf=function(){var a=H.jf();if(H.qb)return/rv:([^\);]+)(\)|;)/.exec(a);if(H.Ra)return/Edge\/([\d\.]+)/.exec(a);if(H.R)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(H.va)return/WebKit\/(\S+)/.exec(a);if(H.Ma)return/(?:Version)[ \/]?(\S+)/.exec(a)};
H.tc=function(){var a=r.document;return a?a.documentMode:void 0};H.VERSION=H.Rd();H.compare=function(a,b){return Mc(a,b)};H.Ef={};H.oa=function(a){return H.Zc||gd(a,function(){return 0<=Mc(H.VERSION,a)})};H.ni=H.oa;H.ib=function(a){return Number(H.ed)>=a};H.mi=H.ib;var id;var jd=r.document;id=jd&&H.R?H.tc()||("CSS1Compat"==jd.compatMode?parseInt(H.VERSION,10):5):void 0;H.ed=id;var kd=!H.R||H.ib(9),ld=H.R&&!H.oa("9"),md=H.R||H.Ma||H.va,nd=H.R;function od(a){return function(){return a}}function pd(){return null}function qd(a){return a};function rd(a,b){this.C=a===sd&&b||"";this.D=td}rd.prototype.ra=!0;rd.prototype.na=m("C");rd.prototype.toString=function(){return"Const{"+this.C+"}"};function ud(a){return a instanceof rd&&a.constructor===rd&&a.D===td?a.C:"type_error:Const"}var td={},sd={};function vd(){this.D="";this.F=wd}vd.prototype.ra=!0;vd.prototype.na=m("D");vd.prototype.Kb=!0;vd.prototype.C=Db(1);function xd(a){if(a instanceof vd&&a.constructor===vd&&a.F===wd)return a.D;Sb(a);return"type_error:TrustedResourceUrl"}var yd=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,wd={};function zd(a){var b=new vd;b.D=a;return b}
function Ad(a,b,c){if(null==c)return b;if(u(c))return c?a+encodeURIComponent(c):"";for(var d in c){var e=c[d];e=v(e)?e:[e];for(var f=0;f<e.length;f++){var h=e[f];null!=h&&(b||(b=a),b+=(b.length>a.length?"&":"")+encodeURIComponent(d)+"="+encodeURIComponent(String(h)))}}return b};function Bd(){this.D="";this.F=Cd}Bd.prototype.ra=!0;Bd.prototype.na=m("D");Bd.prototype.Kb=!0;Bd.prototype.C=Db(1);function Dd(a){if(a instanceof Bd&&a.constructor===Bd&&a.F===Cd)return a.D;Sb(a);return"type_error:SafeUrl"}var Ed=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Fd(a){if(a instanceof Bd)return a;a=typeof a==ib&&a.ra?a.na():String(a);Ed.test(a)||(a=qa);return Gd(a)}var Cd={};function Gd(a){var b=new Bd;b.D=a;return b}Gd("about:blank");function Hd(){this.C="";this.D=Id}Hd.prototype.ra=!0;var Id={};Hd.prototype.na=m("C");function Jd(a){if(a instanceof Hd&&a.constructor===Hd&&a.D===Id)return a.C;Sb(a);return"type_error:SafeStyle"}function Kd(a){var b=new Hd;b.C=a;return b}var Ld=Kd("");
function Md(a){if(a instanceof Bd)a='url("'+Dd(a).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';else if(a instanceof rd)a=ud(a);else{a=String(a);var b=a.replace(Nd,"$1").replace(Nd,"$1").replace(Od,"url");if(Pd.test(b)){if(b=!Qd.test(a)){for(var c=b=!0,d=0;d<a.length;d++){var e=a.charAt(d);"'"==e&&c?b=!b:'"'==e&&b&&(c=!c)}b=b&&c&&Rd(a)}a=b?Sd(a):"zClosurez"}else a="zClosurez"}return a}
function Rd(a){for(var b=!0,c=/^[-_a-zA-Z0-9]$/,d=0;d<a.length;d++){var e=a.charAt(d);if("]"==e){if(b)return!1;b=!0}else if("["==e){if(!b)return!1;b=!1}else if(!b&&!c.test(e))return!1}return b}var Pd=/^[-,."'%_!# a-zA-Z0-9\[\]]+$/,Od=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,Nd=/\b(hsl|hsla|rgb|rgba|matrix|calc|minmax|fit-content|repeat|(rotate|scale|translate)(X|Y|Z|3d)?)\([-+*/0-9a-z.%\[\], ]+\)/g,Qd=/\/\*/;
function Sd(a){return a.replace(Od,function(a,c,d,e){var b="";d=d.replace(/^(['"])(.*)\1$/,function(a,c,d){b=c;return d});a=Fd(d).na();return c+b+a+b+e})};function Td(){this.C="";this.D=Ud}Td.prototype.ra=!0;var Ud={};
function Vd(a,b){if(-1!=a.indexOf("<"))throw Error("Selector does not allow '<', got: "+a);var c=a.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(c))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+a);a:{for(var d={"(":")","[":"]"},e=[],f=0;f<c.length;f++){var h=c[f];if(d[h])e.push(d[h]);else if(Wc(d,h)&&e.pop()!=h){c=!1;break a}}c=0==e.length}if(!c)throw Error("() and [] in selector must be balanced, got: "+a);
if(!(b instanceof Hd)){c="";for(var n in b){if(!/^[-_a-zA-Z0-9]+$/.test(n))throw Error("Name allows only [-_a-zA-Z0-9], got: "+n);d=b[n];null!=d&&(d=v(d)?fc(d,Md).join(" "):Md(d),c+=n+":"+d+";")}b=c?Kd(c):Ld}a=a+"{"+Jd(b)+"}";return Wd(a)}function Xd(a){function b(a){v(a)?A(a,b):c+=Yd(a)}var c="";A(arguments,b);return Wd(c)}Td.prototype.na=m("C");function Yd(a){if(a instanceof Td&&a.constructor===Td&&a.D===Ud)return a.C;Sb(a);return"type_error:SafeStyleSheet"}
function Wd(a){var b=new Td;b.C=a;return b}var Zd=Wd("");function $d(){this.D="";this.G=ae;this.F=null}$d.prototype.Kb=!0;$d.prototype.C=m("F");$d.prototype.ra=!0;$d.prototype.na=m("D");function be(a){if(a instanceof $d&&a.constructor===$d&&a.G===ae)return a.D;Sb(a);return"type_error:SafeHtml"}function ce(a){if(a instanceof $d)return a;var b=typeof a==ib,c=null;b&&a.Kb&&(c=a.C());a=Cc(b&&a.ra?a.na():String(a));return de(a,c)}
function ee(a){function b(a){v(a)?A(a,b):(a=ce(a),d+=be(a),a=a.C(),0==c?c=a:0!=a&&c!=a&&(c=null))}var c=0,d="";A(arguments,b);return de(d,c)}var ae={};function de(a,b){var c=new $d;c.D=a;c.F=b;return c}de("<!DOCTYPE html>",0);de("",0);var fe=de("<br>",0);var ge=function(a){var b=!1,c;return function(){b||(c=a(),b=!0);return c}}(function(){var a=document.createElement(g);a.innerHTML="<div><div></div></div>";var b=a.firstChild.firstChild;a.innerHTML="";return!b.parentElement});function he(a,b){if(ge())for(;a.lastChild;)a.removeChild(a.lastChild);a.innerHTML=b}
function ie(a,b){a.src=xd(b);if(null===Pb)b:{b=r.document;if((b=b.querySelector&&b.querySelector("script[nonce]"))&&(b=b.nonce||b.getAttribute("nonce"))&&Ob.test(b)){Pb=b;break b}Pb=""}b=Pb;b&&a.setAttribute("nonce",b)}function je(a){var b=window.location;a instanceof Bd||a instanceof Bd||(a=typeof a==ib&&a.ra?a.na():String(a),Ed.test(a)||(a=qa),a=Gd(a));b.href=Dd(a)};function ke(a,b){this.x=t(a)?a:0;this.y=t(b)?b:0}ke.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};ke.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function le(a,b){this.width=a;this.height=b}le.prototype.ja=function(){return!(this.width*this.height)};le.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};le.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function I(a){return u(a)?document.getElementById(a):a}function me(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):ne(document,"*",a,b)}function K(a,b){var c=b||document;if(c.getElementsByClassName)a=c.getElementsByClassName(a)[0];else{c=document;var d=b||c;a=d.querySelectorAll&&d.querySelector&&a?d.querySelector(a?"."+a:""):ne(c,"*",a,b)[0]||null}return a||null}
function ne(a,b,c,d){a=d||a;b=b&&"*"!=b?String(b).toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,h;h=a[f];f++)b==h.nodeName&&(d[e++]=h);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;h=a[f];f++)b=h.className,typeof b.split==k&&jc(b.split(/\s+/),c)&&(d[e++]=h);d.length=e;return d}return a}
function oe(a,b){Tc(b,function(b,d){b&&typeof b==ib&&b.ra&&(b=b.na());d==rb?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:pe.hasOwnProperty(d)?a.setAttribute(pe[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}
var pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function qe(a,b,c){return re(document,arguments)}
function re(a,b){var c=String(b[0]),d=b[1];if(!kd&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Cc(d.name),'"');if(d.type){c.push(' type="',Cc(d.type),'"');var e={};$c(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(u(d)?c.className=d:v(d)?c.className=d.join(" "):oe(c,d));2<b.length&&se(a,c,b);return c}
function se(a,b,c){function d(c){c&&b.appendChild(u(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!Tb(f)||Vb(f)&&0<f.nodeType?d(f):A(te(f)?nc(f):f,d)}}function ue(a){for(var b;b=a.firstChild;)a.removeChild(b)}function ve(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function we(a){var b;if(md&&!(H.R&&H.oa("9")&&!H.oa("10")&&r.SVGElement&&a instanceof r.SVGElement)&&(b=a.parentElement))return b;b=a.parentNode;return Vb(b)&&1==b.nodeType?b:null}
function xe(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function ye(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ze(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=String(b);else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else ue(a),a.appendChild(ye(a).createTextNode(String(b)))}var Ae={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Be={IMG:" ",BR:"\n"};
function Ce(a,b,c){if(!(a.nodeName in Ae))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Be)b.push(Be[a.nodeName]);else for(a=a.firstChild;a;)Ce(a,b,c),a=a.nextSibling}function te(a){if(a&&typeof a.length==hb){if(Vb(a))return typeof a.item==k||typeof a.item==qb;if(Ub(a))return typeof a.item==k}return!1}
function De(a,b,c,d){if(!b&&!c)return null;var e=b?String(b).toUpperCase():null;return Ee(a,function(a){return(!e||a.nodeName==e)&&(!c||u(a.className)&&jc(a.className.split(/\s+/),c))},d)}function Ee(a,b,c){for(var d=0;a&&(null==c||d<=c);){if(b(a))return a;a=a.parentNode;d++}return null}function Fe(){this.D=r.document||document}Fe.prototype.Oa=function(){return u(void 0)?this.D.getElementById(void 0):void 0};Fe.prototype.C=function(a,b,c){return re(this.D,arguments)};
Fe.prototype.appendChild=function(a,b){a.appendChild(b)};function Ge(){this.J=this.J;this.Y=this.Y}Ge.prototype.J=!1;Ge.prototype.wa=function(){this.J||(this.J=!0,this.aa())};Ge.prototype.aa=function(){if(this.Y)for(;this.Y.length;)this.Y.shift()()};var He=!H.R||H.ib(9),Ie=H.R&&!H.oa("9"),Je=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{r.addEventListener("test",Qb,b),r.removeEventListener("test",Qb,b)}catch(c){}return a}();function Ke(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.xa=!1;this.Vc=!0}Ke.prototype.stopPropagation=function(){this.xa=!0};Ke.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Vc=!1};function Le(a,b){Ke.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.clientY=this.clientX=0;this.key="";this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.C=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(H.qb){a:{try{fd(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:
"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY);this.keyCode=a.keyCode||0;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.C=a;a.defaultPrevented&&this.preventDefault()}}z(Le,Ke);
Le.prototype.stopPropagation=function(){Le.O.stopPropagation.call(this);this.C.stopPropagation?this.C.stopPropagation():this.C.cancelBubble=!0};Le.prototype.preventDefault=function(){Le.O.preventDefault.call(this);var a=this.C;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Ie)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Me="closure_listenable_"+(1E6*Math.random()|0);function Ne(a){return!(!a||!a[Me])}var Oe=0;function Pe(a,b,c,d,e){this.listener=a;this.C=null;this.src=b;this.type=c;this.capture=!!d;this.hb=e;this.key=++Oe;this.Ia=this.$a=!1}function Qe(a){a.Ia=!0;a.listener=null;a.C=null;a.src=null;a.hb=null};function Re(a){this.src=a;this.C={};this.D=0}Re.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.C[f];a||(a=this.C[f]=[],this.D++);var h=Se(a,b,d,e);-1<h?(b=a[h],c||(b.$a=!1)):(b=new Pe(b,this.src,f,!!d,e),b.$a=c,a.push(b));return b};function Te(a,b){var c=b.type;if(!(c in a.C))return!1;var d=lc(a.C[c],b);d&&(Qe(b),0==a.C[c].length&&(delete a.C[c],a.D--));return d}function Ue(a){var b=0,c;for(c in a.C){for(var d=a.C[c],e=0;e<d.length;e++)++b,Qe(d[e]);delete a.C[c];a.D--}}
function Ve(a,b,c,d,e){a=a.C[b.toString()];b=-1;a&&(b=Se(a,c,d,e));return-1<b?a[b]:null}function Se(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.Ia&&f.listener==b&&f.capture==!!c&&f.hb==d)return e}return-1};var We="closure_lm_"+(1E6*Math.random()|0),Xe={},Ye=0;function L(a,b,c,d,e){if(d&&d.once)return Ze(a,b,c,d,e);if(v(b)){for(var f=0;f<b.length;f++)L(a,b[f],c,d,e);return null}c=bf(c);return Ne(a)?a.ha.add(String(b),c,!1,Vb(d)?!!d.capture:!!d,e):cf(a,b,c,!1,d,e)}
function cf(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=Vb(e)?!!e.capture:!!e,n=df(a);n||(a[We]=n=new Re(a));c=n.add(b,c,d,h,f);if(c.C)return c;d=ef();c.C=d;d.src=a;d.listener=c;if(a.addEventListener)Je||(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ff(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Ye++;return c}
function ef(){var a=gf,b=He?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Ze(a,b,c,d,e){if(v(b)){for(var f=0;f<b.length;f++)Ze(a,b[f],c,d,e);return null}c=bf(c);return Ne(a)?a.ha.add(String(b),c,!0,Vb(d)?!!d.capture:!!d,e):cf(a,b,c,!0,d,e)}
function hf(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)hf(a,b[f],c,d,e);else d=Vb(d)?!!d.capture:!!d,c=bf(c),Ne(a)?(a=a.ha,b=String(b).toString(),b in a.C&&(f=a.C[b],c=Se(f,c,d,e),-1<c&&(Qe(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.C[b],a.D--)))):a&&(a=df(a))&&(c=Ve(a,b,c,d,e))&&jf(c)}
function jf(a){if(typeof a==hb||!a||a.Ia)return!1;var b=a.src;if(Ne(b))return Te(b.ha,a);var c=a.type,d=a.C;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ff(c),d):b.addListener&&b.removeListener&&b.removeListener(d);Ye--;(c=df(b))?(Te(c,a),0==c.D&&(c.src=null,b[We]=null)):Qe(a);return!0}function kf(a){if(a)if(Ne(a))a.ha&&Ue(a.ha);else if(a=df(a)){var b=0,c;for(c in a.C)for(var d=a.C[c].concat(),e=0;e<d.length;++e)jf(d[e])&&++b}}
function ff(a){return a in Xe?Xe[a]:Xe[a]="on"+a}function lf(a,b,c,d){var e=!0;if(a=df(a))if(b=a.C[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.Ia&&(f=mf(f,d),e=e&&!1!==f)}return e}function mf(a,b){var c=a.listener,d=a.hb||a.src;a.$a&&jf(a);return c.call(d,b)}
function gf(a,b){if(a.Ia)return!0;if(!He){if(!b)a:{b=["window","event"];for(var c=r,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new Le(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(h){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.xa&&0<=e;e--){b.currentTarget=d[e];var f=lf(d[e],a,!0,b);c=c&&f}for(e=0;!b.xa&&e<d.length;e++)b.currentTarget=
d[e],f=lf(d[e],a,!1,b),c=c&&f}return c}return mf(a,new Le(b,this))}function df(a){a=a[We];return a instanceof Re?a:null}var nf="__closure_events_fn_"+(1E9*Math.random()>>>0);function bf(a){if(Ub(a))return a;a[nf]||(a[nf]=function(b){return a.handleEvent(b)});return a[nf]};function of(a,b){this.F=a;this.G=b;this.D=0;this.C=null}of.prototype.get=function(){if(0<this.D){this.D--;var a=this.C;this.C=a.next;a.next=null}else a=this.F();return a};function pf(a,b){a.G(b);100>a.D&&(a.D++,b.next=a.C,a.C=b)};function qf(a){r.setTimeout(function(){throw a;},0)}var rf;
function sf(){var a=r.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!G("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display=l;a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=x(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!G("Trident")&&!G("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(t(c.next)){c=c.next;var a=c.dc;c.dc=null;a()}};return function(a){d.next={dc:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement(ia)?function(a){var b=document.createElement(ia);b.onreadystatechange=function(){b.onreadystatechange=
null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){r.setTimeout(a,0)}};function tf(){this.D=this.C=null}var vf=new of(function(){return new uf},function(a){a.reset()});tf.prototype.add=function(a,b){var c=vf.get();c.set(a,b);this.D?this.D.next=c:this.C=c;this.D=c};function wf(){var a=xf,b=null;a.C&&(b=a.C,a.C=a.C.next,a.C||(a.D=null),b.next=null);return b}function uf(){this.next=this.D=this.C=null}uf.prototype.set=function(a,b){this.C=a;this.D=b;this.next=null};uf.prototype.reset=function(){this.next=this.D=this.C=null};function yf(a,b){zf||Af();Bf||(zf(),Bf=!0);xf.add(a,b)}var zf;function Af(){if(r.Promise&&r.Promise.resolve){var a=r.Promise.resolve(void 0);zf=function(){a.then(Cf)}}else zf=function(){var a=Cf;!Ub(r.setImmediate)||r.Window&&r.Window.prototype&&!G(ea)&&r.Window.prototype.setImmediate==r.setImmediate?(rf||(rf=sf()),rf(a)):r.setImmediate(a)}}var Bf=!1,xf=new tf;function Cf(){for(var a;a=wf();){try{a.C.call(a.D)}catch(b){qf(b)}pf(vf,a)}Bf=!1};function M(){Ge.call(this);this.ha=new Re(this);this.Ta=this;this.$=null}z(M,Ge);M.prototype[Me]=!0;M.prototype.Nb=function(a){this.$=a};M.prototype.addEventListener=function(a,b,c,d){L(this,a,b,c,d)};M.prototype.removeEventListener=function(a,b,c,d){hf(this,a,b,c,d)};
function N(a,b){var c=a.$;if(c){var d=[];for(var e=1;c;c=c.$)d.push(c),++e}a=a.Ta;c=b.type||b;u(b)?b=new Ke(b,a):b instanceof Ke?b.target=b.target||a:(e=b,b=new Ke(c,a),$c(b,e));e=!0;if(d)for(var f=d.length-1;!b.xa&&0<=f;f--){var h=b.currentTarget=d[f];e=Df(h,c,!0,b)&&e}b.xa||(h=b.currentTarget=a,e=Df(h,c,!0,b)&&e,b.xa||(e=Df(h,c,!1,b)&&e));if(d)for(f=0;!b.xa&&f<d.length;f++)h=b.currentTarget=d[f],e=Df(h,c,!1,b)&&e}M.prototype.aa=function(){M.O.aa.call(this);this.ha&&Ue(this.ha);this.$=null};
function Df(a,b,c,d){b=a.ha.C[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.Ia&&h.capture==c){var n=h.listener,q=h.hb||h.src;h.$a&&Te(a.ha,h);e=!1!==n.call(q,d)&&e}}return e&&0!=d.Vc};function Ef(a){Ff();return zd(a)}var Ff=Qb;function Gf(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function Hf(a){this.C=0;this.L=void 0;this.G=this.D=this.F=null;this.J=this.K=!1;if(a!=Qb)try{var b=this;a.call(void 0,function(a){If(b,2,a)},function(a){If(b,3,a)})}catch(c){If(this,3,c)}}function Jf(){this.next=this.F=this.D=this.G=this.C=null;this.J=!1}Jf.prototype.reset=function(){this.F=this.D=this.G=this.C=null;this.J=!1};var Kf=new of(function(){return new Jf},function(a){a.reset()});function Lf(a,b,c){var d=Kf.get();d.G=a;d.D=b;d.F=c;return d}
Hf.prototype.then=function(a,b,c){return Mf(this,Ub(a)?a:null,Ub(b)?b:null,c)};Hf.prototype.$goog_Thenable=!0;Hf.prototype.cancel=function(a){0==this.C&&yf(function(){var b=new Nf(a);Of(this,b)},this)};function Of(a,b){if(0==a.C)if(a.F){var c=a.F;if(c.D){for(var d=0,e=null,f=null,h=c.D;h&&(h.J||(d++,h.C==a&&(e=h),!(e&&1<d)));h=h.next)e||(f=h);e&&(0==c.C&&1==d?Of(c,b):(f?(d=f,d.next==c.G&&(c.G=d),d.next=d.next.next):Pf(c),Qf(c,e,3,b)))}a.F=null}else If(a,3,b)}
function Rf(a,b){a.D||2!=a.C&&3!=a.C||Sf(a);a.G?a.G.next=b:a.D=b;a.G=b}function Mf(a,b,c,d){var e=Lf(null,null,null);e.C=new Hf(function(a,h){e.G=b?function(c){try{var e=b.call(d,c);a(e)}catch(w){h(w)}}:a;e.D=c?function(b){try{var e=c.call(d,b);!t(e)&&b instanceof Nf?h(b):a(e)}catch(w){h(w)}}:h});e.C.F=a;Rf(a,e);return e.C}Hf.prototype.N=function(a){this.C=0;If(this,2,a)};Hf.prototype.T=function(a){this.C=0;If(this,3,a)};
function If(a,b,c){if(0==a.C){a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself"));a.C=1;a:{var d=c,e=a.N,f=a.T;if(d instanceof Hf){Rf(d,Lf(e||Qb,f||null,a));var h=!0}else if(Gf(d))d.then(e,f,a),h=!0;else{if(Vb(d))try{var n=d.then;if(Ub(n)){Tf(d,n,e,f,a);h=!0;break a}}catch(q){f.call(a,q);h=!0;break a}h=!1}}h||(a.L=c,a.C=b,a.F=null,Sf(a),3!=b||c instanceof Nf||Uf(a,c))}}
function Tf(a,b,c,d,e){function f(a){n||(n=!0,d.call(e,a))}function h(a){n||(n=!0,c.call(e,a))}var n=!1;try{b.call(a,h,f)}catch(q){f(q)}}function Sf(a){a.K||(a.K=!0,yf(a.M,a))}function Pf(a){var b=null;a.D&&(b=a.D,a.D=b.next,b.next=null);a.D||(a.G=null);return b}Hf.prototype.M=function(){for(var a;a=Pf(this);)Qf(this,a,this.C,this.L);this.K=!1};
function Qf(a,b,c,d){if(3==c&&b.D&&!b.J)for(;a&&a.J;a=a.F)a.J=!1;if(b.C)b.C.F=null,Vf(b,c,d);else try{b.J?b.G.call(b.F):Vf(b,c,d)}catch(e){Wf.call(null,e)}pf(Kf,b)}function Vf(a,b,c){2==b?a.G.call(a.F,c):a.D&&a.D.call(a.F,c)}function Uf(a,b){a.J=!0;yf(function(){a.J&&Wf.call(null,b)})}var Wf=qf;function Nf(a){bc.call(this,a)}z(Nf,bc);Nf.prototype.name="cancel";function Xf(a,b){M.call(this);this.D=a||1;this.C=b||r;this.F=x(this.Nh,this);this.G=ac()}z(Xf,M);p=Xf.prototype;p.fb=!1;p.qa=null;p.Nh=function(){if(this.fb){var a=ac()-this.G;0<a&&a<.8*this.D?this.qa=this.C.setTimeout(this.F,this.D-a):(this.qa&&(this.C.clearTimeout(this.qa),this.qa=null),N(this,"tick"),this.fb&&(Yf(this),this.start()))}};p.start=function(){this.fb=!0;this.qa||(this.qa=this.C.setTimeout(this.F,this.D),this.G=ac())};function Yf(a){a.fb=!1;a.qa&&(a.C.clearTimeout(a.qa),a.qa=null)}
p.aa=function(){Xf.O.aa.call(this);Yf(this);delete this.C};function Zf(a,b,c){if(Ub(a))c&&(a=x(a,c));else if(a&&typeof a.handleEvent==k)a=x(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:r.setTimeout(a,b||0)};function $f(){this.K={};this.C={};this.F={};this.G=null;this.D=[]}Rb($f);function ag(a){var b=$f.Ha(),c=b.K,d=b.C;d.lightbox?a(d.lightbox[1]):c.lightbox?c.lightbox.push([1,a]):(c.lightbox=[[1,a]],u(b.G)?bg(b,"lightbox"):b.D.push("lightbox"))}function cg(){return function(){var a=arguments;ag(function(b){b.apply(null,a)})}}$f.prototype.J=function(a,b){return a+"_"+b+".js"};function dg(a){eval(a)}
function eg(a,b,c){y("__gjsload__",dg);a.G=b.replace(/\.js$/,"");c&&(a.J=c);A(a.D,function(a){bg(this,a)},a);kc(a.D)}function bg(a,b){Zf(function(){if(!this.C[b]){var a=this.J(this.G,b),d=Wc(this.F,a);this.F[b]=a;d||(d=qe(ia,{type:tb}),ie(d,Ef(a)),document.body.appendChild(d))}},0,a)};function fg(a){Ge.call(this);this.D=a;this.C={}}z(fg,Ge);var gg=[];function hg(a,b,c,d){v(c)||(c&&(gg[0]=c.toString()),c=gg);for(var e=0;e<c.length;e++){var f=L(b,c[e],d||a.handleEvent,!1,a.D||a);if(!f)break;a.C[f.key]=f}}function ig(a,b,c,d,e,f){if(v(c))for(var h=0;h<c.length;h++)ig(a,b,c[h],d,e,f);else d=d||a.handleEvent,e=Vb(e)?!!e.capture:!!e,f=f||a.D||a,d=bf(d),e=!!e,c=Ne(b)?Ve(b.ha,String(c),d,e,f):b?(b=df(b))?Ve(b,c,d,e,f):null:null,c&&(jf(c),delete a.C[c.key])}
function jg(a){Tc(a.C,function(a,c){this.C.hasOwnProperty(c)&&jf(a)},a);a.C={}}fg.prototype.aa=function(){fg.O.aa.call(this);jg(this)};fg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function kg(a){return/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function lg(a){a=String(a);if(kg(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function mg(){}mg.prototype.C=null;function ng(a){var b;(b=a.C)||(b={},og(a)&&(b[0]=!0,b[1]=!0),b=a.C=b);return b};var pg;function qg(){}z(qg,mg);function rg(a){return(a=og(a))?new ActiveXObject(a):new XMLHttpRequest}function og(a){if(!a.D&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.D=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.D}pg=new qg;function sg(a,b){this.D={};this.C=[];this.F=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof sg)for(c=a.ia(),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])}p=sg.prototype;p.X=m("F");p.ca=function(){tg(this);for(var a=[],b=0;b<this.C.length;b++)a.push(this.D[this.C[b]]);return a};p.ia=function(){tg(this);return this.C.concat()};
p.ja=function(){return 0==this.F};function ug(a,b){return vg(a.D,b)?(delete a.D[b],a.F--,a.C.length>2*a.F&&tg(a),!0):!1}function tg(a){if(a.F!=a.C.length){for(var b=0,c=0;b<a.C.length;){var d=a.C[b];vg(a.D,d)&&(a.C[c++]=d);b++}a.C.length=c}if(a.F!=a.C.length){var e={};for(c=b=0;b<a.C.length;)d=a.C[b],vg(e,d)||(a.C[c++]=d,e[d]=1),b++;a.C.length=c}}p.get=function(a,b){return vg(this.D,a)?this.D[a]:b};p.set=function(a,b){vg(this.D,a)||(this.F++,this.C.push(a));this.D[a]=b};
p.forEach=function(a,b){for(var c=this.ia(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};function vg(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function wg(a){if(a.ca&&typeof a.ca==k)return a.ca();if(u(a))return a.split("");if(Tb(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Uc(a)}function xg(a,b){if(a.forEach&&typeof a.forEach==k)a.forEach(b,void 0);else if(Tb(a)||u(a))A(a,b,void 0);else{if(a.ia&&typeof a.ia==k)var c=a.ia();else if(a.ca&&typeof a.ca==k)c=void 0;else if(Tb(a)||u(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=Vc(a);d=wg(a);e=d.length;for(var f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}};var yg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zg(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}};function Ag(a){M.call(this);this.headers=new sg;this.fa=a||null;this.D=!1;this.da=this.C=null;this.Fa="";this.K=0;this.G=this.Ea=this.T=this.ma=!1;this.N=0;this.W=null;this.M="";this.za=this.L=!1}z(Ag,M);var Bg=/^https?$/i,Cg=["POST","PUT"],Dg=[];function Eg(a,b,c,d){var e=new Ag;Dg.push(e);b&&e.ha.add(Ca,b,!1,void 0,void 0);e.ha.add(jb,e.Md,!0,void 0,void 0);Fg(e,a,c,d,void 0)}p=Ag.prototype;p.Md=function(){this.wa();lc(Dg,this)};p.xc=m("M");p.Ec=m("L");
function Fg(a,b,c,d,e){if(a.C)throw Error("[goog.net.XhrIo] Object is active with another request="+a.Fa+"; newUri="+b);c=c?c.toUpperCase():ha;a.Fa=b;a.K=0;a.ma=!1;a.D=!0;a.C=a.fa?rg(a.fa):rg(pg);a.da=a.fa?ng(a.fa):ng(pg);a.C.onreadystatechange=x(a.Hc,a);try{a.Ea=!0,a.C.open(c,String(b),!0),a.Ea=!1}catch(h){Gg(a);return}b=d||"";var f=new sg(a.headers);e&&xg(e,function(a,b){f.set(b,a)});e=hc(f.ia());d=r.FormData&&b instanceof r.FormData;!jc(Cg,c)||e||d||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");
f.forEach(function(a,b){this.C.setRequestHeader(b,a)},a);a.M&&(a.C.responseType=a.M);"withCredentials"in a.C&&a.C.withCredentials!==a.L&&(a.C.withCredentials=a.L);try{Hg(a),0<a.N&&(a.za=Ig(a.C),a.za?(a.C.timeout=a.N,a.C.ontimeout=x(a.ua,a)):a.W=Zf(a.ua,a.N,a)),a.T=!0,a.C.send(b),a.T=!1}catch(h){Gg(a)}}function Ig(a){return H.R&&H.oa(9)&&typeof a.timeout==hb&&t(a.ontimeout)}function ic(a){return"content-type"==a.toLowerCase()}
p.ua=function(){"undefined"!=typeof Nb&&this.C&&(this.K=8,N(this,"timeout"),this.abort(8))};function Gg(a){a.D=!1;a.C&&(a.G=!0,a.C.abort(),a.G=!1);a.K=5;Jg(a);Kg(a)}function Jg(a){a.ma||(a.ma=!0,N(a,Ca),N(a,Ta))}p.abort=function(a){this.C&&this.D&&(this.D=!1,this.G=!0,this.C.abort(),this.G=!1,this.K=a||7,N(this,Ca),N(this,"abort"),Kg(this))};p.aa=function(){this.C&&(this.D&&(this.D=!1,this.G=!0,this.C.abort(),this.G=!1),Kg(this,!0));Ag.O.aa.call(this)};
p.Hc=function(){this.J||(this.Ea||this.T||this.G?Lg(this):this.Sf())};p.Sf=function(){Lg(this)};function Lg(a){if(a.D&&"undefined"!=typeof Nb&&(!a.da[1]||4!=(a.C?a.C.readyState:0)||2!=Mg(a)))if(a.T&&4==(a.C?a.C.readyState:0))Zf(a.Hc,0,a);else if(N(a,"readystatechange"),4==(a.C?a.C.readyState:0)){a.D=!1;try{Ng(a)?(N(a,Ca),N(a,sb)):(a.K=6,Jg(a))}finally{Kg(a)}}}function Kg(a,b){if(a.C){Hg(a);var c=a.C,d=a.da[0]?Qb:null;a.C=null;a.da=null;b||N(a,jb);try{c.onreadystatechange=d}catch(e){}}}
function Hg(a){a.C&&a.za&&(a.C.ontimeout=null);a.W&&(r.clearTimeout(a.W),a.W=null)}function Ng(a){var b=Mg(a);a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=String(a.Fa).match(yg)[1]||null,!a&&r.self&&r.self.location&&(a=r.self.location.protocol,a=a.substr(0,a.length-1)),b=!Bg.test(a?a.toLowerCase():"");c=b}return c}function Mg(a){try{return 2<(a.C?a.C.readyState:0)?a.C.status:-1}catch(b){return-1}}
function Og(a){try{return a.C?a.C.responseText:""}catch(b){return""}};function Pg(){this.D=[];this.C=[]}function Qg(a){0==a.D.length&&(a.D=a.C,a.D.reverse(),a.C=[]);return a.D.pop()}Pg.prototype.X=function(){return this.D.length+this.C.length};Pg.prototype.ja=function(){return 0==this.D.length&&0==this.C.length};Pg.prototype.ca=function(){for(var a=[],b=this.D.length-1;0<=b;--b)a.push(this.D[b]);var c=this.C.length;for(b=0;b<c;++b)a.push(this.C[b]);return a};function Rg(){this.C=new sg}function Sg(a){var b=typeof a;return b==ib&&a||b==k?"o"+(a[Wb]||(a[Wb]=++Xb)):b.substr(0,1)+a}Rg.prototype.X=function(){return this.C.X()};Rg.prototype.add=function(a){this.C.set(Sg(a),a)};Rg.prototype.ja=function(){return this.C.ja()};Rg.prototype.ca=function(){return this.C.ca()};function Tg(a,b){Ge.call(this);this.M=a||0;this.F=b||10;if(this.M>this.F)throw Error("[goog.structs.Pool] Min can not be greater than max");this.C=new Pg;this.D=new Rg;this.delay=0;this.K=null;this.Ua()}z(Tg,Ge);p=Tg.prototype;p.cb=function(){var a=ac();if(!(null!=this.K&&a-this.K<this.delay)){for(var b;0<this.C.X()&&(b=Qg(this.C),!this.Mb(b));)this.Ua();!b&&this.X()<this.F&&(b=this.Db());b&&(this.K=a,this.D.add(b));return b}};function Ug(a,b){ug(a.D.C,Sg(b))&&a.rb(b)}
p.rb=function(a){ug(this.D.C,Sg(a));this.Mb(a)&&this.X()<this.F?this.C.C.push(a):Vg(a)};p.Ua=function(){for(var a=this.C;this.X()<this.M;){var b=this.Db();a.C.push(b)}for(;this.X()>this.F&&0<this.C.X();)Vg(Qg(a))};p.Db=function(){return{}};function Vg(a){if(typeof a.wa==k)a.wa();else for(var b in a)a[b]=null}p.Mb=function(a){return typeof a.Ld==k?a.Ld():!0};p.X=function(){return this.C.X()+this.D.X()};p.ja=function(){return this.C.ja()&&this.D.ja()};
p.aa=function(){Tg.O.aa.call(this);if(0<this.D.X())throw Error("[goog.structs.Pool] Objects not released");delete this.D;for(var a=this.C;!a.ja();)Vg(Qg(a));delete this.C};function Wg(a,b){this.C=a;this.D=b};function Xg(a){this.C=[];if(a)a:{if(a instanceof Xg){var b=a.ia();a=a.ca();if(0>=this.X()){for(var c=this.C,d=0;d<b.length;d++)c.push(new Wg(b[d],a[d]));break a}}else b=Vc(a),a=Uc(a);for(d=0;d<b.length;d++)Yg(this,b[d],a[d])}}function Yg(a,b,c){var d=a.C;d.push(new Wg(b,c));b=d.length-1;a=a.C;for(c=a[b];0<b;)if(d=b-1>>1,a[d].C>c.C)a[b]=a[d],b=d;else break;a[b]=c}Xg.prototype.ca=function(){for(var a=this.C,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].D);return b};
Xg.prototype.ia=function(){for(var a=this.C,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].C);return b};Xg.prototype.X=function(){return this.C.length};Xg.prototype.ja=function(){return 0==this.C.length};function Zg(){Xg.call(this)}z(Zg,Xg);function $g(a,b){this.L=void 0;this.G=new Zg;Tg.call(this,a,b)}z($g,Tg);p=$g.prototype;p.cb=function(a,b){if(!a)return(a=$g.O.cb.call(this))&&this.delay&&(this.L=r.setTimeout(x(this.gb,this),this.delay)),a;Yg(this.G,t(b)?b:100,a);this.gb()};
p.gb=function(){for(var a=this.G;0<a.X();){var b=this.cb();if(b){var c=a,d=c.C,e=d.length;var f=d[0];if(0>=e)f=void 0;else{if(1==e)kc(d);else{d[0]=d.pop();d=0;c=c.C;e=c.length;for(var h=c[d];d<e>>1;){var n=2*d+1,q=2*d+2;n=q<e&&c[q].C<c[n].C?q:n;if(c[n].C>h.C)break;c[d]=c[n];d=n}c[d]=h}f=f.D}f.apply(this,[b])}else break}};p.rb=function(a){$g.O.rb.call(this,a);this.gb()};p.Ua=function(){$g.O.Ua.call(this);this.gb()};p.aa=function(){$g.O.aa.call(this);r.clearTimeout(this.L);kc(this.G.C);this.G=null};function ah(a,b,c,d){this.N=a;this.T=!!d;$g.call(this,b,c)}z(ah,$g);ah.prototype.Db=function(){var a=new Ag,b=this.N;b&&b.forEach(function(b,d){a.headers.set(d,b)});this.T&&(a.L=!0);return a};ah.prototype.Mb=function(a){return!a.J&&!a.C};function bh(a,b,c,d,e,f){M.call(this);this.G=t(a)?a:1;this.K=t(e)?Math.max(0,e):0;this.L=!!f;this.D=new ah(b,c,d,f);this.C=new sg;this.F=new fg(this)}z(bh,M);var ch=[jb,Ca,sb,Ta,"abort","timeout"];function dh(a,b,c,d,e,f){if(a.C.get(b))throw Error("[goog.net.XhrManager] ID in use");c=new eh(c,x(a.N,a,b),d,e,f,t(void 0)?void 0:a.G,t(void 0)?void 0:a.L);a.C.set(b,c);b=x(a.M,a,b);a.D.cb(b,null)}
bh.prototype.abort=function(a,b){var c=this.C.get(a);if(c){var d=c.kb;c.Zb=!0;b&&(d&&(ig(this.F,d,ch,c.Pb),Ze(d,jb,function(){Ug(this.D,d)},!1,this)),ug(this.C,a));d&&d.abort()}};bh.prototype.M=function(a,b){var c=this.C.get(a);c&&!c.kb?(hg(this.F,b,ch,c.Pb),b.N=Math.max(0,this.K),b.M=c.xc(),b.L=c.Ec(),c.kb=b,N(this,new fh(jb,this,a,b)),gh(this,a,b),c.Zb&&b.abort()):Ug(this.D,b)};
bh.prototype.N=function(a,b){var c=b.target;switch(b.type){case jb:gh(this,a,c);break;case Ca:a:{var d=this.C.get(a);if(7==c.K||Ng(c)||d.Xa>d.Ib)if(N(this,new fh(Ca,this,a,c)),d&&(d.gc=!0,d.fc)){a=d.fc.call(c,b);break a}a=null}return a;case sb:N(this,new fh(sb,this,a,c));break;case "timeout":case Ta:b=this.C.get(a);b.Xa>b.Ib&&N(this,new fh(Ta,this,a,c));break;case "abort":N(this,new fh("abort",this,a,c))}return null};
function gh(a,b,c){var d=a.C.get(b);!d||d.gc||d.Xa>d.Ib?(d&&(ig(a.F,c,ch,d.Pb),ug(a.C,b)),Ug(a.D,c)):(d.Xa++,Fg(c,d.wf,d.Of,d.bb(),d.vf))}bh.prototype.aa=function(){bh.O.aa.call(this);this.D.wa();this.D=null;this.F.wa();this.F=null;var a=this.C;a.D={};a.C.length=0;a.F=0;this.C=null};function fh(a,b,c,d){Ke.call(this,a,b);this.id=c;this.kb=d}z(fh,Ke);
function eh(a,b,c,d,e,f,h){this.wf=a;this.Of=c||ha;this.C=d;this.vf=null;this.Ib=t(f)?f:1;this.Xa=0;this.Zb=this.gc=!1;this.Pb=b;this.fc=e;this.D=!!h;this.kb=null}eh.prototype.bb=m("C");eh.prototype.Ec=m("D");eh.prototype.xc=Db("");function hh(a,b,c,d,e){this.D=a;this.J=b;this.C=c||null;this.data=d||null;if(e){if(this.F=e,"displayModeSnippet"!=e&&e!=Pa&&e!=Qa&&e!=Ra)throw"bad display mode: "+e;}else this.F=Ra;this.G=!1}hh.prototype.K=m("D");function ih(a){this.G=!0;this.V=a;this.D=null}function P(a,b){return document.getElementById(a.V.D+"_"+b)}function jh(a,b){a=P(a,b);if(!a)throw"did not find element for id "+b;return a}ih.prototype.Z=function(){return this.V.data};
ih.prototype.F=function(){var a={};a.type=this.D.Sa();a.instanceId=this.V.D;a.sectionId=this.V.J;a.actionUrl=C.Y;a.quickEditUrl=C.kc+"&widgetType="+this.D.Sa()+"&widgetId="+this.V.D+"&sectionId="+this.V.J+aa+C.ma;return a};function kh(a,b,c,d,e){c=c||{};window.__wavt&&(c.xssi_token=window.__wavt);C.td(b,c,a.V.D,a.D.Sa(),d,e)}function zc(a){var b=-1;try{b=a.status}catch(c){}return b}function C(){}
C.Rf=function(a,b,c){C.D={};C.kc=a;C.Y=b;C.gi=c;C.F={};C.L=new bh;C.mc=0;C.W=0;L(C.L,jb,function(){C.W++});L(C.L,Ca,function(){C.W--})};C.kd=function(){var a=C.yf();document.body.appendChild(a)};C.jd=function(a){C.kd();if(window.parent==window){var b="Preview";a&&(b=a);a=C.xf(b);document.body.appendChild(a[0]);document.body.appendChild(a[1])}};C.Ih=wa;C.Sd=wa;C.ma="editWidget";C.If=function(){return C.Y};C.fd=function(a,b){C.$=a;C.ud=b};C.Nf=function(){return C.$};C.hd=function(a){C.vd=a};C.Fa=function(){return C.vd};
C.dd=function(a){C.F=a};C.Hf=function(){var a={},b;for(b in C.F){var c=C.F[b];a[c.name]=c.data}c={};for(b in C.D)c[b]=C.D[b].H.Z();a.widgets=c;return a};C.za=function(a,b){var c=new ih(b);a=new window[a](c);c.D=a;C.D[b.D]=a;C.fa(a);return a};C.Sh=function(a,b){a=C.za(a,b);a.H.V.G=!0;return a};C.fa=function(a){var b=a.H;b.V.F!=Ra&&(b.V.F==Pa&&a.ga(),a.H.G=!1)};C.G=function(a){return C.D?C.D[a]:null};
C.T=function(a,b,c,d,e){var f="";d&&(f="&widgetId="+d);a=C.kc+aa+a+"&sectionId="+b+"&widgetType="+c+f;if(window.name==e)return window.location.replace(a),window.focus(),window;e=window.open(a,e,"width=570,height=600,left=75,top=20,resizable=yes,scrollbars=yes");e.focus();return e};C.Qh=function(a){var b=a.getAttribute("id"),c=C.G(b);if(c){var d=c.H.C;if(null!=d&&!d.closed)return d.focus(),!1}d="config"+b;a=C.T(C.ma,a.parentNode.getAttribute("id"),a.getAttribute("widgetType"),b,d);c&&(c.H.C=a);return!1};
C.Rh=function(a){C.T(C.Sd,a.parentNode.getAttribute("id"),a.getAttribute("widgetType"),a.getAttribute("id"),C.Ih);return!1};C.Gf=function(a,b,c){C.C(c,c.LayoutsMessages.DELETING);C.Za("delete",{},a,b)};C.Th=function(a,b){var c=window;a.sectionid=document.getElementById("sectionId").value;C.C(c,c.LayoutsMessages.SAVING);C.Za("addnew",a,"",b)};C.ad=function(a,b,c){b=C.G(b);b.H.V.G?C.Th(a,c):(c=b.H,b=window,C.C(b,b.LayoutsMessages.SAVING),kh(c,Da,a))};C.td=function(a,b,c,d,e,f){C.Ta(C.Y,a,b,c,d,e,f)};
C.Za=function(a,b,c,d){C.$&&(b.security_token=C.ud,C.Ta(C.$,a,b,c,d,void 0))};
C.Ta=function(a,b,c,d,e,f,h){function n(){w(this.C)&&window.eval(Og(this))}b=["action="+encodeURIComponent(b),"widgetId="+encodeURIComponent(d),"widgetType="+encodeURIComponent(e),"responseType=js"];for(var q in c)if(typeof c[q]==ib)for(d=c[q],e=0;e<d.length;++e)b.push(encodeURIComponent(q)+"="+encodeURIComponent(d[e]));else b.push(encodeURIComponent(q)+"="+encodeURIComponent(c[q]));var w=f||yc();h==ha?(a=0<=a.indexOf("?")?a+"&":a+"?",dh(C.L,""+C.mc++,a+b.join("&"),ha,void 0,n)):dh(C.L,""+C.mc++,
a,"POST",b.join("&"),n)};C.bd=function(a,b){a&&(a=C.G(a))&&(a.H.C=b)};C.J=function(a,b){0==C.W?a.setTimeout(function(){a.close()},b):a.setTimeout(function(){C.J(a,b)},200)};C.Hh=function(a,b){a&&(C.J(a,100),C.qd(a,b))};C.qd=function(a,b){if(a){var c=a.document.getElementById(pb);c&&(c=c.innerHTML);c&&a&&a.opener.parent&&a.opener.parent.editor&&a.opener.parent.editor.SetSaveMessage(c,b)}};
C.ka=function(a,b,c){a=C.D[a];if(null!=c.errors){var d=a?a.H.C:null;d||(d=window);C.C(d,c.errors);a&&a.Ca?a.Ca(b,c,d):C.Ca(c,d)}else a.ka(b,c)};C.Ca=function(a,b){a=a["error-details"];for(var c in a)lh(c,a[c],b.document)};function mh(a,b){C.C(a.C,b[ob]);C.Ea(a.V.D,"_OnWidgetConfigured",function(a){window.opener._WidgetManager._OnWidgetConfigured(a,b)})}C.Kh=function(a,b){window.parent&&window.parent.editor&&b?C.Mh(a,b):window.location.replace(window.location.href)};
C.Mh=function(a,b){var c=C.G(a);c.H.V.data=b.data;a=document.getElementById(a);ue(a);Ac(a,c);c.H.C=null};
C.Qf=function(a,b,c){var d=c[ob];if(null!=c.errors)C.C(window,c.errors),C.Ca(c,window);else if("addnew"==b){if(C.M(window)){if(window.opener&&window.opener.parent)var e=window.opener.parent;e&&e.editor&&e.editor.HandleAddNewWidget(c)}C.C(window,d);null==window.opener?je("/rearrange?blogID="+c.blogID):e&&e._WidgetManager?e._WidgetManager._KillPopupDelay(window):C.J(window,100)}else c=C.D[a],"delete"==b&&(C.C(c.H.C,d),C.Ea(a,"_OnWidgetDeleted"))};
C.Ph=function(a){var b=C.G(a);b&&(b.H.V.F==Qa?top.editor.HandleDeleteWidget(b.H.V.C):(b=b.H.V.C,b.parentNode.removeChild(b)),delete C.D[a])};C.Ea=function(a,b,c){if(C.M(window)){var d=window.opener;c||(c=d._WidgetManager[b]);c(a);d._WidgetManager?d._WidgetManager._KillPopupDelay(window,a):C.J(window,100)}else a=C.Fa()+"?widgetId="+a,a+="&func="+encodeURIComponent(b),window.location.replace(a)};C.M=function(a){var b=!1;try{if(a.opener){var c="X"+a.opener.document.domain;c&&"X"!=c&&(b=!0)}}catch(d){}return b};
C.jc="status-msg-yellow-on-white";C.C=function(a,b){a||(a=self);var c=a.document.getElementById(pb);c&&(c.innerHTML=b);(a=a.document.getElementById(ob))&&tc(a,C.jc)};C.ai=function(a){a||(a=self);(a=a.document.getElementById(ob))&&vc(a,C.jc)};C.ei=function(a){a&&0<a.length&&"http"!=a.substring(0,4)&&(a="http://"+a);return a};C.K=function(a,b){if(B(a,b))return a;if(a)for(var c=a.childNodes.length,d=0;d<c;d++){var e=C.K(a.childNodes.item(d),b);if(e)return e}return null};
C.yf=function(){var a=window.document.createElement(g);a.className="blogger-clickTrap singleton-element";a.style.position="fixed";a.style.top="0";a.style.left="0";a.style.width="100%";a.style.height="100%";H.R&&!H.oa(7)&&(a.style.height="expression(this.parentNode.clientHeight)");a.style.zIndex="1000";a.style.cursor="default";a.onclick=C.N;a.onmousedown=C.N;a.onmouseup=C.N;a.style.background="white";a.style.filter="alpha(opacity=1)";a.style.opacity=".01";a.innerHTML="&nbsp;";return a};
C.xf=function(a){var b=window.document,c=C.da(b,a);a=C.da(b,a);c.style.backgroundColor="#000";c.style.border="1px solid #aaa";H.R&&(c.style.filter=' progid:DXImageTransform.Microsoft.Matrix(sizingMethod="auto expand", M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678) alpha(opacity=50)');c.style.opacity=".5";a.style.border="1px solid transparent";c.style.zIndex=1200;a.style.zIndex=1200;return[c,a]};
C.da=function(a,b){a=a.createElement(g);a.style.position=sa;a.style.top="75px";a.style.left="-225px";a.style.width="600px";a.style.height="28px";a.style.margin="0";a.style.padding="10px";a.style.fontSize="24px";a.style.textAlign="center";a.style.color="#fff";a.style.fontFamily='"trebuchet ms",verdana,arial,sans-serif';H.R&&(a.style.top="-140px",a.style.left="-140px",a.style.filter=' progid:DXImageTransform.Microsoft.Matrix(sizingMethod="auto expand", M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)');
a.style.MozTransform=lb;a.style.MozTransformOrigin="50% 0";a.style.WebkitTransform=lb;a.style.WebkitTransformOrigin="50% 0";a.innerHTML=b;a.className="singleton-element";return a};C.fi=function(a){for(var b in C.F){var c=C.F[b];if(c&&"features"==c.name)return"true"==c.data[a]}return!1};C.N=function(a){a||(a=window.event);a&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation());return!1};
function nh(a){if(a)if("checkbox"==a.type){if(a.checked)return a.value}else{if(null==a.type){for(var b=[],c=0;c<a.length;c++)a[c].checked&&(b[b.length]=a[c].value);switch(b.length){case 0:return;case 1:return b[0];default:return b}}return a.value}}function oh(a,b){b||(b=document);return b.getElementById("errormessage_"+a)}function lh(a,b,c){if(a=oh(a,c))a.innerHTML=b,a.className="errorbox-bad errormsg"}function ph(){this.C=[];for(var a=0;a<C.F.length;++a)this.C[this.C.length]=C.F[a]}
function qh(a,b){null==b&&(b="");for(var c=a.C.length-1;0<=c;--c)if(a.C[c].name==b)return a.C[c].data;return null}ph.prototype.Z=function(a){var b=qh(this,a);if(null!==b)return b;var c=a.split(".");if(1==c.length)return b=qh(this,""),b[a];b=qh(this,c[0]);a=0;for(b?a=1:b=qh(this,"");a<c.length;a++){if(null==b)return null;b=b[c[a]]}return b};function Q(a,b){this.Oh=a;this.H=b}p=Q.prototype;p.Sa=m("Oh");p.ld=m("H");p.ka=function(a,b){a==Da&&mh(this.H,b)};p.Ca=function(a,b,c){C.Ca(b,c)};p.ga=Cb();
y("_WidgetManager",C);C._Init=C.Rf;C._SetPageActionUrl=C.fd;C._GetPageActionUrl=C.Nf;C._SetWidgetRefreshUrl=C.hd;C._GetWidgetRefreshUrl=C.Fa;C._GetCallbackUrl=C.If;C._DeleteWidgetFromPage=C.Gf;C._DisplayWidget=C.fa;C._GetWidget=C.G;C._HandleControllerResult=C.ka;C._HandlePageActionResult=C.Qf;C._IsOpenerReachable=C.M;C._SetConfigWin=C.bd;C._SetDataContext=C.dd;C._SetupPreview=C.jd;C._RegisterWidget=C.za;C._RegisterNewWidget=C.Sh;C._PopupPaneFromParams=C.T;C._PopupConfig=C.Qh;C._PopupToolbox=C.Rh;
C._KillPopupDelay=C.Hh;C._OnWidgetConfigured=C.Kh;C._OnWidgetDeleted=C.Ph;y("_WidgetInfo",hh);hh.prototype._getInstanceId=hh.prototype.K;Q.prototype._GetHelper=Q.prototype.ld;ih.prototype._GetData=ih.prototype.Z;ih.prototype._GenerateWidgetMetadata=ih.prototype.F;C._GetAllData=C.Hf;y("widget_module_provide",function(a,b,c){var d=$f.Ha(),e=d.C,f=d.K;e[a]||(e[a]={});if(c)e[a][b]=c;else if(f[a]){for(b=0;b<f[a].length;++b)(0,f[a][b][1])(e[a][f[a][b][0]]);delete f[a];delete d.F[a]}});function rh(a){Q.call(this,"AdSense",a);this.H=a}z(rh,Q);y("_AdSenseView",rh);H.product={};H.product.Rb=!1;H.product.Ba=!1;H.product.Aa=!1;H.product.Ka=!1;H.product.Qb=!1;H.product.Vb=!1;H.product.Da=H.mb||H.lb||H.pb||H.product.Rb||H.product.Ba||H.product.Aa||H.product.Ka||H.product.Qb||H.product.Vb;H.product.Ma=H.Ma;H.product.R=H.R;H.product.Ra=H.Ra;H.product.Wh=H.product.Da?H.product.Rb:ad();H.product.Af=function(){return ed()||G("iPod")};H.product.sd=H.product.Da?H.product.Ba:H.product.Af();H.product.rd=H.product.Da?H.product.Aa:G("iPad");
H.product.Yc=H.product.Da?H.product.Ka:dd();H.product.Uh=H.product.Da?H.product.Qb:cd();H.product.Df=function(){return bd()&&!(ed()||G("iPad")||G("iPod"))};H.product.Ad=H.product.Da?H.product.Vb:H.product.Df();var sh={};
function th(a){if(H.product.R&&!H.oa(9))return[0,0,0,0];var b=sh.hasOwnProperty(a)?sh[a]:null;if(b)return b;65536<Object.keys(sh).length&&(sh={});var c=[0,0,0,0];b=uh(a,/\\[0-9A-Fa-f]{6}\s?/g);b=uh(b,/\\[0-9A-Fa-f]{1,5}\s/g);b=uh(b,/\\./g);b=b.replace(/:not\(([^\)]*)\)/g,"     $1 ");b=b.replace(/{[^]*/gm,"");b=vh(b,c,/(\[[^\]]+\])/g,2);b=vh(b,c,/(#[^\#\s\+>~\.\[:]+)/g,1);b=vh(b,c,/(\.[^\s\+>~\.\[:]+)/g,2);b=vh(b,c,/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,3);b=vh(b,c,/(:[\w-]+\([^\)]*\))/gi,
2);b=vh(b,c,/(:[^\s\+>~\.\[:]+)/g,2);b=b.replace(/[\*\s\+>~]/g," ");b=b.replace(/[#\.]/g," ");vh(b,c,/([^\s\+>~\.\[:]+)/g,3);b=c;return sh[a]=b}function vh(a,b,c,d){return a.replace(c,function(a){b[d]+=1;return Array(a.length+1).join(" ")})}function uh(a,b){return a.replace(b,function(a){return Array(a.length+1).join("A")})};var wh={"* ARIA-CHECKED":!0,"* ARIA-COLCOUNT":!0,"* ARIA-COLINDEX":!0,"* ARIA-DESCRIBEDBY":!0,"* ARIA-DISABLED":!0,"* ARIA-LABEL":!0,"* ARIA-LABELLEDBY":!0,"* ARIA-READONLY":!0,"* ARIA-REQUIRED":!0,"* ARIA-ROWCOUNT":!0,"* ARIA-ROWINDEX":!0,"* ARIA-SELECTED":!0,"* ABBR":!0,"* ACCEPT":!0,"* ACCESSKEY":!0,"* ALIGN":!0,"* ALT":!0,"* AUTOCOMPLETE":!0,"* AXIS":!0,"* BGCOLOR":!0,"* BORDER":!0,"* CELLPADDING":!0,"* CELLSPACING":!0,"* CHAROFF":!0,"* CHAR":!0,"* CHECKED":!0,"* CLEAR":!0,"* COLOR":!0,"* COLSPAN":!0,
"* COLS":!0,"* COMPACT":!0,"* COORDS":!0,"* DATETIME":!0,"* DIR":!0,"* DISABLED":!0,"* ENCTYPE":!0,"* FACE":!0,"* FRAME":!0,"* HEIGHT":!0,"* HREFLANG":!0,"* HSPACE":!0,"* ISMAP":!0,"* LABEL":!0,"* LANG":!0,"* MAXLENGTH":!0,"* METHOD":!0,"* MULTIPLE":!0,"* NOHREF":!0,"* NOSHADE":!0,"* NOWRAP":!0,"* OPEN":!0,"* READONLY":!0,"* REQUIRED":!0,"* REL":!0,"* REV":!0,"* ROLE":!0,"* ROWSPAN":!0,"* ROWS":!0,"* RULES":!0,"* SCOPE":!0,"* SELECTED":!0,"* SHAPE":!0,"* SIZE":!0,"* SPAN":!0,"* START":!0,"* SUMMARY":!0,
"* TABINDEX":!0,"* TITLE":!0,"* TYPE":!0,"* VALIGN":!0,"* VALUE":!0,"* VSPACE":!0,"* WIDTH":!0},xh={"* USEMAP":!0,"* ACTION":!0,"* CITE":!0,"* HREF":!0,"* LONGDESC":!0,"* SRC":!0,"LINK HREF":!0,"* FOR":!0,"* HEADERS":!0,"* NAME":!0,"A TARGET":!0,"* CLASS":!0,"* ID":!0,"* STYLE":!0};var yh={rgb:!0,rgba:!0,alpha:!0,rect:!0,image:!0,"linear-gradient":!0,"radial-gradient":!0,"repeating-linear-gradient":!0,"repeating-radial-gradient":!0,"cubic-bezier":!0,matrix:!0,perspective:!0,rotate:!0,rotate3d:!0,rotatex:!0,rotatey:!0,steps:!0,rotatez:!0,scale:!0,scale3d:!0,scalex:!0,scaley:!0,scalez:!0,skew:!0,skewx:!0,skewy:!0,translate:!0,translate3d:!0,translatex:!0,translatey:!0,translatez:!0},zh=/[\n\f\r"'()*<>]/g,Ah={"\n":"%0a","\f":"%0c","\r":"%0d",'"':"%22","'":"%27","(":"%28",")":"%29",
"*":"%2a","<":"%3c",">":"%3e"};function Bh(a){return Ah[a]}function Ch(a,b,c){b=D(b);if(""==b)return null;var d=String(b.substr(0,4)).toLowerCase();if(0==("url("<d?-1:"url("==d?0:1))return!b.endsWith(")")||1<(b?b.split("(").length-1:0)||1<(b?b.split(")").length-1:0)||!c?b=null:b=c?(b=c(Kc(b.substring(4,b.length-1)),a))&&Dd(b)!=qa?'url("'+Dd(b).replace(zh,Bh)+'")':null:null,b;if(0<b.indexOf("(")){if(/"|'/.test(b))return null;for(a=/([\-\w]+)\(/g;c=a.exec(b);)if(!(c[1]in yh))return null}return b};function Dh(a,b){a=r[a];return a&&a.prototype?(b=Object.getOwnPropertyDescriptor(a.prototype,b))&&b.get||null:null}function Eh(a,b){return(a=r[a])&&a.prototype&&a.prototype[b]||null}var Fh=Dh(fa,ta)||Dh("Node",ta),Gh=Eh(fa,$a),Hh=Eh(fa,Xa),Ih=Eh(fa,nb),Jh=Eh(fa,kb),Kh=Eh(fa,Ya),Lh=Eh(fa,"matches")||Eh(fa,gb),Mh=Dh("Node","nodeName"),Nh=Dh("Node","nodeType"),Oh=Dh("Node","parentNode"),Ph=Dh("HTMLElement",rb)||Dh(fa,rb),Qh=Dh("HTMLStyleElement","sheet"),Rh=Eh(ca,Za),Sh=Eh(ca,"setProperty");
function Th(a,b,c,d){if(a)return a.apply(b);a=b[c];if(!d(a))throw Error(da);return a}function Uh(a,b,c,d){if(a)return a.apply(b,d);if(H.product.R&&10>document.documentMode){if(!b[c].call)throw Error("IE Clobbering detected");}else if(typeof b[c]!=k)throw Error(da);return b[c].apply(b,d)}function Vh(a){return Th(Fh,a,ta,function(a){return a instanceof NamedNodeMap})}function Wh(a,b,c){try{Uh(Ih,a,nb,[b,c])}catch(d){if(-1==d.message.indexOf("A security problem occurred"))throw d;}}
function Xh(a){return Th(Ph,a,rb,function(a){return a instanceof CSSStyleDeclaration})}function Yh(a){return Th(Qh,a,"sheet",function(a){return a instanceof CSSStyleSheet})}function Zh(a){return Th(Mh,a,"nodeName",function(a){return typeof a==qb})}function $h(a){return Th(Nh,a,"nodeType",function(a){return typeof a==hb})}function ai(a){return Th(Oh,a,"parentNode",function(a){return!(a&&typeof a.name==qb&&a.name&&"parentnode"==a.name.toLowerCase())})}
function bi(a,b){return Uh(Rh,a,a.getPropertyValue?Za:Xa,[b])||""}function ci(a,b,c){Uh(Sh,a,a.setProperty?"setProperty":nb,[b,c])};var di=H.R&&10>document.documentMode?null:/\s*([^\s'",]+[^'",]*(('([^'\r\n\f\\]|\\[^])*')|("([^"\r\n\f\\]|\\[^])*")|[^'",])*)/g,ei={"-webkit-border-horizontal-spacing":!0,"-webkit-border-vertical-spacing":!0};
function fi(a,b,c){var d=[];a=gi(nc(a.cssRules));A(a,function(a){if(b&&!/[a-zA-Z][\w-:\.]*/.test(b))throw Error("Invalid container id");if(!(b&&H.product.R&&10==document.documentMode&&/\\['"]/.test(a.selectorText))){var e=b?a.selectorText.replace(di,"#"+b+" $1"):a.selectorText;d.push(Vd(e,hi(a.style,c)))}});return Xd(d)}function gi(a){return ec(a,function(a){return a instanceof CSSStyleRule||a.type==CSSRule.STYLE_RULE})}
function ii(a,b,c){a=ji("<style>"+a+"</style>");return null==a?Zd:fi(a.sheet,void 0!=b?b:null,c)}function ji(a){return H.R&&!H.oa(10)||typeof r.DOMParser!=k?null:(new DOMParser).parseFromString("<html><head></head><body>"+a+"</body></html>","text/html").body.children[0]}
function hi(a,b){if(!a)return Ld;var c=document.createElement(g).style,d=ki(a);A(d,function(d){var e=H.va&&d in ei?d:d.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/i,"");0!=e.lastIndexOf("--",0)&&0!=e.lastIndexOf("var",0)&&(d=bi(a,d),d=Ch(e,d,b),null!=d&&ci(c,e,d))});return Kd(c.cssText||"")}
function li(a){var b=Array.from(Uh(Kh,a,Ya,[ka])),c=rc(b,function(a){return nc(Yh(a).cssRules)});c=gi(c);c.sort(function(a,b){a=th(a.selectorText);a:{b=th(b.selectorText);for(var c=Math.min(a.length,b.length),d=0;d<c;d++){var e=a[d];var f=b[d];e=e>f?1:e<f?-1:0;if(0!=e){a=e;break a}}a=a.length;b=b.length;a=a>b?1:a<b?-1:0}return-a});a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,null,!1);for(var d;d=a.nextNode();)A(c,function(a){Uh(Lh,d,d.matches?"matches":gb,[a.selectorText])&&a.style&&mi(d,
a.style)});A(b,ve)}function mi(a,b){var c=ki(a.style),d=ki(b);A(d,function(d){if(!(0<=c.indexOf(d))){var e=bi(b,d);ci(a.style,d,e)}})}function ki(a){Tb(a)?a=nc(a):(a=Vc(a),lc(a,"cssText"));return a};var ni="undefined"!=typeof WeakMap&&-1!=WeakMap.toString().indexOf("[native code]"),oi=0;function pi(){this.F=[];this.D=[];this.C="data-elementweakmap-index-"+oi++}pi.prototype.set=function(a,b){if(Uh(Gh,a,$a,[this.C])){var c=parseInt(Uh(Hh,a,Xa,[this.C])||null,10);this.D[c]=b}else c=this.D.push(b)-1,Wh(a,this.C,c.toString()),this.F.push(a);return this};pi.prototype.get=function(a){if(Uh(Gh,a,$a,[this.C]))return a=parseInt(Uh(Hh,a,Xa,[this.C])||null,10),this.D[a]};
pi.prototype.clear=function(){this.F.forEach(function(a){Uh(Jh,a,kb,[this.C])},this);this.F=[];this.D=[]};var qi=!H.R||H.ib(10);function ri(){};var si={APPLET:!0,AUDIO:!0,BASE:!0,BGSOUND:!0,EMBED:!0,FORM:!0,IFRAME:!0,ISINDEX:!0,KEYGEN:!0,LAYER:!0,LINK:!0,META:!0,OBJECT:!0,SCRIPT:!0,SVG:!0,STYLE:!0,TEMPLATE:!0,VIDEO:!0};var ti={A:!0,ABBR:!0,ACRONYM:!0,ADDRESS:!0,AREA:!0,ARTICLE:!0,ASIDE:!0,B:!0,BDI:!0,BDO:!0,BIG:!0,BLOCKQUOTE:!0,BR:!0,BUTTON:!0,CAPTION:!0,CENTER:!0,CITE:!0,CODE:!0,COL:!0,COLGROUP:!0,DATA:!0,DATALIST:!0,DD:!0,DEL:!0,DETAILS:!0,DFN:!0,DIALOG:!0,DIR:!0,DIV:!0,DL:!0,DT:!0,EM:!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FONT:!0,FOOTER:!0,FORM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!0,HGROUP:!0,HR:!0,I:!0,IMG:!0,INPUT:!0,INS:!0,KBD:!0,LABEL:!0,LEGEND:!0,LI:!0,MAIN:!0,MAP:!0,MARK:!0,MENU:!0,METER:!0,NAV:!0,
NOSCRIPT:!0,OL:!0,OPTGROUP:!0,OPTION:!0,OUTPUT:!0,P:!0,PRE:!0,PROGRESS:!0,Q:!0,S:!0,SAMP:!0,SECTION:!0,SELECT:!0,SMALL:!0,SOURCE:!0,SPAN:!0,STRIKE:!0,STRONG:!0,STYLE:!0,SUB:!0,SUMMARY:!0,SUP:!0,TABLE:!0,TBODY:!0,TD:!0,TEXTAREA:!0,TFOOT:!0,TH:!0,THEAD:!0,TIME:!0,TR:!0,TT:!0,U:!0,UL:!0,VAR:!0,WBR:!0};function vi(a){a=a||new wi;xi(a);this.C=Yc(a.C);this.G=Yc(a.da);this.J=Yc(a.G);this.M=a.$;A(a.T,function(a){this.C["* "+a.toUpperCase()]=yi},this);this.L=a.F;this.F=a.W;this.D=null;this.K=a.Y}z(vi,ri);function zi(a){return function(b,c){return(b=a(D(b),c))&&Dd(b)!=qa?Dd(b):null}}
function wi(){this.C={};A([wh,xh],function(a){A(Vc(a),function(a){this.C[a]=yi},this)},this);this.D={};this.T=[];this.da=Yc(si);this.G=Yc(ti);this.$=!1;this.N=Fd;this.M=this.J=this.K=this.F=pd;this.W=null;this.L=this.Y=!1}function Ai(){var a=new wi;a.G={SPAN:!0};A("a b br em i strong".split(" "),function(a){a=a.toUpperCase();if(ti[a])this.G[a]=!0;else throw Error("Only whitelisted tags can be allowed. See goog.html.sanitizer.TagWhitelist.");},a);return a}
function Bi(a,b){return function(c,d,e,f){c=a(c,d,e,f);return null==c?null:b(c,d,e,f)}}function Ci(a,b,c,d){a[c]&&!b[c]&&(a[c]=Bi(a[c],d))}
function xi(a){if(a.L)throw Error("HtmlSanitizer.Builder.build() can only be used once.");Ci(a.C,a.D,"* USEMAP",Di);var b=zi(a.N);A(["* ACTION","* CITE","* HREF"],function(a){Ci(this.C,this.D,a,b)},a);var c=zi(a.F);A(["* LONGDESC","* SRC","LINK HREF"],function(a){Ci(this.C,this.D,a,c)},a);A(["* FOR","* HEADERS","* NAME"],function(a){Ci(this.C,this.D,a,$b(Ei,this.K))},a);Ci(a.C,a.D,"A TARGET",$b(Fi,[oa,"_self"]));Ci(a.C,a.D,"* CLASS",$b(Gi,a.J));Ci(a.C,a.D,"* ID",$b(Hi,a.J));Ci(a.C,a.D,"* STYLE",$b(a.M,
c));a.L=!0}function Ii(a,b){a||(a="*");return(a+" "+b).toUpperCase()}function Ji(a,b,c,d){if(!d.Eb)return null;b=Jd(hi(d.Eb,function(b,d){c.Od=d;b=a(b,c);var e;null==b?e=null:e=Gd(b);return e}));return""==b?null:b}function yi(a){return D(a)}function Fi(a,b){b=D(b);return jc(a,b.toLowerCase())?b:null}function Di(a){return(a=D(a))&&"#"==a.charAt(0)?a:null}function Ei(a,b,c){return a(D(b),c)}
function Gi(a,b,c){b=b.split(/(?:\s+)/);for(var d=[],e=0;e<b.length;e++){var f=a(b[e],c);f&&d.push(f)}return 0==d.length?null:d.join(" ")}function Hi(a,b,c){return a(D(b),c)}
function Ki(a,b){var c=!(ka in a.G)&&ka in a.J;c="*"==a.F&&c?"sanitizer-"+(Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ac()).toString(36)):a.F;a.D=c;if(qi){c=b;if(qi){b=document.createElement(ja);a.D&&"*"==a.F&&(b.id=a.D);a.K&&(c=ji("<div>"+c+"</div>"),li(c),c=c.innerHTML);var d=document.createElement("template");if(Ma in d)d.innerHTML=c,d=d.content;else{var e=document.implementation.createHTMLDocument("x");d=e.body;e.body.innerHTML=c}c=document.createTreeWalker(d,
NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null,!1);for(d=ni?new WeakMap:new pi;e=c.nextNode();){c:{var f=a;var h=e;switch($h(h)){case 3:f=Li(f,h);break c;case 1:if("TEMPLATE"==Zh(h).toUpperCase())f=null;else{var n=Zh(h).toUpperCase();if(n in f.G)var q=null;else f.J[n]?q=document.createElement(n):(q=document.createElement(ja),f.M&&Wh(q,"data-sanitizer-original-tag",n.toLowerCase()));if(q){var w=q,O=Vh(h);if(null!=O)for(var F=0;n=O[F];F++)if(n.specified){var E=f;var J=h,pa=n,mb=pa.name;if(0==mb.lastIndexOf("data-sanitizer-",
0))E=null;else{var ui=Zh(J);pa=pa.value;var $e={tagName:D(ui).toLowerCase(),attributeName:D(mb).toLowerCase()},af={Eb:void 0};$e.attributeName==rb&&(af.Eb=Xh(J));J=Ii(ui,mb);J in E.C?(E=E.C[J],E=E(pa,$e,af)):(mb=Ii(null,mb),mb in E.C?(E=E.C[mb],E=E(pa,$e,af)):E=null)}null===E||Wh(w,n.name,E)}f=q}else f=null}break c;default:f=null}}if(f){if(1==$h(f)&&d.set(e,f),e=ai(e),h=!1,e)n=$h(e),q=Zh(e).toLowerCase(),w=ai(e),11!=n||w?"body"==q&&w&&(n=ai(w))&&!ai(n)&&(h=!0):h=!0,n=null,h||!e?n=b:1==$h(e)&&(n=d.get(e)),
n.content&&(n=n.content),n.appendChild(f)}else ue(e)}d.clear&&d.clear();a=b}else a=document.createElement(ja);0<Vh(a).length&&(b=document.createElement(ja),b.appendChild(a),a=b);a=a.innerHTML}else a="";return de(a,null)}function Li(a,b){var c=b.data;(b=ai(b))&&Zh(b).toLowerCase()==rb&&!(ka in a.G)&&ka in a.J&&(c=Yd(ii(c,a.D,x(function(a,b){return this.L(a,{Od:b})},a))));return document.createTextNode(c)};function Mi(a,b,c){if(u(b))(b=Ni(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var e=b[d],f=Ni(c,d);f&&(c.style[f]=e)}}var Oi={};function Ni(a,b){var c=Oi[b];if(!c){var d=Oc(b);c=d;void 0===a.style[d]&&(d=(H.va?"Webkit":H.qb?"Moz":H.R?"ms":H.Ma?"O":null)+Pc(d),void 0!==a.style[d]&&(c=d));Oi[b]=c}return c}function Pi(a,b){var c=ye(a);return c.defaultView&&c.defaultView.getComputedStyle&&(a=c.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}
function Qi(a,b){return Pi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function Ri(a){try{var b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}H.R&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Si(a){var b=a.offsetWidth,c=a.offsetHeight,d=H.va&&!b&&!c;return t(b)&&!d||!a.getBoundingClientRect?new le(b,c):(a=Ri(a),new le(a.right-a.left,a.bottom-a.top))}function Ti(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;b=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return+b}
function Ui(a){var b=ye(a),c="";if(b.body.createTextRange&&xe(b,a)){b=b.body.createTextRange();b.moveToElementText(a);try{c=b.queryCommandValue("FontName")}catch(d){c=""}}c||(c=Qi(a,"fontFamily"));a=c.split(",");1<a.length&&(c=a[0]);return Kc(c)}var Vi=/[^\d]+$/,Wi={cm:1,"in":1,mm:1,pc:1,pt:1},Xi={em:1,ex:1};
function Yi(a){var b=Qi(a,"fontSize");var c=(c=b.match(Vi))&&c[0]||null;if(b&&"px"==c)return parseInt(b,10);if(H.R){if(String(c)in Wi)return Ti(a,b);if(a.parentNode&&1==a.parentNode.nodeType&&String(c)in Xi)return a=a.parentNode,c=Qi(a,"fontSize"),Ti(a,b==c?"1em":b)}c=qe(ja,{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});a.appendChild(c);b=c.offsetHeight;ve(c);return b};var Zi=document.createElement("DIV");Zi.id=Zi[Wb]||(Zi[Wb]=++Xb);function $i(a){var b=new vi(new wi);return Ki(b,a)};function aj(a){Q.call(this,"BlogArchive",a);this.C=a.V}z(aj,Q);var bj="&#9658;&nbsp;";p=aj.prototype;
p.ka=function(a,b){if(a==Da)mh(this.H,b);else if("getTitles"==a){a:{a=b.path;var c=this.C.C.getElementsByTagName("A");for(e in c){var d=c[e];if(d.href==a){var e=De(d,"li","archivedate");break a}}e=void 0}a=K("posts",e);(c=De(e,g,Aa))&&oe(c,{style:"","data-height":""});ue(a);for(c=0;c<b.posts.length;c++){d=b.posts[c];var f=document.createElement("li");f.innerHTML="<a href="+d.url+">"+d.title+"</a>";a.appendChild(f)}cj(this,e);dj(this,e)}else aj.O.ka.call(this,a,b)};
p.ga=function(){if(P(this.H,"ArchiveList")){var a=ne(document,"a",wb,this.C.C);1>a.length&&(a=ne(document,"li",wb,this.C.C));if(0<a.length&&a[0].currentStyle)var b=a[0].parentNode.currentStyle.color;for(var c=0;c<a.length;c++){var d=a[c];0<ne(document,g,Aa,d).length?(d.onclick=this.Bd.bind(this),cj(this,d)):d.onclick=this.Cd.bind(this);b&&(d.style.color=b)}if(d=P(this.H,"ArchiveMenu")){for(c=1;c<d.options.length;c++)if(a=d.options[c].value,a==window.location.href||null!=window.location.href.match(a)){d.selectedIndex=
c;break}d.onchange=this.od.bind(this)}else for(a=ne(document,g,Sa,this.C.C),c=0;c<a.length;c++)d=a[c],d.addEventListener(xa,this.Gd.bind(this),!1),d.addEventListener(xa,this.zd.bind(this),!1);"rtl"==this.H.Z().languageDirection&&(bj="&#9668;&nbsp;")}};p.od=function(){var a=P(this.H,"ArchiveMenu");a&&""!=a.value&&(window.location.href=a.value)};
p.Cd=function(a){a=a||window.event;var b=a.currentTarget||a.srcElement;b&&!B(b,wb)&&(b=b.parentNode);a=C.K(b,"zippy");b=b.parentNode;if(B(b,Ua))return xc(b,Ua,ya),b=$i(bj),he(a,be(b)),vc(a,"toggle-open"),!1;xc(b,ya,Ua);var c=$i("&#9660;&nbsp;");he(a,be(c));tc(a,"toggle-open");ej(this,b);return!1};p.Gd=function(a){a=a||window.event;a=a.currentTarget||a.srcElement;(a=B(a,Sa)?a:De(a,g,Sa))&&(a=K("menu",a))&&(B(a,"open")?vc(a,"open"):tc(a,"open"))};
p.zd=function(a){a=a||window.event;var b=a.currentTarget||a.srcElement;if(b=B(b,"ripple")?b:De(b,g,"ripple")){var c=K("splash",b);if(!c){c=document.createElement("span");tc(c,"splash");var d=document.createElement(g);tc(d,"splash-wrapper");d.appendChild(c);b.insertBefore(d,b.firstChild)}vc(c,"animate");d=b.offsetWidth;var e=getComputedStyle(b);d+=parseInt(e.marginLeft)+parseInt(e.marginRight);d=Math.max(d,fj(b));oe(c,{style:"height: "+d+"px; width: "+d+"px; left: "+(a.pageX-b.offsetLeft-d/2)+"px; top: "+
(a.pageY-b.offsetTop-d/2)+"px;"});tc(c,"animate")}};p.Bd=function(a){a=a||window.event;if(!a.currentTarget||a.currentTarget==a.srcElement||"A"!=a.srcElement.tagName){var b=a.currentTarget||a.srcElement;b&&!B(b,wb)&&(b=b.parentNode);a.stopPropagation();a=B(b,"archivedate")?b:b.parentNode;B(a,Ua)?(gj(this,a),xc(a,Ua,ya)):(ej(this,a),dj(this,a),xc(a,ya,Ua))}};
function ej(a,b){var c=b.getElementsByTagName("UL");0<c.length&&!B(c[0],"posts")?c=!1:(c=C.K(b,"post-count"),c=parseInt(c.innerHTML.match(/\d+/),10),c=b.getElementsByTagName("LI").length<c);if(c){var d=K(Aa,b);c=K("posts",b);c||(c=document.createElement("UL"),d?d.appendChild(c):b.appendChild(c),tc(c,"posts"));d&&oe(d,{style:"","data-height":""});(d=De(b,g,Aa))&&oe(d,{style:"","data-height":""});d=document.createElement("LI");d.innerHTML=a.H.Z().loadingMessage||"Loading...";c.appendChild(d);kh(a.H,
"getTitles",{path:C.K(b,"post-count-link").href},null,ha)}}function dj(a,b){var c=K(Aa,b);c.getAttribute(Na)||cj(a,b);var d=(a=c.getAttribute(Na)||fj(c))?a+"px":l;window.setTimeout(function(){oe(c,{style:"max-height: "+d+";"})},10)}function gj(a,b){var c=K(Aa,b);c.getAttribute(Na)||cj(a,b);window.setTimeout(function(){oe(c,{style:fb})},10)}
function cj(a,b){var c=K(Aa,b);oe(c,{style:"max-height: none;"});for(var d=0,e=ne(document,g,Aa,c),f=0;f<e.length;f++){var h=e[f],n=De(h,"li",wb);if(B(n,ya)){var q=h.getAttribute(Na);q||(cj(a,n),q=h.getAttribute(Na));d+=parseInt(q)}}a=d+fj(c);c.setAttribute(Na,a);c.setAttribute(rb,"max-height: "+a+"px;");B(b,ya)&&c.setAttribute(rb,fb)}function fj(a){var b=a.offsetHeight;a=getComputedStyle(a);return b+=parseInt(a.marginTop)+parseInt(a.marginBottom)}y("_BlogArchiveView",aj);function hj(a){Q.call(this,hj.C,a)}z(hj,Q);hj.C="Attribution";y("_AttributionView",hj);function ij(a,b){this.D=this.M=this.G="";this.K=null;this.L=this.J="";this.F=!1;if(a instanceof ij){this.F=t(b)?b:a.F;jj(this,a.G);this.M=a.M;this.D=a.D;kj(this,a.K);lj(this,a.J);b=a.C;var c=new mj;c.F=b.F;b.C&&(c.C=new sg(b.C),c.D=b.D);nj(this,c);this.L=a.L}else a&&(c=String(a).match(yg))?(this.F=!!b,jj(this,c[1]||"",!0),this.M=oj(c[2]||""),this.D=oj(c[3]||"",!0),kj(this,c[4]),lj(this,c[5]||"",!0),nj(this,c[6]||"",!0),this.L=oj(c[7]||"")):(this.F=!!b,this.C=new mj(null,this.F))}
ij.prototype.toString=function(){var a=[],b=this.G;b&&a.push(pj(b,qj,!0),":");var c=this.D;if(c||"file"==b)a.push("//"),(b=this.M)&&a.push(pj(b,qj,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.K,null!=c&&a.push(":",String(c));if(c=this.J)this.D&&"/"!=c.charAt(0)&&a.push("/"),a.push(pj(c,"/"==c.charAt(0)?rj:sj,!0));(c=this.C.toString())&&a.push("?",c);(c=this.L)&&a.push("#",pj(c,tj));return a.join("")};
function jj(a,b,c){a.G=c?oj(b,!0):b;a.G&&(a.G=a.G.replace(/:$/,""));return a}function kj(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.K=b}else a.K=null}function lj(a,b,c){a.J=c?oj(b,!0):b;return a}function nj(a,b,c){b instanceof mj?(a.C=b,uj(a.C,a.F)):(c||(b=pj(b,vj)),a.C=new mj(b,a.F))}function wj(a,b,c){a.C.set(b,c);return a}function xj(a,b){return a instanceof ij?new ij(a):new ij(a,b)}
function oj(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function pj(a,b,c){return u(a)?(a=encodeURI(a).replace(b,yj),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function yj(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var qj=/[#\/\?@]/g,sj=/[#\?:]/g,rj=/[#\?]/g,vj=/[#\?@]/g,tj=/#/g;function mj(a,b){this.D=this.C=null;this.F=a||null;this.G=!!b}
function zj(a){a.C||(a.C=new sg,a.D=0,a.F&&zg(a.F,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}p=mj.prototype;p.X=function(){zj(this);return this.D};p.add=function(a,b){zj(this);this.F=null;a=Aj(this,a);var c=this.C.get(a);c||this.C.set(a,c=[]);c.push(b);this.D=this.D+1;return this};function Bj(a,b){zj(a);b=Aj(a,b);vg(a.C.D,b)&&(a.F=null,a.D=a.D-a.C.get(b).length,ug(a.C,b))}p.ja=function(){zj(this);return 0==this.D};function Cj(a,b){zj(a);b=Aj(a,b);return vg(a.C.D,b)}
p.forEach=function(a,b){zj(this);this.C.forEach(function(c,d){A(c,function(c){a.call(b,c,d,this)},this)},this)};p.ia=function(){zj(this);for(var a=this.C.ca(),b=this.C.ia(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};p.ca=function(a){zj(this);var b=[];if(u(a))Cj(this,a)&&(b=mc(b,this.C.get(Aj(this,a))));else{a=this.C.ca();for(var c=0;c<a.length;c++)b=mc(b,a[c])}return b};
p.set=function(a,b){zj(this);this.F=null;a=Aj(this,a);Cj(this,a)&&(this.D=this.D-this.C.get(a).length);this.C.set(a,[b]);this.D=this.D+1;return this};p.get=function(a,b){if(!a)return b;a=this.ca(a);return 0<a.length?String(a[0]):b};
p.toString=function(){if(this.F)return this.F;if(!this.C)return"";for(var a=[],b=this.C.ia(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.ca(d);for(var f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}}return this.F=a.join("&")};function Aj(a,b){b=String(b);a.G&&(b=b.toLowerCase());return b}
function uj(a,b){b&&!a.G&&(zj(a),a.F=null,a.C.forEach(function(a,b){var c=b.toLowerCase();b!=c&&(Bj(this,b),Bj(this,c),0<a.length&&(this.F=null,this.C.set(Aj(this,c),nc(a)),this.D=this.D+a.length))},a));a.G=b};var Dj={},Ej={},Fj={},Gj={};function Hj(){throw Error("Do not instantiate directly");}Hj.prototype.Cb=null;Hj.prototype.bb=m(Ma);Hj.prototype.toString=m(Ma);function Ij(){Hj.call(this)}z(Ij,Hj);Ij.prototype.Na=Dj;function Jj(a,b){return null!=a&&a.Na===b};function Kj(a){if(null!=a)switch(a.Cb){case 1:return 1;case -1:return-1;case 0:return 0}return null}function Lj(a){return Jj(a,Dj)?a:a instanceof $d?Mj(be(a),a.C()):Mj(Cc(String(String(a))),Kj(a))}var Mj=function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a,d){a=new b(String(a));void 0!==d&&(a.Cb=d);return a}}(Ij);function Nj(a){return Jj(a,Dj)?String(String(a.bb()).replace(Oj,"").replace(Pj,"&lt;")).replace(Qj,Rj):Cc(String(a))}
function Sj(a){Jj(a,Ej)||Jj(a,Fj)?a=Tj(a):a instanceof Bd?a=Tj(Dd(a)):a instanceof vd?a=Tj(xd(a)):(a=String(a),a=Uj.test(a)?a.replace(Vj,Wj):ra);return a}var Xj={"\x00":"&#0;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Rj(a){return Xj[a]}
var Yj={"\x00":"%00","\u0001":"%01","\u0002":"%02","\u0003":"%03","\u0004":"%04","\u0005":"%05","\u0006":"%06","\u0007":"%07","\b":"%08","\t":"%09","\n":"%0A","\x0B":"%0B","\f":"%0C","\r":"%0D","\u000e":"%0E","\u000f":"%0F","\u0010":"%10","\u0011":"%11","\u0012":"%12","\u0013":"%13","\u0014":"%14","\u0015":"%15","\u0016":"%16","\u0017":"%17","\u0018":"%18","\u0019":"%19","\u001a":"%1A","\u001b":"%1B","\u001c":"%1C","\u001d":"%1D","\u001e":"%1E","\u001f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",
")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","\u007f":"%7F","\u0085":"%C2%85","\u00a0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB",
"\uff3d":"%EF%BC%BD"};function Wj(a){return Yj[a]}var Qj=/[\x00\x22\x27\x3c\x3e]/g,Vj=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,Uj=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,Zj=/^[^&:\/?#]*(?:[\/?#]|$)|^https?:|^data:image\/[a-z0-9+]+;base64,[a-z0-9+\/]+=*$|^blob:/i;function Tj(a){return String(a).replace(Vj,Wj)}
var Oj=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Pj=/</g;function ak(a,b,c){b=c||b;c=a.hc;var d=a.Gc,e=a.ec;a=a.depth;var f=e.extraIconClass,h='<li class="comment" id="c'+Nj(e.id)+'"><div class="avatar-image-container"><img src="',n=e.authorAvatarSrc;Jj(n,Ej)||Jj(n,Fj)?n=Tj(n):n instanceof Bd?n=Tj(Dd(n)):n instanceof vd?n=Tj(xd(n)):(n=String(n),n=Zj.test(n)?n.replace(Vj,Wj):ra);f=h+Nj(n)+'" alt=""/></div><div class="comment-block"><div class="comment-header"><cite class="user">'+(e.authorUrl?'<a href="'+Nj(Sj(e.authorUrl))+'">'+Lj(e.author)+"</a>":Lj(e.author))+
'</cite><span class="icon user '+Nj(null!=f?f:"")+'"></span><span class="datetime secondary-text"><a rel="nofollow" href="'+Nj(Sj(e.url))+'">'+Lj(e.timestamp)+'</a></span></div><p class="comment-content">'+Lj(e.body)+'</p><span class="comment-actions secondary-text">'+(a<c.maxDepth?'<a class="comment-reply" target="_self" data-comment-id="'+Nj(e.id)+'">'+Lj(d.reply)+"</a>":"")+'<span class="item-control blog-admin '+Nj(e.adminClass)+'"><a target="_self" href="'+Nj(Sj(e.deleteUrl))+'">'+Lj(d["delete"])+
'</a></span></span></div><div class="comment-replies">';h=e.replies;h=null!=h?h:[];f+='<div id="c'+Nj(e.id)+'-rt" class="comment-thread inline-thread'+(0==h.length?" hidden":"")+'"><span class="thread-toggle thread-expanded"><span class="thread-arrow"></span><span class="thread-count"><a target="_self">'+Lj(d.replies)+'</a></span></span><ol id="c'+Nj(e.id)+'-ra" class="thread-chrome thread-expanded"><div>';n=h.length;for(var q=0;q<n;q++)f+=ak({hc:c,Gc:d,ec:h[q],depth:a?a+1:1},b);f+='</div><div id="c'+
Nj(e.id)+'-continue" class="continue"><a class="comment-reply" target="_self" data-comment-id="'+Nj(e.id)+'">'+Lj(d.reply)+'</a></div></ol></div></div><div class="comment-replybox-single" id="c'+Nj(e.id)+'-ce"></div></li>';return Mj(f)};function bk(){}Rb(bk);bk.prototype.C=0;function ck(a){M.call(this);this.fa=a||cc||(cc=new Fe);this.ea=null;this.ta=!1;this.C=null;this.D=void 0;this.M=this.N=this.F=null}z(ck,M);p=ck.prototype;p.zf=bk.Ha();p.Oa=m("C");function dk(a){a.D||(a.D=new fg(a));return a.D}p.Nb=function(a){if(this.F&&this.F!=a)throw Error("Method not supported");ck.O.Nb.call(this,a)};p.Fc=function(){this.C=this.fa.D.createElement("DIV")};
p.render=function(a){if(this.ta)throw Error("Component already rendered");this.C||this.Fc();a?a.insertBefore(this.C,null):this.fa.D.body.appendChild(this.C);this.F&&!this.F.ta||this.ab()};p.ab=function(){this.ta=!0;ek(this,function(a){!a.ta&&a.Oa()&&a.ab()})};function fk(a){ek(a,function(a){a.ta&&fk(a)});a.D&&jg(a.D);a.ta=!1}p.aa=function(){this.ta&&fk(this);this.D&&(this.D.wa(),delete this.D);ek(this,function(a){a.wa()});this.C&&ve(this.C);this.F=this.C=this.M=this.N=null;ck.O.aa.call(this)};
function ek(a,b){a.N&&A(a.N,b,void 0)}p.removeChild=function(a,b){if(a){var c=u(a)?a:a.ea||(a.ea=":"+(a.zf.C++).toString(36));this.M&&c?(a=this.M,a=(null!==a&&c in a?a[c]:void 0)||null):a=null;if(c&&a){var d=this.M;c in d&&delete d[c];lc(this.N,a);b&&(fk(a),a.C&&ve(a.C));b=a;if(null==b)throw Error("Unable to set parent component");b.F=null;ck.O.Nb.call(b,null)}}if(!a)throw Error("Child is not in parent component");return a};function gk(a,b,c,d){ck.call(this,d);this.L=c||window;this.ma=a;this.W=b;this.da={};this.T=this.G=null;this.K={};this.K.GOOGLEPLUS={Pa:"Google+",Ya:this.Jd};this.K.EMAIL={Pa:"Email",Ya:this.Hd};this.K.FACEBOOK={Pa:"Facebook",Ya:this.Id};this.K.TWITTER={Pa:"Twitter",Ya:this.Kd}}z(gk,ck);p=gk.prototype;
p.Fc=function(){var a=this.fa,b=a.C("DIV",{style:"position:absolute;width:100%;left:0;top:0;height:100%;z-index:100;","class":"mobile-share-panel-outer"});this.G=a.C("DIV",{style:"position:absolute;;width:230px;height:200px;","class":"mobile-share-panel-inner"});b.appendChild(this.G);var c=a.C("DIV",{"class":"mobile-share-panel-title"});c.innerText=na;c.textContent=na;this.G.appendChild(c);this.T=a.C("A",{href:"javascript:void(0)","class":"mobile-share-panel-button-close"});this.T.innerHTML="&times;";
c.appendChild(this.T);for(var d in this.K){c=a.C("A",{target:oa,display:ua,"class":"mobile-share-panel-button mobile-share-panel-button-"+d.toLowerCase()});var e=a.C(ja),f=this.K[d];e.innerText=f.Pa;e.textContent=f.Pa;c.href=f.Ya.call(this);c.appendChild(e);this.G.appendChild(c);this.da[d]=c}this.C=b};
p.ab=function(){gk.O.ab.call(this);for(var a in this.da){var b=this.da[a];b&&hg(dk(this),b,xa,this.Bb)}hg(dk(this),this.T,xa,this.Bb);a=this.Oa();hg(dk(this),a,xa,this.Bb);this.$b();hg(dk(this),this.L,"scroll",this.$b)};p.$b=function(){var a=this.L.innerHeight,b=this.L.innerWidth,c=this.L.pageYOffset,d=this.L.pageXOffset,e=0;200<a&&(e=(a-200)/2);Mi(this.G,"top",e+c+"px");a=0;230<b&&(a=(b-230)/2);Mi(this.G,"left",a+d+"px")};
p.Kd=function(){return"https://twitter.com/intent/tweet?text="+encodeURIComponent(this.ma+": "+this.W)};p.Id=function(){return"https://m.facebook.com/sharer.php?u="+encodeURIComponent(this.W)+"&t="+encodeURIComponent(this.ma)};p.Hd=function(){return"mailto:?subject="+encodeURIComponent(this.ma)+"&body="+encodeURIComponent(this.W)};p.Jd=function(){return"https://plus.google.com/share?source=blogger:mobile:share&url="+encodeURIComponent(this.W)};p.Bb=function(){var a=this.Oa();a&&(a.style.display=l)};var hk=/^((http(s)?):)?\/\/((((lh[3-6](-tt|-d[a-g,z])?\.((ggpht)|(googleusercontent)|(google)))|(([1-4]\.bp\.blogspot)|(bp[0-3]\.blogger))|((((cp|ci|gp)[3-6])|(ap[1-2]))\.(ggpht|googleusercontent))|(gm[1-4]\.ggpht)|(((yt[3-4])|(sp[1-3]))\.(ggpht|googleusercontent)))\.com)|(dp[3-6]\.googleusercontent\.cn)|(lh[3-6]\.(googleadsserving\.cn|xn--9kr7l\.com))|(photos\-image\-(dev|qa)(-auth)?\.corp\.google\.com)|((dev|dev2|dev3|qa|qa2|qa3|qa-red|qa-blue|canary)[-.]lighthouse\.sandbox\.google\.com\/image)|(image\-(dev|qa)\-lighthouse(-auth)?\.sandbox\.google\.com(\/image)?))\//i,
ik=/^(https?:)?\/\/sp[1-4]\.((ggpht)|(googleusercontent))\.com\//i,jk=/^(https?:)?\/\/(qa(-red|-blue)?|dev2?|image-dev)(-|\.)lighthouse(-auth)?\.sandbox\.google\.com\//i,kk=/^(https?:)?\/\/lighthouse-(qa(-red|-blue)?|dev2)\.corp\.google\.com\//i;function lk(a){return hk.test(a)||ik.test(a)||jk.test(a)||kk.test(a)};function mk(){}var nk=typeof Uint8Array==k;function ok(a,b){a.J=null;b||(b=[]);a.W=void 0;a.F=-1;a.C=b;a:{if(b=a.C.length){--b;var c=a.C[b];if(!(null===c||typeof c!=ib||v(c)||nk&&c instanceof Uint8Array)){a.G=b-a.F;a.D=c;break a}}a.G=Number.MAX_VALUE}a.$={}}var pk=[];function R(a,b){if(b<a.G){b+=a.F;var c=a.C[b];return c===pk?a.C[b]=[]:c}if(a.D)return c=a.D[b],c===pk?a.D[b]=[]:c}function qk(a,b){a=R(a,b);return null==a?a:+a}function S(a,b){a=R(a,b);return null==a?!1:a}
function T(a,b,c){if(b<a.G)a.C[b+a.F]=c;else{var d=a.G+a.F;a.C[d]||(a.D=a.C[d]={});a.D[b]=c}}function rk(a){if(a.J)for(var b in a.J){var c=a.J[b];if(v(c))for(var d=0;d<c.length;d++)c[d]&&rk(c[d]);else c&&rk(c)}}mk.prototype.toString=function(){rk(this);return this.C.toString()};function sk(a){ok(this,a)}z(sk,mk);p=sk.prototype;p.eb=function(){return R(this,1)};p.Pc=function(a){T(this,1,a)};p.Hb=function(){return R(this,12)};p.Uc=function(a){T(this,12,a)};p.Fb=function(){return R(this,13)};p.Lc=function(a){T(this,13,a)};p.Xe=function(){return R(this,33)};p.mh=function(a){T(this,33,a)};p.rc=function(){return S(this,2)};p.Kc=function(a){T(this,2,a)};p.qc=function(){return R(this,51)};p.Jc=function(a){T(this,51,a)};p.vc=function(){return R(this,32)};
p.Nc=function(a){T(this,32,a)};p.zc=function(){return S(this,19)};p.Rc=function(a){T(this,19,a)};p.Ac=function(){return S(this,52)};p.Sc=function(a){T(this,52,a)};p.Bc=function(){return S(this,67)};p.Tc=function(a){T(this,67,a)};p.ae=function(){return R(this,80)};p.jg=function(a){T(this,80,a)};p.oc=function(){return S(this,20)};p.Ic=function(a){T(this,20,a)};p.wc=function(){return R(this,60)};p.Oc=function(a){T(this,60,a)};p.be=function(){return S(this,3)};p.kg=function(a){T(this,3,a)};
p.uc=function(){return S(this,4)};p.Mc=function(a){T(this,4,a)};p.ue=function(){return R(this,65)};p.Ig=function(a){T(this,65,a)};p.fe=function(){return R(this,94)};p.qg=function(a){T(this,94,a)};p.ef=function(){return R(this,9)};p.uh=function(a){T(this,9,a)};p.ff=function(){return R(this,10)};p.vh=function(a){T(this,10,a)};p.gf=function(){return R(this,11)};p.wh=function(a){T(this,11,a)};p.bf=function(){return S(this,14)};p.sh=function(a){T(this,14,a)};p.je=function(){return S(this,34)};
p.wg=function(a){T(this,34,a)};p.cf=function(){return S(this,72)};p.th=function(a){T(this,72,a)};p.ee=function(){return R(this,15)};p.og=function(a){T(this,15,a)};p.pe=function(){return R(this,16)};p.Cg=function(a){T(this,16,a)};p.te=function(){return R(this,17)};p.Hg=function(a){T(this,17,a)};p.Cc=function(){return R(this,18)};p.yh=function(a){T(this,18,a)};p.Dc=function(){return R(this,45)};p.zh=function(a){T(this,45,a)};p.qe=function(){return R(this,22)};p.Eg=function(a){T(this,22,a)};
p.re=function(){return R(this,54)};p.Fg=function(a){T(this,54,a)};p.Ze=function(){return R(this,82)};p.oh=function(a){T(this,82,a)};p.Je=function(){return R(this,83)};p.Xg=function(a){T(this,83,a)};p.$e=function(){return R(this,93)};p.ph=function(a){T(this,93,a)};p.Ye=function(){return R(this,95)};p.nh=function(a){T(this,95,a)};p.de=function(){return R(this,21)};p.mg=function(a){T(this,21,a)};p.Zd=function(){return S(this,23)};p.hg=function(a){T(this,23,a)};p.hf=function(){return R(this,24)};
p.xh=function(a){T(this,24,a)};p.mf=function(){return R(this,36)};p.Ah=function(a){T(this,36,a)};p.yc=function(){return S(this,6)};p.Qc=function(a){T(this,6,a)};p.Ve=function(){return R(this,26)};p.kh=function(a){T(this,26,a)};p.me=function(){return R(this,30)};p.zg=function(a){T(this,30,a)};p.nf=function(){return R(this,31)};p.Bh=function(a){T(this,31,a)};p.Fe=function(){return R(this,27)};p.Tg=function(a){T(this,27,a)};p.Me=function(){return R(this,28)};p.$g=function(a){T(this,28,a)};
p.Qe=function(){return R(this,57)};p.eh=function(a){T(this,57,a)};p.Re=function(){return R(this,58)};p.gh=function(a){T(this,58,a)};p.Oe=function(){return R(this,59)};p.bh=function(a){T(this,59,a)};p.Se=function(){return S(this,35)};p.hh=function(a){T(this,35,a)};p.Te=function(){return S(this,41)};p.ih=function(a){T(this,41,a)};p.Ne=function(){return S(this,64)};p.ah=function(a){T(this,64,a)};p.Ee=function(){return S(this,48)};p.Sg=function(a){T(this,48,a)};p.Pe=function(){return S(this,49)};
p.dh=function(a){T(this,49,a)};p.ve=function(){return R(this,97)};p.Jg=function(a){T(this,97,a)};p.Be=function(){return S(this,37)};p.Pg=function(a){T(this,37,a)};p.Yd=function(){return R(this,38)};p.gg=function(a){T(this,38,a)};p.Xd=function(){return R(this,86)};p.eg=function(a){T(this,86,a)};p.Wd=function(){return R(this,39)};p.dg=function(a){T(this,39,a)};p.Ud=function(){return R(this,87)};p.bg=function(a){T(this,87,a)};p.Ge=function(){return R(this,88)};p.Ug=function(a){T(this,88,a)};
p.af=function(){return R(this,89)};p.qh=function(a){T(this,89,a)};p.Ce=function(){return R(this,40)};p.Qg=function(a){T(this,40,a)};p.he=function(){return R(this,42)};p.ug=function(a){T(this,42,a)};p.ge=function(){return R(this,43)};p.tg=function(a){T(this,43,a)};p.Le=function(){return R(this,44)};p.Zg=function(a){T(this,44,a)};p.Ke=function(){return R(this,62)};p.Yg=function(a){T(this,62,a)};p.De=function(){return R(this,46)};p.Rg=function(a){T(this,46,a)};p.Ie=function(){return R(this,61)};
p.Wg=function(a){T(this,61,a)};p.ke=function(){return R(this,50)};p.xg=function(a){T(this,50,a)};p.Ae=function(){return R(this,53)};p.Og=function(a){T(this,53,a)};p.ze=function(){return R(this,55)};p.Ng=function(a){T(this,55,a)};p.We=function(){return R(this,56)};p.lh=function(a){T(this,56,a)};p.rf=function(){return R(this,63)};p.Dh=function(a){T(this,63,a)};p.tf=function(){return R(this,81)};p.Fh=function(a){T(this,81,a)};p.ce=function(){return R(this,90)};p.lg=function(a){T(this,90,a)};
p.qf=function(){return R(this,68)};p.Ch=function(a){T(this,68,a)};p.sf=function(){return R(this,69)};p.Eh=function(a){T(this,69,a)};p.we=function(){return R(this,66)};p.Kg=function(a){T(this,66,a)};p.oe=function(){return R(this,70)};p.Bg=function(a){T(this,70,a)};p.se=function(){return R(this,71)};p.Gg=function(a){T(this,71,a)};p.xe=function(){return R(this,73)};p.Lg=function(a){T(this,73,a)};p.ie=function(){return R(this,84)};p.vg=function(a){T(this,84,a)};p.ye=function(){return R(this,91)};
p.Mg=function(a){T(this,91,a)};p.ne=function(){return R(this,96)};p.Ag=function(a){T(this,96,a)};p.Td=function(){return R(this,74)};p.ag=function(a){T(this,74,a)};p.$f=function(){return R(this,75)};p.Dg=function(a){T(this,75,a)};p.He=function(){return qk(this,76)};p.Vg=function(a){T(this,76,a)};p.uf=function(){return qk(this,77)};p.Gh=function(a){T(this,77,a)};p.Ue=function(){return qk(this,78)};p.jh=function(a){T(this,78,a)};p.le=function(){return qk(this,79)};p.yg=function(a){T(this,79,a)};
p.Vd=function(){return R(this,85)};p.cg=function(a){T(this,85,a)};p.$d=function(){return R(this,92)};p.ig=function(a){T(this,92,a)};function U(){ok(this,void 0)}z(U,sk);U.prototype.T=function(a){this.K=a};U.prototype.M=m("K");U.prototype.Y=function(a){this.L=a};U.prototype.N=m("L");function tk(){this.D=void 0;this.C={}}p=tk.prototype;p.set=function(a,b){uk(this,a,b,!1)};p.add=function(a,b){uk(this,a,b,!0)};function uk(a,b,c,d){for(var e=0;e<b.length;e++){var f=b.charAt(e);a.C[f]||(a.C[f]=new tk);a=a.C[f]}if(d&&void 0!==a.D)throw Error('The collection already contains the key "'+b+'"');a.D=c}function vk(a,b){for(var c=0;c<b.length;c++)if(a=a.C[b.charAt(c)],!a)return;return a}p.get=function(a){return(a=vk(this,a))?a.D:void 0};p.ca=function(){var a=[];wk(this,a);return a};
function wk(a,b){void 0!==a.D&&b.push(a.D);for(var c in a.C)wk(a.C[c],b)}p.ia=function(a){var b=[];if(a){for(var c=this,d=0;d<a.length;d++){var e=a.charAt(d);if(!c.C[e])return[];c=c.C[e]}xk(c,a,b)}else xk(this,"",b);return b};function xk(a,b,c){void 0!==a.D&&c.push(b);for(var d in a.C)xk(a.C[d],b+d,c)}p.X=function(){var a=this.ca();if(a.X&&typeof a.X==k)a=a.X();else if(Tb(a)||u(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a};p.ja=function(){return void 0===this.D&&Xc(this.C)};function yk(){if(!zk){var a=zk=new tk,b;for(b in Ak)a.add(b,Ak[b])}}var zk;function V(a,b){this.C=a;this.D=b}
var Ak={a:new V([3,0],[U.prototype.mg,U.prototype.lh]),al:new V([3],[U.prototype.ag]),b:new V([3,0],[U.prototype.hg,U.prototype.gg]),ba:new V([0],[U.prototype.cg]),bc:new V([0],[U.prototype.bg]),br:new V([0],[U.prototype.eg]),c:new V([3,0],[U.prototype.Kc,U.prototype.dg]),cc:new V([3],[U.prototype.Jc]),ci:new V([3],[U.prototype.Nc]),cp:new V([0],[U.prototype.ig]),cv:new V([0],[U.prototype.qg]),d:new V([3],[U.prototype.kg]),df:new V([3],[U.prototype.jg]),dv:new V([3],[U.prototype.lg]),e:new V([0],
[U.prototype.og]),f:new V([4],[U.prototype.Cg]),fg:new V([3],[U.prototype.wg]),fh:new V([3],[U.prototype.zg]),fm:new V([3],[U.prototype.vg]),fo:new V([2],[U.prototype.yg]),ft:new V([3],[U.prototype.xg]),fv:new V([3],[U.prototype.Bh]),g:new V([3],[U.prototype.sh]),gd:new V([3],[U.prototype.Xg]),h:new V([3,0],[U.prototype.Mc,U.prototype.Lc]),i:new V([3],[U.prototype.Eg]),ic:new V([0],[U.prototype.Gg]),id:new V([3],[U.prototype.Bg]),il:new V([3],[U.prototype.Ag]),ip:new V([3],[U.prototype.Fg]),iv:new V([0],
[U.prototype.Dg]),j:new V([1],[U.prototype.T]),k:new V([3,0],[U.prototype.Hg,U.prototype.ug]),l:new V([0],[U.prototype.Zg]),lf:new V([3],[U.prototype.Ig]),lo:new V([3],[U.prototype.Jg]),m:new V([0],[U.prototype.Dh]),md:new V([3],[U.prototype.Mg]),mm:new V([4],[U.prototype.Fh]),mo:new V([3],[U.prototype.Lg]),mv:new V([3],[U.prototype.Kg]),n:new V([3],[U.prototype.Ic]),nc:new V([3],[U.prototype.Ng]),nd:new V([3],[U.prototype.Og]),ng:new V([3],[U.prototype.nh]),no:new V([3],[U.prototype.Pg]),ns:new V([3],
[U.prototype.Qg]),nt0:new V([4],[U.prototype.Ah]),nu:new V([3],[U.prototype.Rg]),nw:new V([3],[U.prototype.Sg]),o:new V([1,3],[U.prototype.Y,U.prototype.Tg]),p:new V([3,0],[U.prototype.Rc,U.prototype.tg]),pa:new V([3],[U.prototype.Wg]),pc:new V([0],[U.prototype.Ug]),pd:new V([3],[U.prototype.Oc]),pf:new V([3],[U.prototype.Tc]),pg:new V([3],[U.prototype.th]),pi:new V([2],[U.prototype.Vg]),pp:new V([3],[U.prototype.Sc]),q:new V([4],[U.prototype.$g]),r:new V([3,0],[U.prototype.Qc,U.prototype.kh]),rg:new V([3],
[U.prototype.bh]),rh:new V([3],[U.prototype.dh]),rj:new V([3],[U.prototype.eh]),ro:new V([2],[U.prototype.jh]),rp:new V([3],[U.prototype.gh]),rw:new V([3],[U.prototype.hh]),rwa:new V([3],[U.prototype.ah]),rwu:new V([3],[U.prototype.ih]),s:new V([3,0],[U.prototype.mh,U.prototype.Pc]),sc:new V([0],[U.prototype.qh]),sg:new V([3],[U.prototype.oh]),sm:new V([3],[U.prototype.ph]),t:new V([4],[U.prototype.xh]),u:new V([3],[U.prototype.yh]),ut:new V([3],[U.prototype.zh]),v:new V([0],[U.prototype.Yg]),vb:new V([0],
[U.prototype.Ch]),vl:new V([0],[U.prototype.Eh]),w:new V([0],[U.prototype.Uc]),x:new V([0],[U.prototype.uh]),y:new V([0],[U.prototype.vh]),ya:new V([2],[U.prototype.Gh]),z:new V([0],[U.prototype.wh])};
function Bk(a,b){var c=new U,d=new U;if(""!=b){b=b.split("-");for(var e=0;e<b.length;e++){var f=b[e];if(0!=f.length){var h=f,n=!1,q=h;var w=h.substring(0,1);w!=w.toLowerCase()&&(n=!0,q=h.substring(0,1).toLowerCase()+h.substring(1));var O=zk;for(w=1;w<=q.length;++w){var F=O,E=q.substring(0,w);if(0==E.length?F.ja():!vk(F,E))break}w=1==w?null:(q=O.get(q.substring(0,w-1)))?{Tf:h.substring(0,w-1),value:h.substring(w-1),Lh:n,attributes:q}:null;if(w){h=[];n=[];q=!1;for(O=0;O<w.attributes.C.length;O++){F=
w.attributes.C[O];var J=w.value;E=e;if(w.Lh&&1==F)for(var pa=J.length;12>pa&&E<b.length-1;)J+="-"+b[E+1],pa=J.length,++E;else if(2==F)for(;E<b.length-1&&b[E+1].match(/^[\d\.]/);)J+="-"+b[E+1],++E;pa=w.attributes.D[O];J=Ck(a,F)(w.Tf,J,c,d,pa);if(null===J){q=!0;e=E;break}else h.push(F),n.push(J)}if(!q)for(w=0;w<n.length;w++)q=h[w],J=n[w],Dk(a,q)(f,J)}}}}return new Ek(c,d)}function Fk(a,b,c,d,e){e.apply(c,[b]);a=a.substring(0,1);e.apply(d,[a==a.toUpperCase()])}p=yk.prototype;
p.Wf=function(a,b,c,d,e){if(""==b)return 0;isFinite(b)&&(b=String(b));b=u(b)?/^\s*-?0x/i.test(b)?parseInt(b,16):parseInt(b,10):NaN;if(isNaN(b))return 1;Fk(a,b,c,d,e);return null};p.Lf=Cb();p.Vf=function(a,b,c,d,e){if(""==b)return 0;var f=Number(b);b=0==f&&/^[\s\xa0]*$/.test(b)?NaN:f;if(isNaN(b))return 1;Fk(a,b,c,d,e);return null};p.Kf=Cb();p.Uf=function(a,b,c,d,e){if(""!=b)return 2;Fk(a,!0,c,d,e);return null};p.Jf=Cb();p.Xf=function(a,b,c,d,e){if(""==b)return 0;Fk(a,b,c,d,e);return null};p.Mf=Cb();
function Ck(a,b){switch(b){case 0:return x(a.Wf,a);case 2:return x(a.Vf,a);case 3:return x(a.Uf,a);case 4:case 1:return x(a.Xf,a);default:return Cb()}}function Dk(a,b){switch(b){case 0:return x(a.Lf,a);case 2:return x(a.Kf,a);case 3:return x(a.Jf,a);case 4:case 1:return x(a.Mf,a);default:return Cb()}}function Ek(a,b){this.C=a;this.D=b};function Gk(a,b){null!=a&&this.D.apply(this,arguments)}Gk.prototype.C="";Gk.prototype.set=function(a){this.C=""+a};Gk.prototype.D=function(a,b,c){this.C+=String(a);if(null!=b)for(var d=1;d<arguments.length;d++)this.C+=arguments[d];return this};Gk.prototype.toString=m("C");function Hk(a){this.G=null;this.F=[];this.D=null;Ik(this,a)}function Jk(a){null==a.G&&(a.G=new yk);return a.G}function Ik(a,b){a.D=b?u(b)?Bk(Jk(a),b):b:Bk(Jk(a),"")}function Kk(a,b,c,d){b||typeof b==hb&&0==b||(b=void 0);var e=a.D.C;a=a.D.D;var f=c.call(e);b!=f&&(void 0!=f&&c.call(a),d.call(e,b))}p=Hk.prototype;p.ub=function(a){Kk(this,a,U.prototype.rc,U.prototype.Kc);return this};p.tb=function(a){Kk(this,a,U.prototype.qc,U.prototype.Jc);return this};
p.wb=function(a){Kk(this,a,U.prototype.vc,U.prototype.Nc);return this};p.Va=function(a){Kk(this,a,U.prototype.Fb,U.prototype.Lc);return this};p.sb=function(a){Kk(this,a,U.prototype.oc,U.prototype.Ic);return this};p.yb=function(a){Kk(this,a,U.prototype.zc,U.prototype.Rc);return this};p.xb=function(a){Kk(this,a,U.prototype.wc,U.prototype.Oc);return this};p.Ab=function(a){Kk(this,a,U.prototype.Bc,U.prototype.Tc);return this};p.zb=function(a){Kk(this,a,U.prototype.Ac,U.prototype.Sc);return this};
p.Ga=function(a){Kk(this,a,U.prototype.eb,U.prototype.Pc);return this};p.Wa=function(a){Kk(this,a,U.prototype.Hb,U.prototype.Uc);return this};function Lk(a){Ik(a,"");return a}
p.sa=function(){this.F.length=0;W(this,"s",U.prototype.eb);W(this,"w",U.prototype.Hb);X(this,"c",U.prototype.rc);W(this,"c",U.prototype.Wd,16,6);X(this,"d",U.prototype.be);W(this,"h",U.prototype.Fb);X(this,"s",U.prototype.Xe);X(this,"h",U.prototype.uc);X(this,"p",U.prototype.zc);X(this,"pa",U.prototype.Ie);X(this,"pd",U.prototype.wc);X(this,"pp",U.prototype.Ac);X(this,"pf",U.prototype.Bc);W(this,"p",U.prototype.ge);X(this,"n",U.prototype.oc);W(this,"r",U.prototype.Ve);X(this,"r",U.prototype.yc);X(this,
"fh",U.prototype.me);X(this,"fv",U.prototype.nf);X(this,"cc",U.prototype.qc);X(this,"ci",U.prototype.vc);X(this,"o",U.prototype.Fe);Mk(this,"o",U.prototype.N);Mk(this,"j",U.prototype.M);W(this,"x",U.prototype.ef);W(this,"y",U.prototype.ff);W(this,"z",U.prototype.gf);X(this,"g",U.prototype.bf);X(this,"fg",U.prototype.je);X(this,"ft",U.prototype.ke);W(this,"e",U.prototype.ee);Mk(this,"f",U.prototype.pe);X(this,"k",U.prototype.te);W(this,"k",U.prototype.he);X(this,"u",U.prototype.Cc);X(this,"ut",U.prototype.Dc);
X(this,"i",U.prototype.qe);X(this,"ip",U.prototype.re);X(this,"a",U.prototype.de);W(this,"a",U.prototype.We);W(this,"m",U.prototype.rf);W(this,"vb",U.prototype.qf);W(this,"vl",U.prototype.sf);X(this,"lf",U.prototype.ue);X(this,"mv",U.prototype.we);X(this,"id",U.prototype.oe);W(this,"ic",U.prototype.se);X(this,"b",U.prototype.Zd);W(this,"b",U.prototype.Yd);Mk(this,"t",U.prototype.hf);Mk(this,"nt0",U.prototype.mf);X(this,"rw",U.prototype.Se);X(this,"rwu",U.prototype.Te);X(this,"rwa",U.prototype.Ne);
X(this,"nw",U.prototype.Ee);X(this,"rh",U.prototype.Pe);X(this,"nc",U.prototype.ze);X(this,"nd",U.prototype.Ae);X(this,"no",U.prototype.Be);Mk(this,"q",U.prototype.Me);X(this,"ns",U.prototype.Ce);W(this,"l",U.prototype.Le);W(this,"v",U.prototype.Ke);X(this,"nu",U.prototype.De);X(this,"rj",U.prototype.Qe);X(this,"rp",U.prototype.Re);X(this,"rg",U.prototype.Oe);X(this,"pg",U.prototype.cf);X(this,"mo",U.prototype.xe);X(this,"al",U.prototype.Td);W(this,"iv",U.prototype.$f);W(this,"pi",U.prototype.He);
W(this,"ya",U.prototype.uf);W(this,"ro",U.prototype.Ue);W(this,"fo",U.prototype.le);X(this,"df",U.prototype.ae);Mk(this,"mm",U.prototype.tf);X(this,"sg",U.prototype.Ze);X(this,"gd",U.prototype.Je);X(this,"fm",U.prototype.ie);W(this,"ba",U.prototype.Vd);W(this,"br",U.prototype.Xd);W(this,"bc",U.prototype.Ud,16,6);W(this,"pc",U.prototype.Ge,16,6);W(this,"sc",U.prototype.af,16,6);X(this,"dv",U.prototype.ce);X(this,"md",U.prototype.ye);W(this,"cp",U.prototype.$d);X(this,"sm",U.prototype.$e);W(this,"cv",
U.prototype.fe);X(this,"ng",U.prototype.Ye);X(this,"il",U.prototype.ne);X(this,"lo",U.prototype.ve);return this.F.join("-")};function Nk(a,b){if(void 0==b)return"";a=b-a.length;return 0>=a?"":Lc("0",a)}function W(a,b,c,d,e){var f=c.call(a.D.C);if(void 0!=f&&null!=f){d=void 0==d||10!=d&&16!=d?10:d;f=f.toString(d);var h=new Gk;h.D(16==d?"0x":"");h.D(Nk(f,e));h.D(f);Ok(a,b,h.toString(),c)}}function X(a,b,c){c.call(a.D.C)&&Ok(a,b,"",c)}function Mk(a,b,c){var d=c.call(a.D.C);d&&Ok(a,b,d,c)}
function Ok(a,b,c,d){d.call(a.D.D)&&(b=b.substring(0,1).toUpperCase()+b.substring(1));a.F.push(b+c)};function Y(a){Hk.call(this,a)}z(Y,Hk);p=Y.prototype;p.ub=function(a){a&&Pk(this);return Y.O.ub.call(this,a)};p.Va=function(a){null!=a&&this.Ga();return Y.O.Va.call(this,a)};p.wb=function(a){a&&Pk(this);return Y.O.wb.call(this,a)};p.tb=function(a){a&&Pk(this);return Y.O.tb.call(this,a)};p.Ga=function(a){Vb(a)&&(a=Math.max(a.width,a.height));null!=a&&(this.Wa(),this.Va());return Y.O.Ga.call(this,a)};p.yb=function(a){a&&Pk(this);return Y.O.yb.call(this,a)};
p.zb=function(a){a&&Pk(this);return Y.O.zb.call(this,a)};p.Ab=function(a){a&&Pk(this);return Y.O.Ab.call(this,a)};p.sb=function(a){a&&Pk(this);return Y.O.sb.call(this,a)};p.xb=function(a){a&&Pk(this);return Y.O.xb.call(this,a)};p.Wa=function(a){null!=a&&this.Ga();return Y.O.Wa.call(this,a)};function Pk(a){a.sb();a.tb();a.ub();a.wb();a.xb();a.yb();a.zb();a.Ab()}
p.sa=function(){var a=this.D.C;a.Cc()||a.Dc()?a.eb()||this.Ga(0):(a=this.D.C,a.eb()||a.Hb()||a.Fb()||(this.Ga(),this.Va(),this.Wa(),Pk(this)));return Y.O.sa.call(this)};var Qk=/^[^\/]*\/\//;function Rk(a){this.G=a;this.J="";(a=this.G.match(Qk))&&a[0]?(this.J=a[0],a=this.J.match(/\w+/)?this.G:"http://"+this.G.substring(this.J.length)):a="http://"+this.G;this.D=xj(a,!0);this.K=!0;this.$=!1}function Sk(a,b){a.F=a.F?a.F+("/"+b):b}
function Tk(a){if(void 0==a.C){a.F=null;a.C=a.D.J.substring(1).split("/");var b=a.C.length,c;if(c=2<b){c=a.D.D;var d=c.length-10;c=0<=d&&c.indexOf("google.com",d)==d&&"u"==a.C[0]}c&&(Sk(a,a.C[0]+"/"+a.C[1]),a.C.shift(),a.C.shift(),b-=2);if(0==b||4==b||7<b)return a.K=!1,a.C;if(2==b)Sk(a,a.C[0]);else if("image"==a.C[0])Sk(a,a.C[0]);else if(7==b||3==b)return a.K=!1,a.C;3>=b&&(a.$=!0,3==b&&(Sk(a,a.C[1]),a.C.shift(),--b),--b,c=a.C[b],d=c.indexOf("="),-1!=d&&(a.C[b]=c.substr(0,d),a.C.push(c.substr(d+1))))}return a.C}
function Uk(a){Tk(a);return a.$}function Vk(a){Tk(a);void 0==a.F&&(a.F=null);return a.F}function Wk(a){switch(Tk(a).length){case 7:return!0;case 6:return null==Vk(a);case 5:return!1;case 3:return!0;case 2:return null==Vk(a);case 1:return!1;default:return!1}}
function Xk(a,b){if(Uk(a))a:{var c=null!=Vk(a)?1:0;switch(b){case 6:b=0+c;break;case 4:if(!Wk(a)){a=null;break a}b=1+c;break;default:a=null;break a}a=Tk(a)[b]}else a:{c=null!=Vk(a)?1:0;switch(b){case 0:b=0+c;break;case 1:b=1+c;break;case 2:b=2+c;break;case 3:b=3+c;break;case 4:if(!Wk(a)){a=null;break a}b=4+c;break;case 5:b=Wk(a)?1:0;b=4+c+b;break;default:a=null;break a}a=Tk(a)[b]}return a}function Yk(a){void 0==a.Y&&(a.Y=Xk(a,0));return a.Y}
function Zk(a){void 0==a.da&&(a.da=Xk(a,1));return a.da}function $k(a){void 0==a.N&&(a.N=Xk(a,2));return a.N}function al(a){void 0==a.fa&&(a.fa=Xk(a,3));return a.fa}function bl(a){void 0==a.W&&(a.W=Xk(a,4));return a.W}function cl(a){void 0==a.M&&(a.M=Xk(a,5));return a.M};function dl(){}function el(a){Rk.call(this,a)}z(el,Rk);function fl(a){this.C=null;a instanceof el||(void 0==gl&&(gl=new dl),a=new el(a.toString()));a=this.C=a;if(void 0==a.L){var b=bl(a);b||(b="");a.L=Bk(new yk,b)}Hk.call(this,a.L);this.L=this.C.J;a=this.C;b=a.D.K;this.K=a.D.D+(b?":"+b:"");this.J=this.C.D.C.toString()}var gl;z(fl,Y);function hl(a){a.J="";return a}
fl.prototype.sa=function(){var a=this.C;Tk(a);if(!a.K)return this.C.G;a=fl.O.sa.call(this);var b=[];null!=Vk(this.C)&&b.push(Vk(this.C));if(Uk(this.C)){var c=this.C;void 0==c.T&&(c.T=Xk(c,6));b.push(c.T+(a?"="+a:""))}else b.push(Yk(this.C)),b.push(Zk(this.C)),b.push($k(this.C)),b.push(al(this.C)),a&&b.push(a),b.push(cl(this.C));return this.L+this.K+"/"+b.join("/")+(this.J?"?"+this.J:"")};function il(){this.F=null;this.C={};this.D=!1}Rb(il);il.prototype.J=function(a,b,c){c.ctrlKey||c.altKey||c.shiftKey||c.metaKey||(a=this.C[a])&&0<a.length&&(jl(this),cg()(a,b),c.preventDefault())};il.prototype.K=function(){jl(this);ag(Qb)};function jl(a){a.D||(document.body.appendChild(qe("LINK",{type:"text/css",rel:"stylesheet",href:a.G})),a.D=!0)};function kl(){this.D={};this.C=0;this.J=[];this.F=[];var a=this;this.K=function(){ll(a)}}function ml(a){for(var b=a.D,c=ne(document,"img","delayLoad",void 0),d=0;d<c.length;d++)if(c[d].style.display==l&&(c[d].style.display=""),5>d){var e=c[d];""!=e.longDesc&&(e.src=e.longDesc)}else e=c[d].id,""==e&&(e="av-delay-tempId-"+d),b[e]={lc:c[d],key:e},a.C++;0!=a.C&&(a.M=L(window,"scroll",a.K),a.L=L(window,"resize",a.K),nl(a))}
function ll(a){a.G&&window.clearTimeout(a.G);a.G=window.setTimeout(function(){a.G=null;nl(a)},100)}
function nl(a){if(!(0>a.C))if(0==a.C)jf(a.M),jf(a.L),a.C=-1;else{var b=!1,c;for(c in a.D){a:{var d=a;var e=a.D[c],f=window.document;f="CSS1Compat"==f.compatMode?f.documentElement:f.body;f=(new le(f.clientWidth,f.clientHeight)).height;var h=e.lc;1==h.nodeType?(h=Ri(h),h=new ke(h.left,h.top)):(h=h.changedTouches?h.changedTouches[0]:h,h=new ke(h.clientX,h.clientY));h=h.y;if(0<=h&&h<=f)d.J.push(e);else if(0<h&&h<Math.round(2.25*f))d.F.push(e);else if(0>h&&h>Math.round(-1.25*f))d.F.push(e);else{d=!1;break a}d=
!0}d&&(b=!0)}if(b){b=a.J.concat(a.F);for(c=0;c<b.length;c++)d=b[c].lc,""!=d.longDesc&&(d.src=d.longDesc),a.C--,delete a.D[b[c].key];a.J=[];a.F=[]}}};var ol={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function pl(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(ql.test(c)){a=c;if(!ql.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(rl,"#$1$1$2$2$3$3"));b.Jb=a.toLowerCase();b.type="hex";return b}a:{var d=a.match(sl);if(d){c=Number(d[1]);var e=Number(d[2]);d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length){a=c[0];e=c[1];c=c[2];a=Number(a);e=Number(e);c=Number(c);if(a!=(a&255)||e!=(e&255)||c!=(c&255))throw Error('"('+
a+","+e+","+c+'") is not a valid RGB color');c|=a<<16|e<<8;a=16>a?"#"+(16777216|c).toString(16).substr(1):"#"+c.toString(16);b.Jb=a;b.type="rgb";return b}if(ol&&(c=ol[a.toLowerCase()]))return b.Jb=c,b.type="named",b;throw Error(a+" is not a valid color string");}var rl=/#(.)(.)(.)/,ql=/^#(?:[0-9a-f]{3}){1,2}$/i,sl=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;var tl=!H.product.R&&!bd();function ul(a){if(/-[a-z]/.test("commentId"))return null;if(tl&&a.dataset){if(dd()&&!("commentId"in a.dataset))return null;a=a.dataset.commentId;return void 0===a?null:a}return a.getAttribute("data-"+"commentId".replace(/([A-Z])/g,"-$1").toLowerCase())};var vl={};function wl(a){Q.call(this,"Blog",a);this.C=a.V;this.K=new vi(Ai());if(this.C.data){a=new ph;this.L=this.C.data.showBacklinks;this.M=a.Z(va);this.J=a.Z("blog.canonicalUrl");this.N=a.Z("blog.url");if(this.C.data.lightboxEnabled){var b=this.C.data.lightboxModuleUrl,c=this.C.data.lightboxCssUrl,d=il.Ha(),e=od(b);eg($f.Ha(),b,e);d.G=c;b=ne(document,"DIV","post-body",this.C.C);for(c=0;c<b.length;c++){e="fakeId"+xl++;d=il.Ha();for(var f=ne(document,"IMG",void 0,b[c]),h=f.length,n=[],q=0;q<h;q++){var w=
f[q].src,O=null,F=De(f[q],"A");if(F){F=F.href;var E=F;var J=w;lk(E)&&lk(J)?(E=new el(E?Lk(hl(new fl(E))).sa():""),J=new el(J?Lk(hl(new fl(J))).sa():""),J=E.D.J==J.D.J):J=!1;if(J){if(F!=w&&(O=w),w=F,F=bl(new el(w)))F=Bk(new yk,F),F=new Y(F),Kk(F,void 0,U.prototype.uc,U.prototype.Mc),Kk(F,void 0,U.prototype.yc,U.prototype.Qc),F=F.sa(),w=new fl(w),Ik(w,F),w=w.sa()}else if(F!=w)continue;n.push({imageUrl:w,thumbnailUrl:O});L(f[q],xa,x(d.J,d,e,n.length-1))}}0<n.length&&(d.C[e]=n,d.F||(d.F=L(window,"load",
d.K,!1,d)))}}this.C.data.mobile&&(this.F=new gk(a.Z("blog.pageTitle"),this.J));this.G=this.D=null}}z(wl,Q);p=wl.prototype;
p.ka=function(a,b){if("backlinks"==a){this.L=!1;if(a=P(this.H,"backlinks-container"))b=$i(b),he(a,be(b));b=ne(document,"span","backlink-toggle-zippy",this.C.C);for(a=0;a<b.length;a++)b[a].onclick=this.Dd.bind(this);b=P(this.H,"backlinks-create-link");null!=b&&(b.onclick=this.cd.bind(this,b.href))}else if("getComments"==a){if(b.comments&&b.messages){a=b.comments;for(var c=b.config,d=0;d<a.length;d++)a:{var e=b,f=a[d];if(!document.getElementById("c"+f.id)){f.author=Ki(this.K,f.author);f.body=Ki(this.K,
f.body);var h=1;if(f.inReplyTo){var n=document.getElementById("c"+f.inReplyTo);if(n){var q;h=n;for(q=[];h;)B(h,"comment")&&q.push(h),h=we(h);h=q.length+1;q.length+1>e.config.maxDepth&&((n=De(n.parentNode,null,"comment",void 0))?(h--,f.inReplyTo=n.id.slice(1)):h=1)}}n=document.getElementById("c"+f.inReplyTo+"-ra");if(!n&&(n=document.getElementById("top-ra"),!n))break a;h={hc:e.config,Gc:e.messages,ec:f,depth:h};q=ak;e=cc||(cc=new Fe);h=q(h||vl,void 0,void 0);Vb(h)&&h instanceof Hj&&h.Na!==Dj&&h.Na===
Gj&&Cc(h.bb());if(h.Na===Gj)h=ce(h.toString());else{if(h.Na!==Dj)throw Error("Sanitized content was not of kind TEXT or HTML.");h=de(h.toString(),h.Cb||null)}e=e.D;q=h;h=e.createElement("DIV");nd?(q=ee(fe,q),he(h,be(q)),h.removeChild(h.firstChild)):he(h,be(q));if(1==h.childNodes.length)e=h.removeChild(h.firstChild);else for(e=e.createDocumentFragment();h.firstChild;)e.appendChild(h.firstChild);yl(this,e);n.appendChild(e);f.inReplyTo&&(f=document.getElementById("c"+f.inReplyTo+"-rt"))&&vc(f,ab)}}a.length<
c.commentsPerPage?(this.D=null,tc(K("loadmore",this.C.C),ab)):this.D=a[a.length-1].timestampAbs+1}}else wl.O.ka.call(this,a,b)};p.Fd=function(a){var b=null,c=null;a=De(a.currentTarget,null,"thread-toggle",void 0);B(a,vb)?(b=ub,c=vb):(b=vb,c=ub);A(me(c,we(a)),function(a){xc(a,c,b)})};p.yd=function(a){a=ul(a.currentTarget);zl(this,a||void 0)};
function zl(a,b){var c=document.getElementById(Ba);if(c){var d=xj(c.src),e=b?"c"+b:"top",f=document.getElementById(e+"-ce");f&&f!==we(c)&&(c.height="250px",c.style.display=ua,c.src="",f.appendChild(c),b?d.C.set("parentID",b):Bj(d.C,"parentID"),c.src=d.toString());A(me("continue",a.C.C),function(a){vc(a,ab)});(a=document.getElementById(e+"-continue"))&&tc(a,ab)}}p.xd=function(){this.G&&this.D&&kh(this.H,"getComments",{postId:this.G,publishedMin:this.D},function(a){return 500>zc(a)},ha)};
p.Dd=function(a){a=a||window.event;for(a=(a.srcElement||a.target).parentNode;a&&!B(a,"backlink-control");)a=a.parentNode;a&&(B(a,Va)?(vc(a,Va),tc(a,za)):(tc(a,Va),vc(a,za)))};
p.ga=function(){var a=document.getElementById(this.C.D);this.L&&kh(this.H,"backlinks",{postID:this.C.data.postId},function(a){500<=zc(a)?(window.console&&console.log&&(a=a.responseText.match(/bX-\w*/)[0],console.log("Error loading backlinks: "+a)),a=!1):a=!0;return a},ha);if(this.C.data.mobile){var b=I(Ba);Al()?b&&(b.style.display=ua):b&&(b.style.display=l);b=P(this.H,"comment-editor-toggle-link");null!=b&&(b.onclick=this.Ed);(b=I("mobile-share-button"))&&this.F&&(b.onclick=x(this.Pf,this))}this.T=
new kl;ml(this.T);var c=K("cmt_iframe_holder",a);if(c&&window.gapi&&gapi.comments&&gapi.comments.render){var d=this.C.data.iframeCommentsId;c.id=d;var e=this.C.data.legacyCommentModerationUrl,f=this.C.data.viewType,h=Bl(this.N),n=jj(xj(this.J),"http").toString();window.setTimeout(function(){if(Qi(c,"display")!=l)var a=Si(c);else{a=c.style;var b=a.display,O=a.visibility,F=a.position;a.visibility=ab;a.position=sa;a.display=cb;var E=Si(c);a.display=b;a.position=F;a.visibility=O;a=E}gapi.comments.render(d,
{href:h,query:n,first_party_property:"BLOGGER",legacy_comment_moderation_url:e,view_type:f,width:a.width})},10)}a&&Cl(a,this.M);Dl(this)};function Dl(a){yl(a,a.C.C);var b=K("loadmore",a.C.C);if(b){b.onclick=a.xd.bind(a);if(tl&&b.dataset)var c=b.dataset;else{c={};for(var d=b.attributes,e=0;e<d.length;++e){var f=d[e];if(0==f.name.lastIndexOf("data-",0)){var h=Oc(f.name.substr(5));c[h]=f.value}}}c.publishedMin&&c.postId&&(a.D=parseInt(c.publishedMin,10)+1,a.G=c.postId,vc(b,ab))}zl(a)}
function yl(a,b){A(me("thread-toggle",b),function(a){a.onclick=this.Fd.bind(this);A((a||document).getElementsByTagName("A"),function(a){a.href="javascript:;"})},a);A(me("comment-reply",b),function(a){a.onclick=this.yd.bind(this);a.href="javascript:;"},a)}
function Cl(a,b){var c=me("cmt_count_iframe_holder",a);c&&window.gapi&&gapi.commentcount&&gapi.commentcount.render&&window.setTimeout(function(){for(var a=0;a<c.length;a++){var e=c[a],f="_id_"+a+Math.random()*Math.pow(10,17);e.id=f;var h=e.getAttribute("data-url"),n=e.getAttribute("data-post-url"),q=e.getAttribute("data-count"),w=Ui(e),O=Yi(e),F=El(e);e.style.position=sa;e.style.left="-10000px";gapi.commentcount.render(f,{linkify:!0,href:n,query:h,onclick:$b(function(a){je(a+"#gpluscomments")},n),
onready:$b(function(a){a.style.verticalAlign="text-top";a.style.position="";a.style.left=""},e),preexisting_count:q,view_type:b,"font-family":w,"font-size":O+"px",color:F})}},10)}function Bl(a){a=xj(a);Bj(a.C,"m");return a.toString()}function El(a){a=Pi(a,"color")||(a.currentStyle?a.currentStyle.color:null)||a.style&&a.style.color;return pl(a).Jb}p.Pf=function(){if(this.F.ta){var a=this.F.Oa();a&&(a.style.display="")}else this.F.render()};
function Al(){var a=window.location.href.split("#");return a[a.length-1]&&"comment-form"==a[a.length-1]}p.Ed=function(){var a=I(Ba);a&&(a.style.display=a.style.display==l?ua:l);return!1};
p.cd=function(a){var b="";document.selection?b=document.selection.createRange().text:window.getSelection?b=window.getSelection():document.getSelection&&(b=document.getSelection());window.open(a+"?t="+encodeURIComponent(b)+"&u="+encodeURIComponent(window.location.href)+"&n="+encodeURIComponent(document.title),"bloggerForm","scrollbars=no,width=475,height=300,top=175,left=75,status=yes,resizable=yes");return!1};var xl=0;y("_BlogView",wl);function Fl(a){Q.call(this,"BlogList",a)}z(Fl,Q);p=Fl.prototype;p.Ob=null;p.jb=null;p.ga=function(){var a=this.H.Z();this.Ob=a.totalItems;this.jb=a.numItemsToShow;0!=this.jb&&this.Ob>this.jb&&(jh(this.H,"show-all").onclick=this.Xc.bind(this),jh(this.H,"show-n").onclick=this.Xc.bind(this));L(window,"load",this.wd)};
p.Xc=function(){var a=P(this.H,"blogs");if(null!=a){a=a.getElementsByTagName("li");for(var b=this.jb;b<this.Ob;b++){var c=a[b];c.style.display=c.style.display==l?ua:l}a=jh(this.H,"show-all");a.style.display=a.style.display==l?cb:l;a=jh(this.H,"show-n");a.style.display=a.style.display==l?cb:l}};p.wd=function(){for(var a=0,b=document.images.length;a<b;a++){var c=document.images[a],d=null;if(d=c.getAttribute("data-lateloadsrc"))L(c,Ta,function(){this.style.visibility=ab}),c.src=d}};
y("_BlogListView",Fl);function Gl(a){Q.call(this,"BlogSearch",a)}z(Gl,Q);y("_BlogSearchView",Gl);var Hl=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Il(a){Q.call(this,"ContactForm",a);this.C=a.V;this.F=this.C.data}z(Il,Q);y("_ContactFormView",Il);Il.prototype.ga=function(){var a=I(P(this.H,Ja));if(a){var b=this;a.onclick=function(){Jl(b)&&Kl(b)}}};
function Jl(a){I(P(a.H,Ga)).className=Ga;I(P(a.H,Ga)).innerHTML="";I(P(a.H,Ka)).className=Ka;I(P(a.H,Ka)).innerHTML="";var b=document.createElement("img");b.src="https://resources.blogblog.com/img/widgets/icon_contactform_cross.gif";b.className="contact-form-cross";b.onclick=function(){I(P(a.H,Ga)).className=Ga;I(P(a.H,Ga)).innerHTML=""};if(!Hl.test(D(I(P(a.H,Ea)).value)))return I(P(a.H,Ga)).className=Ha,I(P(a.H,Ga)).innerHTML=a.F.contactFormInvalidEmailMsg,I(P(a.H,Ga)).appendChild(b),!1;var c=I(P(a.H,
Fa)).value;return null==c||""==D(c)?(I(P(a.H,Ga)).className=Ha,I(P(a.H,Ga)).innerHTML=a.F.contactFormEmptyMessageMsg,I(P(a.H,Ga)).appendChild(b),!1):!0}
function Kl(a){I(P(a.H,Ja)).className="contact-form-button contact-form-button-submit disabled";I(P(a.H,Ja)).disabled=!0;I(P(a.H,Ka)).className=La;I(P(a.H,Ka)).innerHTML=a.F.contactFormMessageSendingMsg;var b=encodeURIComponent(D(I(P(a.H,Ia)).value)),c=encodeURIComponent(D(I(P(a.H,Ea)).value)),d=encodeURIComponent(D(I(P(a.H,Fa)).value)),e=encodeURIComponent(a.F.blogId);b=["name="+b,"email="+c,"message="+d,"blogID="+e];c=a.F.submitUrl;if(window.XDomainRequest&&H.R&&!H.oa("10")){var f=new XDomainRequest;
f.onload=function(){var b=eval("("+f.responseText+")");b=eval(b.details.emailSentStatus);Ll(a,b)};f.open("post",c,!0);f.send(b.join("&"))}else Eg(c,a.Za.bind(a),"POST",b.join("&"))}Il.prototype.Za=function(a){a=a.target;var b=eval("("+Og(a)+")");b=eval(b.details.emailSentStatus);Ll(this,Ng(a)&&b)};
function Ll(a,b){I(P(a.H,Ka)).className=La;b?(I(P(a.H,Ia)).value="",I(P(a.H,Ea)).value="",I(P(a.H,Fa)).value="",I(P(a.H,Ka)).innerHTML=a.F.contactFormMessageSentMsg):I(P(a.H,Ka)).innerHTML=a.F.contactFormMessageNotSentMsg;setTimeout(function(){I(P(a.H,Ka)).className=Ka;I(P(a.H,Ka)).innerHTML="";I(P(a.H,Ja)).className="contact-form-button contact-form-button-submit";I(P(a.H,Ja)).removeAttribute("disabled")},3E3)};function Ml(a){Q.call(this,"Example",a)}z(Ml,Q);y("_ExampleView",Ml);function Nl(a){Q.call(this,"FeaturedPost",a);this.C=a.V;this.C.data&&(this.D=(new ph).Z(va))}z(Nl,Q);Nl.prototype.ga=function(){var a=document.getElementById(this.C.D);a&&Cl(a,this.D)};y("_FeaturedPostView",Nl);/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function Ol(a){var b=Pl;this.J=[];this.$=b;this.Y=a||null;this.G=this.C=!1;this.F=void 0;this.N=this.W=this.L=!1;this.K=0;this.D=null;this.M=0}Ol.prototype.cancel=function(a){if(this.C)this.F instanceof Ol&&this.F.cancel();else{if(this.D){var b=this.D;delete this.D;a?b.cancel(a):(b.M--,0>=b.M&&b.cancel())}this.$?this.$.call(this.Y,this):this.N=!0;this.C||(a=new Ql(this),Rl(this),Sl(this,!1,a))}};Ol.prototype.T=function(a,b){this.L=!1;Sl(this,a,b)};function Sl(a,b,c){a.C=!0;a.F=c;a.G=!b;Tl(a)}
function Rl(a){if(a.C){if(!a.N)throw new Ul(a);a.N=!1}}function Vl(a,b,c,d){a.J.push([b,c,d]);a.C&&Tl(a)}Ol.prototype.then=function(a,b,c){var d,e,f=new Hf(function(a,b){d=a;e=b});Vl(this,d,function(a){a instanceof Ql?f.cancel():e(a)});return f.then(a,b,c)};Ol.prototype.$goog_Thenable=!0;function Wl(a){return gc(a.J,function(a){return Ub(a[1])})}
function Tl(a){if(a.K&&a.C&&Wl(a)){var b=a.K,c=Xl[b];c&&(r.clearTimeout(c.ea),delete Xl[b]);a.K=0}a.D&&(a.D.M--,delete a.D);b=a.F;for(var d=c=!1;a.J.length&&!a.L;){var e=a.J.shift(),f=e[0],h=e[1];e=e[2];if(f=a.G?h:f)try{var n=f.call(e||a.Y,b);t(n)&&(a.G=a.G&&(n==b||n instanceof Error),a.F=b=n);if(Gf(b)||typeof r.Promise===k&&b instanceof r.Promise)d=!0,a.L=!0}catch(q){b=q,a.G=!0,Wl(a)||(c=!0)}}a.F=b;d&&(n=x(a.T,a,!0),d=x(a.T,a,!1),b instanceof Ol?(Vl(b,n,d),b.W=!0):b.then(n,d));c&&(b=new Yl(b),Xl[b.ea]=
b,a.K=b.ea)}function Ul(){bc.call(this)}z(Ul,bc);Ul.prototype.message="Deferred has already fired";Ul.prototype.name="AlreadyCalledError";function Ql(){bc.call(this)}z(Ql,bc);Ql.prototype.message="Deferred was canceled";Ql.prototype.name="CanceledError";function Yl(a){this.ea=r.setTimeout(x(this.D,this),0);this.C=a}Yl.prototype.D=function(){delete Xl[this.ea];throw this.C;};var Xl={};function Zl(a,b){var c=b||{};b=c.document||document;var d=xd(a),e=document.createElement(ia),f={Wc:e,ua:void 0},h=new Ol(f),n=null,q=null!=c.timeout?c.timeout:5E3;0<q&&(n=window.setTimeout(function(){$l(e,!0);var a=new am(1,"Timeout reached for loading script "+d);Rl(h);Sl(h,!1,a)},q),f.ua=n);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&e.readyState!=Ca||($l(e,c.Nd||!1,n),Rl(h),Sl(h,!0,null))};e.onerror=function(){$l(e,!0,n);var a=new am(0,"Error while loading script "+
d);Rl(h);Sl(h,!1,a)};f=c.attributes||{};$c(f,{type:tb,charset:"UTF-8"});oe(e,f);ie(e,a);bm(b).appendChild(e);return h}function bm(a){var b=(a||document).getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement}function Pl(){if(this&&this.Wc){var a=this.Wc;a&&a.tagName==ia&&$l(a,!0,this.ua)}}function $l(a,b,c){null!=c&&r.clearTimeout(c);a.onload=Qb;a.onerror=Qb;a.onreadystatechange=Qb;b&&window.setTimeout(function(){ve(a)},0)}
function am(a,b){a="Jsloader error (code #"+a+")";b&&(a+=": "+b);bc.call(this,a)}z(am,bc);function cm(a){this.C=a;this.ua=5E3}var dm=0;function em(a,b,c,d){b=b?Yc(b):{};var e="_"+(dm++).toString(36)+ac().toString(36),f="_callbacks___"+e;c&&(r[f]=fm(e,c),b.callback=f);c={timeout:a.ua,Nd:!0};a=xd(a.C);a=yd.exec(a);f=a[3]||"";a=zd(a[1]+Ad("?",a[2]||"",b)+Ad("#",f,void 0));c=Zl(a,c);Vl(c,null,gm(e,b,d),void 0)}cm.prototype.cancel=function(a){a&&(a.Pd&&a.Pd.cancel(),a.ea&&hm(a.ea,!1))};function gm(a,b,c){return function(){hm(a,!1);c&&c(b)}}
function fm(a,b){return function(c){hm(a,!0);b.apply(void 0,arguments)}}function hm(a,b){a="_callbacks___"+a;if(r[a])if(b)try{delete r[a]}catch(c){r[a]=void 0}else r[a]=Qb};function im(a){Q.call(this,"Feed",a)}z(im,Q);im.prototype.ka=function(a,b){"getFeed"==a?(this.C.F=b,jm(this.C)):im.O.ka.call(this,a,b)};im.prototype.ga=function(){if(this.D=P(this.H,"feedItemListDisplay")){var a=this.H.Z();this.C=new km(a.feedUrl,this.D,{numItemsShow:a.numItemsShow,showItemAuthor:a.showItemAuthor,showItemDate:a.showItemDate,linkTarget:a.openLinksInNewWindow?oa:"_self",useFeedWidgetServ:"true"===a.useFeedWidgetServ});"true"===a.useFeedWidgetServ?kh(this.H,"getFeed",null,null,ha):jm(this.C)}};
var lm={moduleTitle:null,feedUrl:function(a){a=a.replace(/^\s+/,"").replace(/\s+$/,"");if(0==a.length)return LayoutsMessages.FIELD_CANNOT_BE_BLANK},numItemsShow:function(a,b){return function(c){c=parseInt(c,10);if(isNaN(c))return LayoutsMessages.MUST_SPECIFY_A_NUMBER;if(c<a)return LayoutsMessages.NUMBER_TOO_SMALL+" "+a;if(c>b)return LayoutsMessages.NUMBER_TOO_LARGE+" "+b}}(1,5),showItemDate:null,showItemAuthor:null,securityToken:null,openLinksInNewWindow:null};
function km(a,b,c){this.L=a;this.D=b;this.C=c}var mm=zd(ud(new rd(sd,"//ajax.googleapis.com/ajax/services/feed/load")));function jm(a){if(a.C.useFeedWidgetServ)"ok"==a.F.status?nm(a,a.F.feed):om(a);else{var b=new cm(mm);b.ua=-1;em(b,{q:a.L,num:a.C.numItemsShow,output:"json",v:"1.0"},x(a.G,a))}}km.prototype.G=function(a){200==a.responseStatus?nm(this,a.responseData.feed):om(this)};
function nm(a,b){ue(a.D);var c=document.createElement("ul");a.D.appendChild(c);for(var d=Math.min(b.entries.length,a.C.numItemsShow),e=0;e<d;e++){var f=b.entries[e],h=document.createElement("li");c.appendChild(h);var n;(n=a.C.previewMode)||(n=(new ij(f.link)).G,n=!(""==n||"http"==n||"https"==n));n=n?qe("A",{href:"javascript:void(0);"},f.title):qe("A",{href:f.link},f.title);n.target=a.C.linkTarget;h.appendChild(qe(ja,{"class":"item-title"},n));a.C.showItemDate&&(n=qe(ja,{"class":"item-date"},"\u00a0-\u00a0"+
(new Date(f.publishedDate)).toLocaleDateString()),h.appendChild(n));a.C.showItemAuthor&&(f=qe(ja,{"class":"item-author"},"\u00a0-\u00a0"+f.author),h.appendChild(f))}a.J&&a.J(b)}function om(a){ue(a.D);a.D.appendChild(qe(ja,null,"Error loading feed."));a.K&&a.K()}y("_FeedView",im);
im._setConfigurationOptions=function(){var a;lm.security_token=null;lm.visible=null;a||(a="config");var b=document.forms[a].widgetId.value,c=document.forms[a].widgetType.value;a=document.forms[a];var d=!0,e={},f;for(f in lm){var h=nh(a[f]);if(t(h)){var n=lm[f],q=oh(f);q&&(ue(q),q.className="errorbox-good");n&&(n=n(h))&&(lh(f,n),d=!1);e[f]=h}}d&&C.ad(e,b,c)};function pm(a){Q.call(this,pm.C,a)}z(pm,Q);pm.C="FollowByEmail";y("_FollowByEmailView",pm);function qm(a){Q.call(this,"Followers",a);this.C=a.V}z(qm,Q);function rm(a){window.open(a,oa,"height=600, width=640, toolbar=no, menubar=no, scrollbars=yes, resizable=yes, location=no, directories=no, status=no")}qm.prototype.ka=function(a,b){"getFacepile"==a?(sm(this,b),tm(this),um(this,b)):qm.O.ka.call(this,a,b)};qm.prototype.ga=function(){Xc(this.C.data)||(tm(this),um(this,this.C.data))};
function sm(a,b){a=qc(b.followers,ne(document,"a","follower-link",K(Wa,a.C.C)));for(b=0;b<a.length;b++){var c=a[b][0],d=a[b][1];d.setAttribute(Oa,c.viewUrl);d.onclick=Db(!1);d=K("follower-thumbnail",d);d.setAttribute("src",c.thumbnailUrl);d.setAttribute("title",c.displayName)}}function tm(a){var b=K(Wa,a.C.C);if(b){b=ne(document,"a","follower-link",b);for(var c=0;c<b.length;c++){var d=b[c];d.getAttribute(Oa)&&(d.onclick=x(rm,a,d.getAttribute(Oa)))}}}
function um(a,b){var c=K("followers-next-link",a.C.C);c&&(b.nextTimestamp?(c.style.display=cb,c=K("next-page-link",c),c.href="#",c.onclick=Db(!1),kf(c),L(c,xa,x(qm.prototype.D,a,b.nextTimestamp))):c.style.display=l)}qm.prototype.D=function(a){kh(this.H,"getFacepile",{fcMT:a},null,ha)};y("_FollowersView",qm);function vm(a){Q.call(this,vm.C,a)}z(vm,Q);vm.C="Header";y("_HeaderView",vm);function wm(a,b){Q.call(this,b,a)}z(wm,Q);function xm(a){Q.call(this,"Text",a)}z(xm,wm);function ym(a){Q.call(this,"HTML",a)}z(ym,wm);y("_TextView",xm);y("_HTMLView",ym);function zm(a){Q.call(this,"Image",a);this.C=a.V}z(zm,Q);zm.prototype.ga=function(){if(1==this.C.data.resize){var a=P(this.H,"img"),b=this.C.C;if(a&&b){if(document.defaultView)b=parseInt(document.defaultView.getComputedStyle(b,null).width,10);else if(b.currentStyle)a.style.display=l,b=b.offsetWidth,a.style.display="";else return;a.width>b&&(a.height=Math.round(b/a.width*a.height),a.width=b);a.style.visibility=xb}}};y("_ImageView",zm);function Am(a){Q.call(this,"Label",a)}z(Am,Q);y("_LabelView",Am);function Bm(a){Q.call(this,"TextList",a)}z(Bm,Q);y("_TextListView",Bm);function Cm(a){Q.call(this,"LinkList",a)}z(Cm,Q);y("_LinkListView",Cm);function Dm(a){Q.call(this,"BloggerButton",a)}z(Dm,Q);y("_BloggerButtonView",Dm);function Em(a){Q.call(this,"Navbar",a)}z(Em,Q);y("_NavbarView",Em);function Fm(a){Q.call(this,"PageList",a)}z(Fm,Q);Fm.prototype.Sa=Db("PageList");Fm.prototype.ga=function(){if(0!=this.H.Z().mobile){var a=P(this.H,"select");a&&(a.onchange=function(a){a=a||window.event;a=a.target||a.srcElement;if(a=a.options[a.selectedIndex].value)window.location=a})}};var _PageListView=Fm;y("_PageListView",Fm);function Gm(a){Q.call(this,Gm.C,a)}z(Gm,Q);Gm.C="PlusBadge";y("_PlusBadgeView",Gm);function Hm(a){Q.call(this,Hm.C,a)}z(Hm,Q);Hm.C="PlusFollowers";y("_PlusFollowersView",Hm);function Im(a){Q.call(this,Im.C,a)}z(Im,Q);Im.C="PlusOne";y("_PlusOneView",Im);function Jm(a){Q.call(this,"Poll",a);this.F=this.D=this.C=null;if(a=this.H.Z())this.C="poll-widget"+a.pollid,this.D=a.iframeurl,this.F=L(window,"message",this.G,!1,this),a=document.getElementsByName(this.C)[0],void 0!=a&&(a.src.src=xd(this.D))}z(Jm,Q);Jm.prototype.G=function(a){var b=document.getElementsByName(this.C)[0];void 0!=b&&(a=a.C,a.source===b.contentWindow&&0==this.D.lastIndexOf(a.origin,0)&&(a=a.data,typeof a!=hb||0>a||(b.height=a+"px",jf(this.F))))};y("_PollView",Jm);function Km(a){Q.call(this,"PopularPosts",a)}z(Km,Q);y("_PopularPostsView",Km);function Lm(a){Q.call(this,"Profile",a);this.C=a.V}z(Lm,Q);Lm.prototype.ga=function(){this.C&&this.C.C&&0==this.H.Z().isDisplayable&&(this.C.C.style.display=l)};y("_ProfileView",Lm);function Mm(a){Q.call(this,"RecentPosts",a)}z(Mm,Q);y("_RecentPostsView",Mm);function Nm(a){Q.call(this,"ReportAbuse",a)}z(Nm,Q);y("_ReportAbuseView",Nm);function Om(a){Q.call(this,Om.C,a)}z(Om,Q);Om.C="Sharing";y("_SharingView",Om);function Pm(a){Q.call(this,"Stats",a)}z(Pm,Q);Pm.prototype.ga=function(){null!=P(this.H,"totalCount")&&Eg(this.H.Z().statsUrl,x(this.G,this))};
Pm.prototype.G=function(a){a=a.target;if(Ng(a)){if(a.C)b:{a=a.C.responseText;if(r.JSON)try{var b=r.JSON.parse(a);break b}catch(n){}b=lg(a)}else b=void 0;a=this.H.Z();var c=P(this.H,"totalCount");if(null!=c){if(a.showGraphicalCounter){this.F=b.total;for(var d=""+b.total,e=0;e<d.length;e++)c.appendChild(qe(ja,{"class":"digit stage-0"},qe("STRONG",null,document.createTextNode(String(d.charAt(e)))),qe(ja,{"class":"blind-plate"})));a.showAnimatedCounter&&(this.D=new Xf(b.nextTickMs),L(this.D,"tick",x(this.J,
this,c)),this.D.start())}else{d=b.total;if(isNaN(d)||0>d)d="NaN";else{d=d.toString();e=[];for(var f=0,h=d.length;f<h;f++)0<f&&0==f%3&&e.push(","),e.push(d.charAt(h-1-f));d=e.reverse().join("")}ze(c,d)}a.showSparkline&&(jh(this.H,"sparkline").src=b.sparklineUrl);jh(this.H,Ma).style.display=""}}};
Pm.prototype.J=function(a){if(Qm(this.F+1)>Qm(this.F))kf(this.D),Yf(this.D);else{this.F++;for(var b=""+this.F,c=0;c<b.length;c++){var d=a.childNodes[c],e=b.charAt(c);var f=d.firstChild;if(ld&&null!==f&&"innerText"in f)f=f.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var h=[];Ce(f,h,!0);f=h.join("")}f=f.replace(/ \xAD /g," ").replace(/\xAD/g,"");f=f.replace(/\u200B/g,"");ld||(f=f.replace(/ +/g," "));" "!=f&&(f=f.replace(/^\s*/,""));f!=e&&(ze(d.firstChild,e),Zf(x(this.C,this,d,1),50),Zf(x(this.C,this,
d,2),100),Zf(x(this.C,this,d,3),150),Zf(x(this.C,this,d,0),200))}}};function Qm(a){return 0==a?1:Math.floor(Math.log(a)/Math.LN10)+1}Pm.prototype.C=function(a,b){var c="stage-"+(0!=b?b-1:3);b="stage-"+b;var d=sc(a);u(c)?lc(d,c):v(c)&&(d=wc(d,c));u(b)&&!jc(d,b)?d.push(b):v(b)&&uc(d,b);a.className=d.join(" ")};y("_StatsView",Pm);function Rm(a){Q.call(this,"Subscribe",a)}z(Rm,Q);var Sm=null,Tm=null;function Um(a,b){a.style.zIndex=1==b?"20":""}function Vm(a,b){return a?a.className&&-1!=a.className.search(b)?a:Vm(a.parentNode,b):null}function Wm(a,b){Um(a.parentNode,b);if(H.R){var c=Vm(a,"section");c&&(c.parentNode.className&&-1!=c.parentNode.className.search("columns-cell")&&Um(c.parentNode.parentNode.parentNode.parentNode,b),Um(c,b));(a=Vm(a,"widget Subscribe"))&&Um(a.parentNode.parentNode,b)}}y("_SubscribeView",Rm);
y("_SW_toggleReaderList",function(a,b){var c=document.getElementById(la+b),d=document.getElementById(ma+b);a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation();var e=document.onclick;null!=Sm&&Sm!=c&&(Wm(Sm,!1),Sm.style.display=l,Tm.style.visibility=xb);c.style.display==l?(Wm(c,!0),c.style.display="",Sm=c,Tm=d,d.style.visibility=ab,document.onclick=function(){c.style.display=l;Wm(c,!1);d.style.visibility=xb;e&&(document.onclick=e)}):(c.style.display=l,Wm(c,!1),d.style.visibility=
xb,e&&(document.onclick=e));return!1});y("_SW_hideReaderList",function(a){var b=document.getElementById(la+a);a=document.getElementById(ma+a);b.style.display=l;Wm(b,!1);a.style.visibility=xb});function Xm(a){Q.call(this,Xm.C,a)}z(Xm,Q);Xm.C="Translate";y("_TranslateView",Xm);function Z(a){Q.call(this,Z.C,a)}z(Z,Q);Z.C="Wikipedia";y("_WikipediaView",Z);Z.G=5;Z.D="";Z.F="en";p=Z.prototype;p.Qa=!1;p.Ja=!1;p.ga=function(){var a=P(this.H,"wikipedia-search-form");if(a){Z.D=this.H.V.data.language||"en";var b=this;L(a,"submit",function(a){Z.prototype.Ja||(Z.prototype.Ja=!0,Ym(b));a.preventDefault()})}};
function Ym(a){ue(I(P(a.H,Ab)));ue(I(P(a.H,zb)));var b=D(I(P(a.H,yb)).value);b?(b=wj(wj(wj(lj(new ij(bb+(a.Qa&&Z.F||Z.D)+ba),"/w/api.php"),"action","opensearch"),"search",b),"format","json"),em(new cm(Ef(b.toString())),{callback:"?"},x(a.Zf,a),x(a.Yf,a))):(I(P(a.H,Bb)).style.display=l,I(P(a.H,Ab)).innerHTML=a.H.V.data.enterTextMsg,Z.prototype.Ja=!1)}
p.Zf=function(a){var b=P(this.H,Bb),c=P(this.H,Ab),d=D(I(P(this.H,yb)).value),e=[];a=a[1];var f=a.length;if(0==f)b=I(b),b.style.display=ua,I(c).innerHTML=this.H.V.data.noResultsFoundMsg,Z.prototype.Ja=!1;else{for(var h=0;h<f;h++)e.push('<div id="wikipedia-search-result-link"><a target="_blank" href='+(bb+(this.Qa&&Z.F||Z.D)+".wikipedia.org/wiki/"+a[h].replace(/ /g,"_"))+">"+a[h]+"</a></div>");if(f>Z.G){for(h=0;h<Z.G;h++)I(c).innerHTML+=e[h];I(P(this.H,zb)).style.display=ua;d='<a target="_blank" href='+
wj(wj(wj(wj(lj(new ij(bb+(this.Qa&&Z.F||Z.D)+ba),"/w/index.php"),"title","Special:Search"),"profile","default"),"search",d),"fulltext","Search")+">"+this.H.V.data.moreMsg+"</a>";c=I(P(this.H,zb));e=new wi;e.M=Ji;e.K=qd;e.J=qd;e.F=Fd;e.N=Fd;e=new vi(e);d=Ki(e,d);he(c,be(d))}else for(h=0;h<f;h++)I(c).innerHTML+=e[h];b=I(b);b.style.display=ua;this.Qa=Z.prototype.Ja=!1}};
p.Yf=function(){"en"!=Z.D?(this.Qa=!0,Ym(this)):(I(P(this.H,Bb)).style.display=l,I(P(this.H,Ab)).innerHTML=this.H.V.data.fetchingErrorMsg,Z.prototype.Ja=!1)};if(window.jstiming){window.jstiming.ac={};window.jstiming.Jh=1;var Zm=function(a,b,c){var d=a.t[b],e=a.t.start;if(d&&(e||c))return d=a.t[b][0],void 0!=c?e=c:e=e[0],Math.round(d-e)},$m=function(a,b,c){var d="";window.jstiming.srt&&(d+="&srt="+window.jstiming.srt,delete window.jstiming.srt);window.jstiming.pt&&(d+="&tbsrt="+window.jstiming.pt,delete window.jstiming.pt);try{window.external&&window.external.tran?d+="&tran="+window.external.tran:window.gtbExternal&&window.gtbExternal.tran?d+="&tran="+
window.gtbExternal.tran():window.chrome&&window.chrome.csi&&(d+="&tran="+window.chrome.csi().tran)}catch(F){}var e=window.chrome;if(e&&(e=e.loadTimes)){e().wasFetchedViaSpdy&&(d+="&p=s");if(e().wasNpnNegotiated){d+="&npn=1";var f=e().npnNegotiatedProtocol;f&&(d+="&npnv="+(encodeURIComponent||escape)(f))}e().wasAlternateProtocolAvailable&&(d+="&apa=1")}var h=a.t,n=h.start;e=[];f=[];for(var q in h)if("start"!=q&&0!=q.indexOf("_")){var w=h[q][1];w?h[w]&&f.push(q+"."+Zm(a,q,h[w][0])):n&&e.push(q+"."+
Zm(a,q))}delete h.start;if(b)for(var O in b)d+="&"+O+"="+b[O];(b=c)||(b="https:"==document.location.protocol?"https://csi.gstatic.com/csi":"http://csi.gstatic.com/csi");return[b,"?v=3","&s="+(window.jstiming.sn||"blogger")+aa,a.name,f.length?"&it="+f.join(","):"",d,"&rt=",e.join(",")].join("")},an=function(a,b,c){a=$m(a,b,c);if(!a)return"";b=new Image;var d=window.jstiming.Jh++;window.jstiming.ac[d]=b;b.onload=b.onerror=function(){window.jstiming&&delete window.jstiming.ac[d]};b.src=a;b=null;return a};
window.jstiming.report=function(a,b,c){var d=document.visibilityState,e="visibilitychange";d||(d=document.webkitVisibilityState,e="webkitvisibilitychange");if("prerender"==d){var f=!1,h=function(){if(!f){b?b.prerender="1":b={prerender:"1"};if("prerender"==(document.visibilityState||document.webkitVisibilityState))var d=!1;else an(a,b,c),d=!0;d&&(f=!0,document.removeEventListener(e,h,!1))}};document.addEventListener(e,h,!1);return""}return an(a,b,c)}};}).call(this);

(function(){var l,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={ua:!0},ea={};try{ea.__proto__=da;ca=ea.ua;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=ba;function ha(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Ka=b.prototype}var ja="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ka="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function la(a,b){if(b){var c=ka;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ja(c,a,{configurable:!0,writable:!0,value:b})}}la("String.prototype.endsWith",function(a){return a?a:function(a,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.endsWith must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.endsWith must not be a regular expression");void 0===c&&(c=this.length);c=Math.max(0,Math.min(c|0,this.length));for(var b=a.length;0<b&&0<c;)if(this[--c]!=a[--b])return!1;return 0>=b}});var na="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=d[e])}return a};la("Object.assign",function(a){return a||na});la("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});la("Number.isNaN",function(a){return a?a:function(a){return"number"===typeof a&&isNaN(a)}});var r=this;function t(a){return"string"==typeof a}function oa(a){return"number"==typeof a}function pa(){if(null===qa)a:{var a=r.document;if((a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&ra.test(a)){qa=a;break a}qa=""}return qa}var ra=/^[\w+/_-]+[=]{0,2}$/,qa=null;function sa(){}function ta(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ua(a){return null===a}function va(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function wa(a,b,c){return a.call.apply(a.bind,arguments)}function xa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ya(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ya=wa:ya=xa;return ya.apply(null,arguments)}function Aa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function u(a,b){function c(){}c.prototype=b.prototype;a.Ka=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ma=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var Ba=(new Date).getTime();function Ca(a,b){if(t(a))return t(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1}function Da(a,b){for(var c=a.length,d=t(a)?a.split(""):a,e=0;e<c;e++)e in d&&b.call(void 0,d[e],e,a)}function Ea(a,b){for(var c=a.length,d=Array(c),e=t(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d}function Fa(a,b){a:{for(var c=a.length,d=t(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:t(a)?a.charAt(b):a[b]}function Ga(a){return Array.prototype.concat.apply([],arguments)};function Ha(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]}var Ia=/&/g,Ja=/</g,Ka=/>/g,La=/"/g,Ma=/'/g,Na=/\x00/g,Oa={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},Pa={"'":"\\'"};function v(a,b){return-1!=a.indexOf(b)}function Qa(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var x;a:{var Ra=r.navigator;if(Ra){var Sa=Ra.userAgent;if(Sa){x=Sa;break a}}x=""};function Ta(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function Ua(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};function Va(a){Va[" "](a);return a}Va[" "]=sa;function y(){}var Wa="function"==typeof Uint8Array;function z(a,b,c){a.a=null;b||(b=[]);a.H=void 0;a.h=-1;a.b=b;a:{if(b=a.b.length){--b;var d=a.b[b];if(null!==d&&"object"==typeof d&&"array"!=ta(d)&&!(Wa&&d instanceof Uint8Array)){a.i=b-a.h;a.g=d;break a}}a.i=Number.MAX_VALUE}a.G={};if(c)for(b=0;b<c.length;b++)d=c[b],d<a.i?(d+=a.h,a.b[d]=a.b[d]||Xa):(Ya(a),a.g[d]=a.g[d]||Xa)}var Xa=[];function Ya(a){var b=a.i+a.h;a.b[b]||(a.g=a.b[b]={})}function A(a,b){if(b<a.i){b+=a.h;var c=a.b[b];return c===Xa?a.b[b]=[]:c}if(a.g)return c=a.g[b],c===Xa?a.g[b]=[]:c}function Za(a,b){if(b<a.i){b+=a.h;var c=a.b[b];return c===Xa?a.b[b]=[]:c}c=a.g[b];return c===Xa?a.g[b]=[]:c}function $a(a,b,c){a.a||(a.a={});if(!a.a[c]){var d=A(a,c);d&&(a.a[c]=new b(d))}return a.a[c]}function ab(a,b,c){a.a||(a.a={});if(!a.a[c]){for(var d=Za(a,c),e=[],f=0;f<d.length;f++)e[f]=new b(d[f]);a.a[c]=e}b=a.a[c];b==Xa&&(b=a.a[c]=[]);return b}function bb(a){if(a.a)for(var b in a.a){var c=a.a[b];if("array"==ta(c))for(var d=0;d<c.length;d++)c[d]&&bb(c[d]);else c&&bb(c)}return a.b};function cb(a){z(this,a,db)}u(cb,y);function eb(a){z(this,a,null)}u(eb,y);var db=[2,3];var fb=document,B=window;var gb={"120x90":!0,"160x90":!0,"180x90":!0,"200x90":!0,"468x15":!0,"728x15":!0};function hb(a,b){if(15==b){if(728<=a)return 728;if(468<=a)return 468}else if(90==b){if(200<=a)return 200;if(180<=a)return 180;if(160<=a)return 160;if(120<=a)return 120}return null};function ib(){return function(){return!ua.apply(this,arguments)}}function jb(a){var b=!1,c;return function(){b||(c=a(),b=!0);return c}}function kb(){var a=sa;return function(){if(a){var b=a;a=null;b()}}};function lb(){this.b="";this.h=mb}lb.prototype.g=!0;lb.prototype.a=function(){return this.b};function nb(a){if(a instanceof lb&&a.constructor===lb&&a.h===mb)return a.b;ta(a);return"type_error:TrustedResourceUrl"}var mb={};function ob(){this.O="";this.ta=pb}ob.prototype.g=!0;ob.prototype.a=function(){return this.O};var qb=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,pb={};function rb(a){var b=new ob;b.O=a;return b}rb("about:blank");function sb(a,b){a.src=nb(b);(b=pa())&&a.setAttribute("nonce",b)};function tb(a){this.a=a||r.document||document}function ub(a,b){return a.a.createElement(String(b))}tb.prototype.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function vb(a){wb();var b=new lb;b.b=a;return b}var wb=sa;function xb(){return!(v(x,"iPad")||v(x,"Android")&&!v(x,"Mobile")||v(x,"Silk"))&&(v(x,"iPod")||v(x,"iPhone")||v(x,"Android")||v(x,"IEMobile"))};function C(a){try{var b;if(b=!!a&&null!=a.location.href)a:{try{Va(a.foo);b=!0;break a}catch(c){}b=!1}return b}catch(c){return!1}}function yb(a){for(var b=r,c=0;b&&40>c++&&(!C(b)||!a(b));)b=zb(b)}function Ab(){var a=r;yb(function(b){a=b;return!1});return a}function zb(a){try{var b=a.parent;if(b&&b!=a)return b}catch(c){}return null}function Bb(a,b){var c=[r.top],d=[],e=0;b=b||1024;for(var f;f=c[e++];){a&&!C(f)||d.push(f);try{if(f.frames)for(var g=f.frames.length,h=0;h<g&&c.length<b;++h)c.push(f.frames[h])}catch(k){}}return d}function Cb(a,b){var c=a.createElement("script");sb(c,vb(b));return(a=a.getElementsByTagName("script")[0])&&a.parentNode?(a.parentNode.insertBefore(c,a),c):null}function D(a,b){return b.getComputedStyle?b.getComputedStyle(a,null):a.currentStyle}function Db(a){if(!a.crypto)return Math.random();try{var b=new Uint32Array(1);a.crypto.getRandomValues(b);return b[0]/65536/65536}catch(c){return Math.random()}}function Eb(a,b){if(a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.call(void 0,a[c],c,a)}function Fb(a){var b=a.length;if(0==b)return 0;for(var c=305419896,d=0;d<b;d++)c^=(c<<5)+(c>>2)+a.charCodeAt(d)&4294967295;return 0<c?c:4294967296+c}var Gb=jb(function(){return v(x,"Google Web Preview")||1E-4>Math.random()}),Hb=/^([0-9.]+)px$/,Ib=/^(-?[0-9.]{1,30})$/;function Jb(a){return Ib.test(a)&&(a=Number(a),!isNaN(a))?a:null}function Kb(a,b){return b?!/^false$/.test(a):/^true$/.test(a)}function E(a){return(a=Hb.exec(a))?+a[1]:null}function Lb(a,b){try{return!(!a.frames||!a.frames[b])}catch(c){return!1}}function Mb(a){var b={display:"none"};a.style.setProperty?Eb(b,function(b,d){a.style.setProperty(d,b,"important")}):a.style.cssText=Nb(Ob(Pb(a.style.cssText),Qb(b,function(a){return a+" !important"})))}var Ob=Object.assign||function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=d[e])}return a};function Qb(a,b){var c={},d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=b.call(void 0,a[d],d,a));return c}function Nb(a){var b=[];Eb(a,function(a,d){null!=a&&""!==a&&b.push(d+":"+a)});return b.length?b.join(";")+";":""}function Pb(a){var b={};if(a){var c=/\s*:\s*/;a=(a||"").split(/\s*;\s*/);Da(a,function(a){if(a){var d=a.split(c);a=d[0];d=d[1];a&&d&&(b[a.toLowerCase()]=d)}})}return b};function Rb(a,b,c){a.addEventListener&&a.addEventListener(b,c,!1)};function Sb(a,b){var c=!1,d=!1;d=void 0===d?!1:d;c=void 0===c?!1:c;r.google_image_requests||(r.google_image_requests=[]);var e=r.document.createElement("img");if(b||c){var f=function(a){b&&b(a);if(c){a=r.google_image_requests;var d=Ca(a,e);0<=d&&Array.prototype.splice.call(a,d,1)}e.removeEventListener&&e.removeEventListener("load",f,!1);e.removeEventListener&&e.removeEventListener("error",f,!1)};Rb(e,"load",f);Rb(e,"error",f)}d&&(e.referrerPolicy="no-referrer");e.src=a;r.google_image_requests.push(e)};function Tb(a,b){a=parseInt(a,10);return isNaN(a)?b:a}var Ub=/^([\w-]+\.)*([\w-]{2,})(:[0-9]+)?$/;function Vb(a,b){return a?(a=a.match(Ub))?a[0]:b:b};function Wb(){return"r20181205"}var Xb=Kb("false",!1),Yb=Kb("false",!1),Zb=Kb("false",!1),$b=Zb||!Yb;function ac(){return Vb("","googleads.g.doubleclick.net")}function bc(a){return a?"pagead2.googlesyndication.com":Vb("","pagead2.googlesyndication.com")};function cc(a){a=void 0===a?r:a;var b=a.context||a.AMP_CONTEXT_DATA;if(!b)try{b=a.parent.context||a.parent.AMP_CONTEXT_DATA}catch(c){}try{if(b&&b.pageViewId&&b.canonicalUrl)return b}catch(c){}return null}function dc(a){return(a=a||cc())?C(a.master)?a.master:null:null};function ec(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.call(void 0,a[c],c,a)}function fc(a){return!(!a||!a.call)&&"function"===typeof a}function gc(a,b){if(a.indexOf)return a=a.indexOf(b),0<a||0===a;for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}function hc(a){a=dc(cc(a))||a;a.google_unique_id?++a.google_unique_id:a.google_unique_id=1}function ic(a){a=dc(cc(a))||a;a=a.google_unique_id;return"number"===typeof a?a:0}var jc=!!window.google_async_iframe_id,kc=jc&&window.parent||window;function lc(){if(jc&&!C(kc)){var a="."+fb.domain;try{for(;2<a.split(".").length&&!C(kc);)fb.domain=a=a.substr(a.indexOf(".")+1),kc=window.parent}catch(b){}C(kc)||(kc=window)}return kc}var mc=/(^| )adsbygoogle($| )/;function nc(a){return Xb&&a.google_top_window||a.top}function F(a){a=nc(a);return C(a)?a:null};function oc(a){a.google_ad_modifications||(a.google_ad_modifications={});return a.google_ad_modifications}function G(a,b){return gc(oc(a).eids||[],b)}function H(a,b){return gc(oc(a).loeids||[],b)}function pc(a,b){a=oc(a);a.tag_partners=a.tag_partners||[];a.tag_partners.push(b)}function qc(a,b,c){for(var d=0;d<a.length;++d)if((a[d].ad_slot||b)==b&&(a[d].ad_tag_origin||c)==c)return a[d];return null};var rc={overlays:1,interstitials:2,vignettes:2,inserts:3,immersives:4,list_view:5,full_page:6};function tc(a){z(this,a,uc)}u(tc,y);function vc(a){z(this,a,null)}u(vc,y);function wc(a){z(this,a,null)}u(wc,y);function xc(a){z(this,a,yc)}u(xc,y);var uc=[4],yc=[6,7,9,10,11];function zc(a){z(this,a,Ac)}u(zc,y);function Bc(a){z(this,a,null)}u(Bc,y);function Cc(a){z(this,a,Dc)}u(Cc,y);function Ec(a){z(this,a,null)}u(Ec,y);var Ac=[1,2,5,7],Dc=[2];function Fc(a,b,c){c=void 0===c?{}:c;this.error=a;this.context=b.context;this.line=b.line||-1;this.msg=b.message||"";this.file=b.file||"";this.id=b.id||"jserror";this.meta=c};var Gc=/^https?:\/\/(\w|-)+\.cdn\.ampproject\.(net|org)(\?|\/|$)/;function Hc(a,b){this.a=a;this.b=b}function Ic(a,b,c){this.url=a;this.a=b;this.ba=!!c;this.depth=oa(void 0)?void 0:null};function Jc(){this.g="&";this.h=!1;this.b={};this.i=0;this.a=[]}function Kc(a,b){var c={};c[a]=b;return[c]}function Lc(a,b,c,d,e){var f=[];Eb(a,function(a,h){(a=Mc(a,b,c,d,e))&&f.push(h+"="+a)});return f.join(b)}function Mc(a,b,c,d,e){if(null==a)return"";b=b||"&";c=c||",$";"string"==typeof c&&(c=c.split(""));if(a instanceof Array){if(d=d||0,d<c.length){for(var f=[],g=0;g<a.length;g++)f.push(Mc(a[g],b,c,d+1,e));return f.join(c[d])}}else if("object"==typeof a)return e=e||0,2>e?encodeURIComponent(Lc(a,b,c,d,e+1)):"...";return encodeURIComponent(String(a))}function Nc(a,b,c,d){a.a.push(b);a.b[b]=Kc(c,d)}function Oc(a,b,c,d){b=b+"//"+c+d;var e=Pc(a)-d.length;if(0>e)return"";a.a.sort(function(a,b){return a-b});d=null;c="";for(var f=0;f<a.a.length;f++)for(var g=a.a[f],h=a.b[g],k=0;k<h.length;k++){if(!e){d=null==d?g:d;break}var m=Lc(h[k],a.g,",$");if(m){m=c+m;if(e>=m.length){e-=m.length;b+=m;c=a.g;break}else a.h&&(c=e,m[c-1]==a.g&&--c,b+=m.substr(0,c),c=a.g,e=0);d=null==d?g:d}}a="";null!=d&&(a=c+"trn="+d);return b+a}function Pc(a){var b=1,c;for(c in a.b)b=c.length>b?c.length:b;return 3997-b-a.g.length-1};function Qc(a,b,c,d,e,f){if((d?a.i:Math.random())<(e||a.a))try{if(c instanceof Jc)var g=c;else g=new Jc,Eb(c,function(a,b){var c=g,d=c.i++;a=Kc(b,a);c.a.push(d);c.b[d]=a});var h=Oc(g,a.h,a.b,a.g+b+"&");h&&("undefined"===typeof f?Sb(h,void 0):Sb(h,f))}catch(k){}};function Rc(a,b){this.start=a<b?a:b;this.a=a<b?b:a};function Sc(a,b){this.a=b>=a?new Rc(a,b):null}function Tc(a){var b=-1;try{a.localStorage&&(b=parseInt(a.localStorage.getItem("google_experiment_mod"),10))}catch(c){return null}if(0<=b&&1E3>b)return b;if(Gb())return null;b=Math.floor(1E3*Db(a));try{if(a.localStorage)return a.localStorage.setItem("google_experiment_mod",""+b),b}catch(c){}return null};var Uc=null;function Vc(){var a=r.performance;return a&&a.now&&a.timing?Math.floor(a.now()+a.timing.navigationStart):+new Date}function Wc(){var a=void 0===a?r:a;return(a=a.performance)&&a.now?a.now():null};function Xc(a,b,c){this.label=a;this.type=b;this.value=c;this.duration=0;this.uniqueId=this.label+"_"+this.type+"_"+Math.random();this.slotId=void 0};var I=r.performance,Yc=!!(I&&I.mark&&I.measure&&I.clearMarks),Zc=jb(function(){var a;if(a=Yc){var b;if(null===Uc){Uc="";try{a="";try{a=r.top.location.hash}catch(c){a=r.location.hash}a&&(Uc=(b=a.match(/\bdeid=([\d,]+)/))?b[1]:"")}catch(c){}}b=Uc;a=!!b.indexOf&&0<=b.indexOf("1337")}return a});function $c(){var a=ad;this.b=[];this.g=a||r;var b=null;a&&(a.google_js_reporting_queue=a.google_js_reporting_queue||[],this.b=a.google_js_reporting_queue,b=a.google_measure_js_timing);this.a=Zc()||(null!=b?b:1>Math.random())}function bd(a){a&&I&&Zc()&&(I.clearMarks("goog_"+a.uniqueId+"_start"),I.clearMarks("goog_"+a.uniqueId+"_end"))}$c.prototype.start=function(a,b){if(!this.a)return null;var c=Wc()||Vc();a=new Xc(a,b,c);b="goog_"+a.uniqueId+"_start";I&&Zc()&&I.mark(b);return a};function cd(){var a=dd;this.G=ed;this.h=!0;this.g=null;this.H=this.a;this.b=void 0===a?null:a;this.i=!1}function fd(a,b,c,d,e){try{if(a.b&&a.b.a){var f=a.b.start(b.toString(),3);var g=c();var h=a.b;c=f;if(h.a&&oa(c.value)){var k=Wc()||Vc();c.duration=k-c.value;var m="goog_"+c.uniqueId+"_end";I&&Zc()&&I.mark(m);h.a&&h.b.push(c)}}else g=c()}catch(n){h=a.h;try{bd(f),h=(e||a.H).call(a,b,new gd(hd(n),n.fileName,n.lineNumber),void 0,d)}catch(p){a.a(217,p)}if(!h)throw n;}return g}function id(a,b){var c=jd;return function(d){for(var e=[],f=0;f<arguments.length;++f)e[f]=arguments[f];return fd(c,a,function(){return b.apply(void 0,e)},void 0,void 0)}}cd.prototype.a=function(a,b,c,d,e){e=e||"jserror";try{var f=new Jc;f.h=!0;Nc(f,1,"context",a);b.error&&b.meta&&b.id||(b=new gd(hd(b),b.fileName,b.lineNumber));b.msg&&Nc(f,2,"msg",b.msg.substring(0,512));b.file&&Nc(f,3,"file",b.file);0<b.line&&Nc(f,4,"line",b.line);var g=b.meta||{};if(this.g)try{this.g(g)}catch(ia){}if(d)try{d(g)}catch(ia){}b=[g];f.a.push(5);f.b[5]=b;d=r;b=[];g=null;do{var h=d;if(C(h)){var k=h.location.href;g=h.document&&h.document.referrer||null}else k=g,g=null;b.push(new Ic(k||"",h));try{d=h.parent}catch(ia){d=null}}while(d&&h!=d);k=0;for(var m=b.length-1;k<=m;++k)b[k].depth=m-k;h=r;if(h.location&&h.location.ancestorOrigins&&h.location.ancestorOrigins.length==b.length-1)for(m=1;m<b.length;++m){var n=b[m];n.url||(n.url=h.location.ancestorOrigins[m-1]||"",n.ba=!0)}var p=new Ic(r.location.href,r,!1);h=null;var q=b.length-1;for(n=q;0<=n;--n){var w=b[n];!h&&Gc.test(w.url)&&(h=w);if(w.url&&!w.ba){p=w;break}}w=null;var ma=b.length&&b[q].url;0!=p.depth&&ma&&(w=b[q]);var L=new Hc(p,w);L.b&&Nc(f,6,"top",L.b.url||"");Nc(f,7,"url",L.a.url||"");Qc(this.G,e,f,this.i,c)}catch(ia){try{Qc(this.G,e,{context:"ecmserr",rctx:a,msg:hd(ia),url:L&&L.a.url},this.i,c)}catch(za){}}return this.h};function hd(a){var b=a.toString();a.name&&-1==b.indexOf(a.name)&&(b+=": "+a.name);a.message&&-1==b.indexOf(a.message)&&(b+=": "+a.message);if(a.stack){a=a.stack;var c=b;try{-1==a.indexOf(c)&&(a=c+"\n"+a);for(var d;a!=d;)d=a,a=a.replace(/((https?:\/..*\/)[^\/:]*:\d+(?:.|\n)*)\2/,"$1");b=a.replace(/\n */g,"\n")}catch(e){b=c}}return b}function gd(a,b,c){Fc.call(this,Error(a),{message:a,file:void 0===b?"":b,line:void 0===c?-1:c})}ha(gd,Fc);function J(a){a=void 0===a?"":a;var b=Error.call(this);this.message=b.message;"stack"in b&&(this.stack=b.stack);this.name="TagError";this.message=a?"adsbygoogle.push() error: "+a:"";Error.captureStackTrace?Error.captureStackTrace(this,J):this.stack=Error().stack||""}ha(J,Error);function kd(a){return 0==(a.error&&a.meta&&a.id?a.msg||hd(a.error):hd(a)).indexOf("TagError")};var ed,jd,ad=lc(),dd=new $c;function ld(a){null!=a&&(ad.google_measure_js_timing=a);ad.google_measure_js_timing||(a=dd,a.a=!1,a.b!=a.g.google_js_reporting_queue&&(Zc()&&Da(a.b,bd),a.b.length=0))}ed=new function(){var a=void 0===a?B:a;this.h="http:"===a.location.protocol?"http:":"https:";this.b="pagead2.googlesyndication.com";this.g="/pagead/gen_204?id=";this.a=.01;this.i=Math.random()};jd=new cd;"complete"==ad.document.readyState?ld():dd.a&&Rb(ad,"load",function(){ld()});function md(){var a=[nd,od];jd.g=function(b){Da(a,function(a){a(b)})}}function pd(a,b,c,d){return fd(jd,a,c,d,b)}function qd(a,b){return id(a,b)}var rd=jd.a;function sd(a,b,c){Qc(ed,a,b,"jserror"!=a,c,void 0)}function td(a,b,c,d){return kd(b)?(jd.i=!0,jd.a(a,b,.1,d,"puberror"),!1):jd.a(a,b,c,d)}function ud(a,b,c,d){return kd(b)?!1:jd.a(a,b,c,d)};function vd(a,b){this.Z=a;this.fa=b}function wd(a){var b=[].slice.call(arguments).filter(ib());if(!b.length)return null;var c=[],d={};b.forEach(function(a){c=c.concat(a.Z||[]);d=Object.assign(d,a.fa)});return new vd(c,d)};var xd=new vd(["google-auto-placed"],{google_tag_origin:"qs"});function yd(a,b){a.location.href&&a.location.href.substring&&(b.url=a.location.href.substring(0,200));sd("ama",b,.01)};function zd(a,b,c){c||(c=$b?"https":"http");r.location&&"https:"==r.location.protocol&&"http"==c&&(c="https");return[c,"://",a,b].join("")};var Ad=null;function Bd(){if(!Xb)return!1;if(null!=Ad)return Ad;Ad=!1;try{var a=F(r);a&&-1!=a.location.hash.indexOf("google_logging")&&(Ad=!0);r.localStorage.getItem("google_logging")&&(Ad=!0)}catch(b){}return Ad}function Cd(a,b){b=void 0===b?[]:b;if(Bd()){if(!r.google_logging_queue){r.google_logging_queue=[];var c=zd(bc(),"/pagead/js/logging_library.js");Cb(r.document,c)}r.google_logging_queue.push([a,b])}};function Dd(a){z(this,a,null)}u(Dd,y);var Ed=null;function Fd(){if(!Ed){for(var a=r,b=a,c=0;a&&a!=a.parent;)if(a=a.parent,c++,C(a))b=a;else break;Ed=b}return Ed};var Gd={c:"368226950",f:"368226951"},Hd={c:"368226960",f:"368226961"},Id={c:"332260010",A:"332260011",w:"332260012",D:"332260013"},Jd={c:"332260020",A:"332260021",w:"332260022",D:"332260023"},Kd={c:"368226500",f:"368226501"},Ld={c:"36998750",f:"36998751"},Md={c:"633794000",f:"633794001",B:"633794004"},Nd={c:"633794002",f:"633794003",B:"633794005"},Od={c:"221415700",f:"221415701"},Pd={c:"221415800",f:"221415801"},Qd={c:"4089040",sa:"4089042"},Rd={m:"20040067",c:"20040068",R:"1337"},Sd={c:"21060548",m:"21060549"},Td={c:"21060623",m:"21060624"},Ud={c:"22324606",f:"22324607"},Vd={c:"21062271",m:"21062272"},Wd={K:"62710015",c:"62710016"},Xd={c:"21060518",f:"21060519"},Yd={c:"21060849",V:"21060850",L:"21060851",U:"21060852",T:"21060853"},Zd={c:"21061394",f:"21061395"},$d={c:"182982000",f:"182982100"},ae={c:"182982200",f:"182982300"},be={c:"182983000",f:"182983100"},ce={c:"182983200",f:"182983300"},de={c:"182984000",f:"182984100",F:"182984400"},ee={c:"182984200",f:"182984300",F:"182984500"},fe={c:"10583695",f:"10583696"},ge={c:"10593695",f:"10593696"},he={c:"10573695",qa:"10573696",ra:"10573697"},ie={c:"21062571",f:"21062572"},je={c:"214679000",f:"214679100"},ke={c:"214678000",f:"214678100"},le={c:"20040012",f:"20040013"};var me={google:1,googlegroups:1,gmail:1,googlemail:1,googleimages:1,googleprint:1},ne=/(corp|borg)\.google\.com:\d+$/;function oe(){var a=B.google_page_location||B.google_page_url;"EMPTY"==a&&(a=B.google_page_url);if(Xb||!a)return!1;a=a.toString();0==a.indexOf("http://")?a=a.substring(7,a.length):0==a.indexOf("https://")&&(a=a.substring(8,a.length));var b=a.indexOf("/");-1==b&&(b=a.length);a=a.substring(0,b);if(ne.test(a))return!1;a=a.split(".");b=!1;3<=a.length&&(b=a[a.length-3]in me);2<=a.length&&(b=b||a[a.length-2]in me);return b};function pe(){this.wasPlaTagProcessed=!1;this.wasReactiveAdConfigReceived={};this.adCount={};this.wasReactiveAdVisible={};this.stateForType={};this.reactiveTypeEnabledInAsfe={};this.isReactiveTagFirstOnPage=this.wasReactiveAdConfigHandlerRegistered=this.wasReactiveTagRequestSent=!1;this.reactiveTypeDisabledByPublisher={};this.tagSpecificState={};this.messageValidationEnabled=!1;this.adRegion=this.floatingAdsFillMessage=null;this.disablePageHeightCheck=!1;this.improveCollisionDetection=0}function qe(a){a.google_reactive_ads_global_state||(a.google_reactive_ads_global_state=new pe);return a.google_reactive_ads_global_state};function re(a){a=a.document;var b={};a&&(b="CSS1Compat"==a.compatMode?a.documentElement:a.body);return b||{}}function K(a){return re(a).clientWidth};function se(a,b){for(var c=[],d=a.length,e=0;e<d;e++)c.push(a[e]);c.forEach(b,void 0)};function te(a,b,c,d){this.h=a;this.b=b;this.g=c;this.a=d}te.prototype.toString=function(){return JSON.stringify({nativeQuery:this.h,occurrenceIndex:this.b,paragraphIndex:this.g,ignoreMode:this.a})};function ue(a,b){if(null==a.a)return b;switch(a.a){case 1:return b.slice(1);case 2:return b.slice(0,b.length-1);case 3:return b.slice(1,b.length-1);case 0:return b;default:throw Error("Unknown ignore mode: "+a.a);}}function ve(a){var b=[];se(a.getElementsByTagName("p"),function(a){100<=we(a)&&b.push(a)});return b}function we(a){if(3==a.nodeType)return a.length;if(1!=a.nodeType||"SCRIPT"==a.tagName)return 0;var b=0;se(a.childNodes,function(a){b+=we(a)});return b}function xe(a){return 0==a.length||isNaN(a[0])?a:"\\"+(30+parseInt(a[0],10))+" "+a.substring(1)};var ye={rectangle:1,horizontal:2,vertical:4};function ze(a,b){for(var c=["width","height"],d=0;d<c.length;d++){var e="google_ad_"+c[d];if(!b.hasOwnProperty(e)){var f=E(a[c[d]]);f=null===f?null:Math.round(f);null!=f&&(b[e]=f)}}}function Ae(a,b){return!((Ib.test(b.google_ad_width)||Hb.test(a.style.width))&&(Ib.test(b.google_ad_height)||Hb.test(a.style.height)))}function Be(a,b){try{var c=b.document.documentElement.getBoundingClientRect(),d=a.getBoundingClientRect();var e={x:d.left-c.left,y:d.top-c.top}}catch(f){e=null}return(a=e)?a.y:0}function Ce(a,b){do{var c=D(a,b);if(c&&"fixed"==c.position)return!1}while(a=a.parentElement);return!0}function De(a){var b=0,c;for(c in ye)-1!=a.indexOf(c)&&(b|=ye[c]);return b}function Ee(a,b,c,d,e){if(nc(a)!=a)return F(a)?3:16;if(!(488>K(a)))return 4;if(!(a.innerHeight>=a.innerWidth))return 5;var f=K(a);if(!f||(f-c)/f>d)a=6;else{if(c="true"!=e.google_full_width_responsive)a:{c=K(a);for(b=b.parentElement;b;b=b.parentElement)if((d=D(b,a))&&(e=E(d.width))&&!(e>=c)&&"visible"!=d.overflow){c=!0;break a}c=!1}a=c?7:!0}return a}function Fe(a,b,c,d){var e=Ee(b,c,a,.3,d);if(!0!==e)return e;e=K(b);a=e-a;a=e&&0<=a?!0:e?-10>a?11:0>a?14:12:10;return"true"==d.google_full_width_responsive||Ce(c,b)?a:9}function Ge(a,b){if(3==b.nodeType)return/\S/.test(b.data);if(1==b.nodeType){if(/^(script|style)$/i.test(b.nodeName))return!1;try{var c=D(b,a)}catch(d){}return!c||"none"!=c.display&&!("absolute"==c.position&&("hidden"==c.visibility||"collapse"==c.visibility))}return!1}function He(a,b,c,d,e,f){if(a=D(c,a)){var g=E(a.paddingLeft)||0;a=a.direction;d=e-d;if(f.google_ad_resize)g=-1*(d+g)+"px";else{for(var h=f=0;100>h&&c;h++)f+=c.offsetLeft+c.clientLeft-c.scrollLeft,c=c.offsetParent;g=f+g;g="rtl"==a?-1*(d-g)+"px":-1*g+"px"}"rtl"==a?b.style.marginRight=g:b.style.marginLeft=g;b.style.width=e+"px";b.style.zIndex=30}};function M(a,b){this.b=a;this.a=b}l=M.prototype;l.minWidth=function(){return this.b};l.height=function(){return this.a};l.C=function(a){return 300<a&&300<this.a?this.b:Math.min(1200,Math.round(a))};l.M=function(a){return this.C(a)+"x"+this.height()};l.J=function(){};function N(a,b,c,d){d=void 0===d?function(a){return a}:d;var e;return a.style&&a.style[c]&&d(a.style[c])||(e=D(a,b))&&e[c]&&d(e[c])||null}function Ie(a){return function(b){return b.minWidth()<=a}}function Je(a,b,c,d){var e=a&&Ke(c,b),f=Le(b,d);return function(a){return!(e&&a.height()>=f)}}function Me(a){return function(b){return b.height()<=a}}function Ke(a,b){return Be(a,b)<re(b).clientHeight-100}function Ne(a,b){var c=Infinity;do{var d=N(b,a,"height",E);d&&(c=Math.min(c,d));(d=N(b,a,"maxHeight",E))&&(c=Math.min(c,d))}while((b=b.parentElement)&&"HTML"!=b.tagName);return c}function Oe(a,b){var c=N(b,a,"height",E);if(c)return c;var d=b.style.height;b.style.height="inherit";c=N(b,a,"height",E);b.style.height=d;if(c)return c;c=Infinity;do(d=b.style&&E(b.style.height))&&(c=Math.min(c,d)),(d=N(b,a,"maxHeight",E))&&(c=Math.min(c,d));while((b=b.parentElement)&&"HTML"!=b.tagName);return c}function Le(a,b){var c=a.google_unique_id;return b&&0==("number"===typeof c?c:0)?Math.max(250,2*re(a).clientHeight/3):250}function Pe(a){for(a=a.parentElement;a;a=a.parentElement){var b=E(a.style.height||a.style.maxHeight);if(b)return b}return null};function Qe(a){if(1!=a.nodeType)var b=!1;else if(b="INS"==a.tagName)a:{b=["adsbygoogle-placeholder"];a=a.className?a.className.split(/\s+/):[];for(var c={},d=0;d<a.length;++d)c[a[d]]=!0;for(d=0;d<b.length;++d)if(!c[b[d]]){b=!1;break a}b=!0}return b};function Re(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=Qa(d.Na);a[e]=d.value}};var Se={1:1,2:2,3:3,0:0};function Te(a){return null!=a?Se[a]:a}var Ue={1:0,2:1,3:2,4:3};function Ve(a,b){if(!a)return!1;a=D(a,b);if(!a)return!1;a=a.cssFloat||a.styleFloat;return"left"==a||"right"==a}function We(a){for(a=a.previousSibling;a&&1!=a.nodeType;)a=a.previousSibling;return a?a:null}function Xe(a){return!!a.nextSibling||!!a.parentNode&&Xe(a.parentNode)};function Ye(a,b,c){this.a=r;this.i=a;this.h=b;this.g=c||null;this.b=!1}function Ze(a,b){if(a.b)return!0;try{var c=a.a.localStorage.getItem("google_ama_settings");var d=c?new Dd(c?JSON.parse(c):null):null}catch(h){d=null}if(c=null!==d)d=A(d,2),c=null==d?!1:d;if(c)return a=a.a.google_ama_state=a.a.google_ama_state||{},a.eatf=!0,Cd(7,[!0,0,!1]),!0;d=0;var e=ab(a.h,xc,1);for(c=0;c<e.length;c++){var f=e[c];if(1==A(f,8)){var g=$a(f,wc,4);if(g&&2==A(g,1)&&(d++,$e(a,f,b)))return a.b=!0,a=a.a.google_ama_state=a.a.google_ama_state||{},a.placement=c,Cd(7,[!1,d,!0]),!0}}Cd(7,[!1,d,!1]);return!1}function $e(a,b,c){if(1!=A(b,8))return!1;var d=$a(b,tc,1);if(!d)return!1;var e=A(d,7);if(A(d,1)||A(d,3)||0<Za(d,4).length){var f=A(d,3),g=A(d,1),h=Za(d,4);e=A(d,2);var k=A(d,5);d=Te(A(d,6));var m="";g&&(m+=g);f&&(m+="#"+xe(f));if(h)for(f=0;f<h.length;f++)m+="."+xe(h[f]);e=(h=m)?new te(h,e,k,d):null}else e=e?new te(e,A(d,2),A(d,5),Te(A(d,6))):null;if(!e)return!1;k=[];try{k=a.a.document.querySelectorAll(e.h)}catch(w){}if(k.length){h=k.length;if(0<h){d=Array(h);for(f=0;f<h;f++)d[f]=k[f];k=d}else k=[];k=ue(e,k);oa(e.b)&&(h=e.b,0>h&&(h+=k.length),k=0<=h&&h<k.length?[k[h]]:[]);if(oa(e.g)){h=[];for(d=0;d<k.length;d++)f=ve(k[d]),g=e.g,0>g&&(g+=f.length),0<=g&&g<f.length&&h.push(f[g]);k=h}e=k}else e=[];if(0==e.length)return!1;e=e[0];k=A(b,2);k=Ue[k];k=void 0!==k?k:null;if(!(h=null==k)){a:{h=a.a;switch(k){case 0:h=Ve(We(e),h);break a;case 3:h=Ve(e,h);break a;case 2:d=e.lastChild;h=Ve(d?1==d.nodeType?d:We(d):null,h);break a}h=!1}if(c=!h&&!(!c&&2==k&&!Xe(e)))c=1==k||2==k?e:e.parentNode,c=!(c&&!Qe(c)&&0>=c.offsetWidth);h=!c}if(h)return!1;b=$a(b,vc,3);h={};b&&(h.la=A(b,1),h.X=A(b,2),h.wa=!!A(b,3));b=a.a;c=a.g;d=a.i;f=b.document;a=ub(new tb(f),"DIV");g=a.style;g.textAlign="center";g.width="100%";g.height="auto";g.clear=h.wa?"both":"none";h.Ca&&Re(g,h.Ca);f=ub(new tb(f),"INS");g=f.style;g.display="block";g.margin="auto";g.backgroundColor="transparent";h.la&&(g.marginTop=h.la);h.X&&(g.marginBottom=h.X);h.va&&Re(g,h.va);a.appendChild(f);f.setAttribute("data-ad-format","auto");h=[];if(g=c&&c.Z)a.className=g.join(" ");f.className="adsbygoogle";f.setAttribute("data-ad-client",d);h.length&&f.setAttribute("data-ad-channel",h.join("+"));a:{try{switch(k){case 0:e.parentNode&&e.parentNode.insertBefore(a,e);break;case 3:var n=e.parentNode;if(n){var p=e.nextSibling;if(p&&p.parentNode!=n)for(;p&&8==p.nodeType;)p=p.nextSibling;n.insertBefore(a,p)}break;case 1:e.insertBefore(a,e.firstChild);break;case 2:e.appendChild(a)}Qe(e)&&(e.setAttribute("data-init-display",e.style.display),e.style.display="block");b:{f.setAttribute("data-adsbygoogle-status","reserved");f.className+=" adsbygoogle-noablate";n={element:f};var q=c&&c.fa;if(f.hasAttribute("data-pub-vars")){try{q=JSON.parse(f.getAttribute("data-pub-vars"))}catch(w){break b}f.removeAttribute("data-pub-vars")}q&&(n.params=q);(b.adsbygoogle=b.adsbygoogle||[]).push(n)}}catch(w){a&&a.parentNode&&(q=a.parentNode,q.removeChild(a),Qe(q)&&(q.style.display=q.getAttribute("data-init-display")||"none"));q=!1;break a}q=!0}return q?!0:!1};function af(){this.b=new bf(this);this.a=0}function cf(a){if(0!=a.a)throw Error("Already resolved/rejected.");}function bf(a){this.a=a}function df(a){switch(a.a.a){case 0:break;case 1:a.b&&a.b(a.a.h);break;case 2:a.g&&a.g(a.a.g);break;default:throw Error("Unhandled deferred state.");}};function ef(a){this.exception=a}function ff(a,b){this.b=r;this.g=a;this.a=b}ff.prototype.start=function(){this.h()};ff.prototype.h=function(){try{switch(this.b.document.readyState){case "complete":case "interactive":Ze(this.g,!0);gf(this);break;default:Ze(this.g,!1)?gf(this):this.b.setTimeout(ya(this.h,this),100)}}catch(a){gf(this,a)}};function gf(a,b){try{var c=a.a,d=new ef(b);cf(c);c.a=1;c.h=d;df(c.b)}catch(e){a=a.a,b=e,cf(a),a.a=2,a.g=b,df(a.b)}};function hf(a){yd(a,{atf:1})}function jf(a,b){(a.google_ama_state=a.google_ama_state||{}).exception=b;yd(a,{atf:0})};function kf(){this.debugCard=null;this.debugCardRequested=!1};function lf(a,b){if(!a)return!1;a=a.hash;if(!a||!a.indexOf)return!1;if(-1!=a.indexOf(b))return!0;b=mf(b);return"go"!=b&&-1!=a.indexOf(b)?!0:!1}function mf(a){var b="";ec(a.split("_"),function(a){b+=a.substr(0,2)});return b};function nf(a){if(!a)return"";(a=a.toLowerCase())&&"ca-"!=a.substring(0,3)&&(a="ca-"+a);return a};function of(a,b){function c(a){try{var b=new cb(a);return Fa(ab(b,eb,2),function(a){return 1==A(a,1)})}catch(f){return null}}b=void 0===b?"":b;a=F(a)||a;a=pf(a);return b?(b=nf(String(b)),a[b]?c(a[b]):null):Fa(Ea(Ua(a),c),function(a){return null!=a})}function qf(a,b,c){function d(a){if(!a)return!1;a=new cb(a);var c;if(c=Za(a,3))a=Za(a,3),c=0<=Ca(a,b);return c}c=void 0===c?"":c;a=F(a)||a;if(rf(a,b))return!0;a=pf(a);return c?(c=nf(String(c)),d(a[c])):Ta(a,d)}function rf(a,b){a=(a=(a=a.location&&a.location.hash)&&a.match(/forced_clientside_labs=([\d,]+)/))&&a[1];return!!a&&0<=Ca(a.split(","),b.toString())}function pf(a){try{return Ob({},JSON.parse(a.localStorage.getItem("google_adsense_settings")))}catch(b){return{}}};function sf(a){if(r.google_apltlad||nc(r)!=r)return!1;if(lf(r.location,"google_ads_preview"))return!0;if(!qf(r,12,a.google_ad_client)||"google_ad_host"in a)return!1;r.google_apltlad=!0;return G(r,Gd.f)};var tf={9:"400",10:"100",11:"0.10",13:"0.001",19:"0.01",22:"0.01",24:"0.05",27:"0.001",28:"0.001",29:"0.01",34:"0.001",40:"0.15",47:"0.01",56:"0.001",60:"0.03",66:"0.0",67:"0.04",76:"0.004",77:"true",78:"0.1",79:"1200",82:"3",83:"1.0",92:"0.02",96:"700",97:"10",98:"0.01",99:"600",100:"100",103:"0.01",111:"0.1",112:"0",117:"0.02",118:"false",120:"0",121:"1000",126:"0.001",127:"0.1",128:"false",129:"0.02",135:"0.0",136:"0.02",137:"0.01",142:"1",143:"1",146:"0.10",148:"0.1",149:"0",150:"1000",152:"700",153:"30",154:"0.001",155:"0.06",157:"800",158:"30",159:"0.001",160:"200",161:"40",162:"0.02",163:"0",164:"100",165:"0.002",166:"100",167:"2"};var uf=null;function vf(){this.a=tf}function O(a,b){a=parseFloat(a.a[b]);return isNaN(a)?0:a}function wf(){uf||(uf=new vf);return uf};function xf(a,b,c,d,e){d=void 0===d?"":d;var f=a.createElement("link");try{f.rel=c;if(v(c.toLowerCase(),"stylesheet"))var g=nb(b);else{if(b instanceof lb)var h=nb(b);else{if(b instanceof ob)if(b instanceof ob&&b.constructor===ob&&b.ta===pb)var k=b.O;else ta(b),k="type_error:SafeUrl";else{if(b instanceof ob)var m=b;else b="object"==typeof b&&b.g?b.a():String(b),qb.test(b)||(b="about:invalid#zClosurez"),m=rb(b);k=m.a()}h=k}g=h}f.href=g}catch(n){return}d&&"preload"==c&&(f.as=d);e&&(f.nonce=e);if(a=a.getElementsByTagName("head")[0])try{a.appendChild(f)}catch(n){}};function yf(a){var b={},c={};a=(c.enable_page_level_ads=(b.pltais=!0,b),c.google_ad_client=a,c);a.enable_page_level_ads.google_ad_channel="AutoInsertAutoAdCode";return a};function od(a){try{var b=Ga(oc(r).eids||[],oc(r).loeids||[]);null!=b&&0<b.length&&(a.eid=b.join(","))}catch(c){}}function nd(a){a.shv=Wb()}jd.h=!Xb;function zf(a,b){return Be(b,a)+N(b,a,"height",E)};var Af=new Sc(0,99),Bf=new Sc(100,199),Cf=new Sc(200,399),Df=new Sc(400,499),Ef=new Sc(600,699),Ff=new Sc(700,799),Gf=new Sc(800,899);function P(a,b){b&&a.push(b)}function Hf(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d=F(a)||a;d=(d=(d=d.location&&d.location.hash)&&(d.match(/google_plle=([\d,]+)/)||d.match(/deid=([\d,]+)/)))&&d[1];var e;if(e=!!d)a:{d=Aa(v,d);e=c.length;for(var f=t(c)?c.split(""):c,g=0;g<e;g++)if(g in f&&d.call(void 0,f[g],g,c)){e=!0;break a}e=!1}return e}function Q(a,b,c){for(var d=0;d<c.length;d++)if(Hf(a,c[d]))return c[d];a:{if(!Gb()&&(a=Math.random(),a<b)){a=Db(r);b=c[Math.floor(a*c.length)];break a}b=null}return b}function If(a,b,c,d,e,f){f=void 0===f?1:f;for(var g=0;g<e.length;g++)if(Hf(a,e[g]))return e[g];f=void 0===f?1:f;0>=d?c=null:(g=new Rc(c,c+d-1),(d=d%f||d/f%e.length)||(b=b.a,d=!(b.start<=g.start&&b.a>=g.a)),d?c=null:(a=Tc(a),c=null!==a&&g.start<=a&&g.a>=a?e[Math.floor((a-c)/f)%e.length]:null));return c};function Jf(a,b,c){if(C(a.document.getElementById(b).contentWindow))a=a.document.getElementById(b).contentWindow,b=a.document,b.body&&b.body.firstChild||(/Firefox/.test(navigator.userAgent)?b.open("text/html","replace"):b.open(),a.google_async_iframe_close=!0,b.write(c));else{a=a.document.getElementById(b).contentWindow;c=String(c);b=['"'];for(var d=0;d<c.length;d++){var e=c.charAt(d),f=e.charCodeAt(0),g=d+1,h;if(!(h=Oa[e])){if(!(31<f&&127>f))if(f=e,f in Pa)e=Pa[f];else if(f in Oa)e=Pa[f]=Oa[f];else{h=f.charCodeAt(0);if(31<h&&127>h)e=f;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}e=Pa[f]=e}h=e}b[g]=h}b.push('"');a.location.replace("javascript:"+b.join(""))}};var Kf=null;function R(a,b,c,d){d=void 0===d?!1:d;M.call(this,a,b);this.I=c;this.Aa=d}ha(R,M);R.prototype.P=function(){return this.I};R.prototype.J=function(a,b,c,d){var e=this;if(1!=c.google_ad_resize){d.style.height=this.height()+"px";var f=function(){var a=Pe(d);if(a)return a<e.height()};b=(G(a,je.c)||H(a,Md.c)||H(a,Md.f))&&f();f=(G(a,je.f)||G(a,de.F)||H(a,Md.B))&&f();b?(c.rpe=!1,c.ovlp=!0):f&&(c.rpe=!0,c.ovlp=!0);if(G(a,Id.c)||G(a,Id.A)||G(a,Id.w)||G(a,Id.D))c.ovlp=!0}};function Lf(a){return function(b){return!!(b.I&a)}};function S(a,b,c,d,e,f,g,h,k,m,n,p,q){this.pa=a;this.a=b;this.I=void 0===c?null:c;this.na=void 0===d?null:d;this.b=void 0===e?null:e;this.g=void 0===f?null:f;this.G=void 0===g?!1:g;this.H=void 0===h?!1:h;this.ea=void 0===k?null:k;this.ja=void 0===m?null:m;this.h=void 0===n?null:n;this.i=void 0===p?null:p;this.ma=void 0===q?null:q;this.oa=this.da=this.ca=null}function Mf(a,b,c){null!=a.I&&(c.google_responsive_formats=a.I);null!=a.na&&(c.google_safe_for_responsive_override=a.na);null!=a.b&&(!0===a.b?c.google_full_width_responsive_allowed=!0:(c.google_full_width_responsive_allowed=!1,c.gfwrnwer=a.b));null!=a.g&&!0!==a.g&&(c.gfwrnher=a.g);a.G&&(c.google_bfa=a.G);a.H&&(c.ebfa=a.H);var d=a.a.C(b),e=a.a.height();1!=c.google_ad_resize&&(c.google_ad_width=d,c.google_ad_height=e,c.google_ad_format=a.a.M(b),c.google_responsive_auto_format=a.pa,c.google_ad_resizable=!0,c.google_override_format=1,c.google_loader_features_used=128,!0===a.b&&(c.gfwrnh=a.a.height()+"px"));null!=a.ea&&(c.gfwroml=a.ea);null!=a.ja&&(c.gfwromr=a.ja);null!=a.h&&(c.gfwroh=a.h,c.google_resizing_height=a.h);null!=a.i&&(c.gfwrow=a.i,c.google_resizing_width=a.i);null!=a.ma&&(c.gfwroz=a.ma);null!=a.ca&&(c.gml=a.ca);null!=a.da&&(c.gmr=a.da);null!=a.oa&&(c.gzi=a.oa);b=lc();b=F(b)||b;if(lf(b.location,"google_responsive_slot_debug")||Hf(b,$d.c,$d.f))c.ds="outline:thick dashed "+(d&&e?!0!==a.b||!0!==a.g?"#ffa500":"#0f0":"#f00")+" !important;"};var Nf=Tb("468",0);var Of=["google_content_recommendation_ui_type","google_content_recommendation_columns_num","google_content_recommendation_rows_num"],Pf={},Qf=(Pf.image_stacked=1/1.91,Pf.image_sidebyside=1/3.82,Pf.mobile_banner_image_sidebyside=1/3.82,Pf.pub_control_image_stacked=1/1.91,Pf.pub_control_image_sidebyside=1/3.82,Pf.pub_control_image_card_stacked=1/1.91,Pf.pub_control_image_card_sidebyside=1/3.74,Pf.pub_control_text=0,Pf.pub_control_text_card=0,Pf),Rf={},Sf=(Rf.image_stacked=80,Rf.image_sidebyside=0,Rf.mobile_banner_image_sidebyside=0,Rf.pub_control_image_stacked=80,Rf.pub_control_image_sidebyside=0,Rf.pub_control_image_card_stacked=85,Rf.pub_control_image_card_sidebyside=0,Rf.pub_control_text=80,Rf.pub_control_text_card=80,Rf),Tf={},Uf=(Tf.pub_control_image_stacked=100,Tf.pub_control_image_sidebyside=200,Tf.pub_control_image_card_stacked=150,Tf.pub_control_image_card_sidebyside=250,Tf.pub_control_text=100,Tf.pub_control_text_card=150,Tf);function Vf(a,b){M.call(this,a,b)}ha(Vf,M);Vf.prototype.C=function(a){return Math.min(1200,Math.max(this.minWidth(),Math.round(a)))};function Wf(a){var b=0;ec(Of,function(c){null!=a[c]&&++b});if(0===b)return!1;if(b===Of.length)return!0;throw new J("Tags data-matched-content-ui-type, data-matched-content-columns-num and data-matched-content-rows-num should be set together.");}function Xf(a,b){Yf(a,b);if(a<Nf){if(xb()){Zf(b,"mobile_banner_image_sidebyside",1,12);var c=+b.google_content_recommendation_columns_num;c=(a-8*c-8)/c;var d=b.google_content_recommendation_ui_type;b=b.google_content_recommendation_rows_num-1;return new S(9,new Vf(a,Math.floor(c/1.91+70)+Math.floor((c*Qf[d]+Sf[d])*b+8*b+8)))}Zf(b,"image_sidebyside",1,13);return new S(9,$f(a))}Zf(b,"image_stacked",4,2);return new S(9,$f(a))}function $f(a){return 1200<=a?new Vf(1200,600):850<=a?new Vf(a,Math.floor(.5*a)):550<=a?new Vf(a,Math.floor(.6*a)):468<=a?new Vf(a,Math.floor(.7*a)):new Vf(a,Math.floor(3.44*a))}function ag(a,b){Yf(a,b);var c=b.google_content_recommendation_ui_type.split(","),d=b.google_content_recommendation_columns_num.split(","),e=b.google_content_recommendation_rows_num.split(",");a:{if(c.length==d.length&&d.length==e.length){if(1==c.length){var f=0;break a}if(2==c.length){f=a<Nf?0:1;break a}throw new J("The parameter length of attribute data-matched-content-ui-type, data-matched-content-columns-num and data-matched-content-rows-num is too long. At most 2 parameters for each attribute are needed: one for mobile and one for desktop, while "+("you are providing "+c.length+' parameters. Example: \n data-matched-content-rows-num="4,2"\ndata-matched-content-columns-num="1,6"\ndata-matched-content-ui-type="image_stacked,image_card_sidebyside".'));}if(c.length!=d.length)throw new J('The parameter length of data-matched-content-ui-type does not match data-matched-content-columns-num. Example: \n data-matched-content-rows-num="4,2"\ndata-matched-content-columns-num="1,6"\ndata-matched-content-ui-type="image_stacked,image_card_sidebyside".');throw new J('The parameter length of data-matched-content-columns-num does not match data-matched-content-rows-num. Example: \n data-matched-content-rows-num="4,2"\ndata-matched-content-columns-num="1,6"\ndata-matched-content-ui-type="image_stacked,image_card_sidebyside".');}c=c[f];c=0==c.lastIndexOf("pub_control_",0)?c:"pub_control_"+c;d=+d[f];for(var g=Uf[c],h=d;a/h<g&&1<h;)h--;h!==d&&r.console&&r.console.warn("adsbygoogle warning: data-matched-content-columns-num "+d+" is too large. We override it to "+h+".");d=h;e=+e[f];Zf(b,c,d,e);if(Number.isNaN(d)||0===d)throw new J("Wrong value for data-matched-content-columns-num");if(Number.isNaN(e)||0===e)throw new J("Wrong value for data-matched-content-rows-num");b=Math.floor(((a-8*d-8)/d*Qf[c]+Sf[c])*e+8*e+8);if(1500<a)throw new J("Calculated slot width is too large: "+a);if(1500<b)throw new J("Calculated slot height is too large: "+b);return new S(9,new Vf(a,b))}function Yf(a,b){if(0>=a)throw new J("Invalid responsive width from Matched Content slot "+b.google_ad_slot+": "+a+". Please ensure to put this Matched Content slot into a non-zero width div container.");}function Zf(a,b,c,d){a.google_content_recommendation_ui_type=b;a.google_content_recommendation_columns_num=c;a.google_content_recommendation_rows_num=d};function bg(a,b){M.call(this,a,b)}ha(bg,M);bg.prototype.C=function(){return this.minWidth()};bg.prototype.J=function(a,b,c,d){var e=this,f=this.C(b);He(a,d,d.parentElement,b,f,c);1!=c.google_ad_resize&&(d.style.height=this.height()+"px",f=function(){var a=Pe(d);if(a)return a<e.height()},b=(G(a,je.c)||H(a,Md.c)||H(a,Md.f))&&f(),a=(G(a,je.f)||G(a,de.F)||H(a,Md.B))&&f(),b?(c.rpe=!1,c.ovlp=!0):a&&(c.rpe=!0,c.ovlp=!0))};function cg(a){return function(b){for(var c=a.length-1;0<=c;--c)if(!a[c](b))return!1;return!0}}function dg(a,b,c){for(var d=a.length,e=null,f=0;f<d;++f){var g=a[f];if(b(g)){if(!c||c(g))return g;null===e&&(e=g)}}return e};var T=[new R(970,90,2),new R(728,90,2),new R(468,60,2),new R(336,280,1),new R(320,100,2),new R(320,50,2),new R(300,600,4),new R(300,250,1),new R(250,250,1),new R(234,60,2),new R(200,200,1),new R(180,150,1),new R(160,600,4),new R(125,125,1),new R(120,600,4),new R(120,240,4),new R(120,120,1,!0)],eg=[T[6],T[12],T[3],T[0],T[7],T[14],T[1],T[8],T[10],T[4],T[15],T[2],T[11],T[5],T[13],T[9],T[16]];function fg(a,b,c,d,e){"false"!=e.google_full_width_responsive||c.location&&"#gfwrffwaifhp"==c.location.hash?"auto"==b||0<(De(b)&1)||"autorelaxed"==b&&H(c,fe.f)||gg(b)||1==e.google_ad_resize?(b=Fe(a,c,d,e),c=!0!==b?{j:a,l:b}:{j:K(c)||a,l:!0}):c={j:a,l:2}:c={j:a,l:1};b=c.l;return!0!==b?{j:a,l:b}:d.parentElement?{j:c.j,l:b}:{j:a,l:b}}function hg(a,b,c,d,e){var f=pd(247,rd,function(){return fg(a,b,c,d,e)}),g=f.j;f=f.l;var h=!0===f,k=E(d.style.width),m=E(d.style.height),n=ig(g,b,c,d,e,h);g=n.v;h=n.u;var p=n.o,q=n.s,w=n.P;n=n.Ba;var ma=jg(b,w),L,ia=(L=N(d,c,"marginLeft",E))?L+"px":"",za=(L=N(d,c,"marginRight",E))?L+"px":"";L=N(d,c,"zIndex")||"";return new S(ma,g,w,n,f,h,p,q,ia,za,m,k,L)}function gg(a){return"auto"==a||/^((^|,) *(horizontal|vertical|rectangle) *)+$/.test(a)}function ig(a,b,c,d,e,f){b="auto"==b?.25>=a/Math.min(1200,K(c))?4:3:De(b);var g=!1,h=!1,k=kg(c);if(k&&488>K(c)||!k&&xb()){var m=Ce(d,c);var n=Ke(d,c);g=!n&&m;h=n&&m}n=(g||k?eg:T).slice(0);var p=488>K(c),q=[Ie(a),Je(p,c,d,h),Lf(b)];null!=e.google_max_responsive_height&&q.push(Me(e.google_max_responsive_height));k||q.push(lg(p));p=[function(a){return!a.Aa}];if(g||h)g=g&&!k?Ne(c,d):Oe(c,d),p.push(Me(g));var w=dg(n,cg(q),cg(p));if(!w)throw new J("No slot size for availableWidth="+a);g=pd(248,rd,function(){var b;a:if(f){if(e.gfwrnh&&(b=E(e.gfwrnh))){b={v:new bg(a,b),u:!0,o:!1,s:!1};break a}if(kg(c)||"true"==e.google_full_width_responsive||!Ke(d,c)||e.google_resizing_allowed){b=!1;var g=re(c).clientHeight,h=Be(d,c),k=c.google_lpabyc;var m=Be(d,c);var n=re(c).clientHeight;if((m=0==n?null:m/n)&&2<m&&!c.google_bfabyc&&(!k||h-k>g)&&(g=.9*re(c).clientHeight,h=Math.min(g,mg(c,d,e)),g&&h==g)){h=c.google_pbfabyc;b=!h;if(H(c,Jd.A)||H(c,Jd.w)||H(c,Jd.D)){c.google_bfabyc=Be(d,c)+g;b={v:new bg(a,Math.floor(g)),u:!0,o:!0,s:!0};break a}h||(c.google_pbfabyc=Be(d,c)+g)}g=a/1.2;h=Math.min(g,mg(c,d,e));if(h<.5*g||100>h)h=g;b={v:new bg(a,Math.floor(h)),u:h<g?102:!0,o:!1,s:b}}else b={v:new bg(a,w.height()),u:101,o:!1,s:!1}}else b={v:w,u:100,o:!1,s:!1};return b});return{v:g.v,u:g.u,o:g.o,s:g.s,P:b,Ba:m}}function mg(a,b,c){return c.google_resizing_allowed||"true"==c.google_full_width_responsive?Infinity:Ne(a,b)}function jg(a,b){if("auto"==a)return 1;switch(b){case 2:return 2;case 1:return 3;case 4:return 4;case 3:return 5;case 6:return 6;case 5:return 7;case 7:return 8}throw Error("bad mask");}function lg(a){return function(b){return!(320==b.minWidth()&&(a&&50==b.height()||!a&&100==b.height()))}}function kg(a){return H(a,Md.f)||H(a,Md.B)};var ng={"image-top":function(a){return 600>=a?284+.414*(a-250):429},"image-middle":function(a){return 500>=a?196-.13*(a-250):164+.2*(a-500)},"image-side":function(a){return 500>=a?205-.28*(a-250):134+.21*(a-500)},"text-only":function(a){return 500>=a?187-.228*(a-250):130},"in-article":function(a){return 420>=a?a/1.2:460>=a?a/1.91+130:800>=a?a/4:200}};function og(a,b){M.call(this,a,b)}ha(og,M);og.prototype.C=function(){return Math.min(1200,this.minWidth())};function pg(a,b,c,d,e){var f=e.google_ad_layout||"image-top";if("in-article"==f&&"false"!=e.google_full_width_responsive){var g=Ee(b,c,a,.2,e);if(!0!==g)e.gfwrnwer=g;else if(g=K(b)){e.google_full_width_responsive_allowed=!0;var h=c.parentElement;if(h){b:for(var k=c,m=0;100>m&&k.parentElement;++m){for(var n=k.parentElement.childNodes,p=0;p<n.length;++p){var q=n[p];if(q!=k&&Ge(b,q))break b}k=k.parentElement;k.style.width="100%";k.style.height="auto"}He(b,c,h,a,g,e);a=g}}}if(250>a)throw new J("Fluid responsive ads must be at least 250px wide: availableWidth="+a);b=Math.min(1200,Math.floor(a));if(d&&"in-article"!=f){f=Math.ceil(d);if(50>f)throw new J("Fluid responsive ads must be at least 50px tall: height="+f);return new S(11,new M(b,f))}if("in-article"!=f&&(d=e.google_ad_layout_key)){f=""+d;d=Math.pow(10,3);if(c=(e=f.match(/([+-][0-9a-z]+)/g))&&e.length){a=[];for(g=0;g<c;g++)a.push(parseInt(e[g],36)/d);d=a}else d=null;if(!d)throw new J("Invalid data-ad-layout-key value: "+f);f=(b+-725)/1E3;e=0;c=1;a=d.length;for(g=0;g<a;g++)e+=d[g]*c,c*=f;f=Math.ceil(1E3*e- -725+10);if(isNaN(f))throw new J("Invalid height: height="+f);if(50>f)throw new J("Fluid responsive ads must be at least 50px tall: height="+f);if(1200<f)throw new J("Fluid responsive ads must be at most 1200px tall: height="+f);return new S(11,new M(b,f))}d=ng[f];if(!d)throw new J("Invalid data-ad-layout value: "+f);d=Math.ceil(d(b));return new S(11,"in-article"==f?new og(b,d):new M(b,d))};function U(a,b){M.call(this,a,b)}ha(U,M);U.prototype.C=function(){return this.minWidth()};U.prototype.M=function(a){return M.prototype.M.call(this,a)+"_0ads_al"};var qg=[new U(728,15),new U(468,15),new U(200,90),new U(180,90),new U(160,90),new U(120,90)];function rg(a,b,c){var d=250,e=90;d=void 0===d?130:d;e=void 0===e?30:e;var f=dg(qg,Ie(a));if(!f)throw new J("No link unit size for width="+a+"px");a=Math.min(a,1200);f=f.height();b=Math.max(f,b);d=(new S(10,new U(a,Math.min(b,15==f?e:d)))).a;b=d.minWidth();d=d.height();15<=c&&(d=c);return new S(10,new U(b,d))}function sg(a,b,c,d){if("false"==d.google_full_width_responsive)return d.google_full_width_responsive_allowed=!1,d.gfwrnwer=1,a;var e=Fe(a,b,c,d);if(!0!==e)return d.google_full_width_responsive_allowed=!1,d.gfwrnwer=e,a;e=K(b);if(!e)return a;d.google_full_width_responsive_allowed=!0;He(b,c,c.parentElement,a,e,d);return e};function tg(a,b,c,d,e){var f;(f=K(b))?488>K(b)?b.innerHeight>=b.innerWidth?(e.google_full_width_responsive_allowed=!0,He(b,c,c.parentElement,a,f,e),f={j:f,l:!0}):f={j:a,l:5}:f={j:a,l:4}:f={j:a,l:10};var g=f;f=g.j;g=g.l;if(!0!==g||a==f)return new S(12,new M(a,d),null,!0,g,100);a=ig(f,"auto",b,c,e,!0);return new S(12,a.v,a.P,!0,g,a.u,a.o,a.s)};function ug(a){var b=a.google_ad_format;if("autorelaxed"==b)return Wf(a)?9:5;if(gg(b))return 1;if("link"==b)return 4;if("fluid"==b)return 8}function vg(a,b,c,d,e){e=b.offsetWidth||(c.google_ad_resize||(void 0===e?!1:e))&&N(b,d,"width",E)||c.google_ad_width||0;G(d,Od.f)&&4===a&&(c.google_ad_format="auto",c.google_ad_slot="",a=1);var f=(f=wg(a,e,b,c,d))?f:hg(e,c.google_ad_format,d,b,c);f.a.J(d,e,c,b);Mf(f,e,c);1!=a&&(a=f.a.height(),b.style.height=a+"px")}function wg(a,b,c,d,e){var f=d.google_ad_height||N(c,e,"height",E);switch(a){case 5:return a=pd(247,rd,function(){return fg(b,d.google_ad_format,e,c,d)}),f=a.j,a=a.l,!0===a&&b!=f&&He(e,c,c.parentElement,b,f,d),!0===a?d.google_full_width_responsive_allowed=!0:(d.google_full_width_responsive_allowed=!1,d.gfwrnwer=a),Xf(f,d);case 9:return ag(b,d);case 4:return a=sg(b,e,c,d),rg(a,Oe(e,c),f);case 8:return pg(b,e,c,f,d);case 10:return tg(b,e,c,f,d)}};function V(a){this.h=[];this.b=a||window;this.a=0;this.g=null;this.i=0}var xg;l=V.prototype;l.ya=function(a,b){0!=this.a||0!=this.h.length||b&&b!=window?this.$(a,b):(this.a=2,this.ia(new yg(a,window)))};l.$=function(a,b){this.h.push(new yg(a,b||this.b));zg(this)};l.Ea=function(a){this.a=1;if(a){var b=qd(188,ya(this.ha,this,!0));this.g=this.b.setTimeout(b,a)}};l.ha=function(a){a&&++this.i;1==this.a&&(null!=this.g&&(this.b.clearTimeout(this.g),this.g=null),this.a=0);zg(this)};l.Ja=function(){return!(!window||!Array)};l.za=function(){return this.i};function zg(a){var b=qd(189,ya(a.La,a));a.b.setTimeout(b,0)}l.La=function(){if(0==this.a&&this.h.length){var a=this.h.shift();this.a=2;var b=qd(190,ya(this.ia,this,a));a.a.setTimeout(b,0);zg(this)}};l.ia=function(a){this.a=0;a.b()};function Ag(a){try{return a.sz()}catch(b){return!1}}function Bg(a){return!!a&&("object"===typeof a||"function"===typeof a)&&Ag(a)&&fc(a.nq)&&fc(a.nqa)&&fc(a.al)&&fc(a.rl)}function Cg(){if(xg&&Ag(xg))return xg;var a=Fd(),b=a.google_jobrunner;return Bg(b)?xg=b:a.google_jobrunner=xg=new V(a)}function Dg(a,b){Cg().nq(a,b)}function Eg(a,b){Cg().nqa(a,b)}V.prototype.nq=V.prototype.ya;V.prototype.nqa=V.prototype.$;V.prototype.al=V.prototype.Ea;V.prototype.rl=V.prototype.ha;V.prototype.sz=V.prototype.Ja;V.prototype.tc=V.prototype.za;function yg(a,b){this.b=a;this.a=b};function Fg(a,b){var c=F(b);if(c){c=K(c);var d=D(a,b)||{},e=d.direction;if("0px"===d.width&&"none"!=d.cssFloat)return-1;if("ltr"===e&&c)return Math.floor(Math.min(1200,c-a.getBoundingClientRect().left));if("rtl"===e&&c)return a=b.document.body.getBoundingClientRect().right-a.getBoundingClientRect().right,Math.floor(Math.min(1200,c-a-Math.floor((c-b.document.body.clientWidth)/2)))}return-1};function Gg(a){var b=this;this.a=a;a.google_iframe_oncopy||(a.google_iframe_oncopy={handlers:{},upd:function(a,d){var c=Hg("rx",a),f=Number;a:{if(a&&(a=a.match("dt=([^&]+)"))&&2==a.length){a=a[1];break a}a=""}f=f(a);f=(new Date).getTime()-f;c=c.replace(/&dtd=(\d+|-?M)/,"&dtd="+(1E5<=f?"M":0<=f?f:"-M"));b.set(d,c);return c}});this.b=a.google_iframe_oncopy}Gg.prototype.set=function(a,b){var c=this;this.b.handlers[a]=b;this.a.addEventListener&&this.a.addEventListener("load",function(){var b=c.a.document.getElementById(a);try{var e=b.contentWindow.document;if(b.onload&&e&&(!e.body||!e.body.firstChild))b.onload()}catch(f){}},!1)};function Hg(a,b){var c=new RegExp("\\b"+a+"=(\\d+)"),d=c.exec(b);d&&(b=b.replace(c,a+"="+(+d[1]+1||1)));return b}var Ig;var W="var i=this.id,s=window.google_iframe_oncopy,H=s&&s.handlers,h=H&&H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&&d&&(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}";/[\x00&<>"']/.test(W)&&(-1!=W.indexOf("&")&&(W=W.replace(Ia,"&amp;")),-1!=W.indexOf("<")&&(W=W.replace(Ja,"&lt;")),-1!=W.indexOf(">")&&(W=W.replace(Ka,"&gt;")),-1!=W.indexOf('"')&&(W=W.replace(La,"&quot;")),-1!=W.indexOf("'")&&(W=W.replace(Ma,"&#39;")),-1!=W.indexOf("\x00")&&(W=W.replace(Na,"&#0;")));Ig=W;var Jg={},Kg=(Jg.google_ad_modifications=!0,Jg.google_analytics_domain_name=!0,Jg.google_analytics_uacct=!0,Jg.google_pause_ad_requests=!0,Jg);function Lg(){var a=r;this.b=a=void 0===a?r:a;this.i="https://securepubads.g.doubleclick.net/static/3p_cookie.html";this.a=2;this.g=[];this.h=!1;a:{a=Bb(!1,50);var b=zb(r);b&&a.unshift(b);a.unshift(r);var c;for(b=0;b<a.length;++b)try{var d=a[b],e=Mg(d);if(e){this.a=Ng(e);if(2!=this.a)break a;!c&&C(d)&&(c=d)}}catch(f){}this.b=c||this.b}}function Og(a){if(2!=Pg(a)){for(var b=1==Pg(a),c=0;c<a.g.length;c++)try{a.g[c](b)}catch(d){}a.g=[]}}function Qg(a){var b=Mg(a.b);b&&2==a.a&&(a.a=Ng(b))}function Pg(a){Qg(a);return a.a}function Rg(a){var b=Sg;b.g.push(a);if(2!=b.a)Og(b);else if(b.h||(Rb(b.b,"message",function(a){var c=Mg(b.b);if(c&&a.source==c&&2==b.a){switch(a.data){case "3p_cookie_yes":b.a=1;break;case "3p_cookie_no":b.a=0}Og(b)}}),b.h=!0),Mg(b.b))Og(b);else{a=ub(new tb(b.b.document),"IFRAME");a.src=b.i;a.name="detect_3p_cookie";a.style.visibility="hidden";a.style.display="none";a.onload=function(){Qg(b);Og(b)};try{b.b.document.body.appendChild(a)}catch(c){}}}function Mg(a){return a.frames&&a.frames[Va("detect_3p_cookie")]||null}function Ng(a){return Lb(a,"3p_cookie_yes")?1:Lb(a,"3p_cookie_no")?0:2};var Tg=/^\.google\.(com?\.)?[a-z]{2,3}$/,Ug=/\.(cn|com\.bi|do|sl|ba|by|ma|am)$/;function Vg(a){return Tg.test(a)&&!Ug.test(a)}var Wg=r,Sg;function Xg(a){a="https://"+("adservice"+a+"/adsid/integrator.js");var b=["domain="+encodeURIComponent(r.location.hostname)];X[3]>=+new Date&&b.push("adsid="+encodeURIComponent(X[1]));return a+"?"+b.join("&")}var X,Y;function Yg(){Wg=r;X=Wg.googleToken=Wg.googleToken||{};var a=+new Date;X[1]&&X[3]>a&&0<X[2]||(X[1]="",X[2]=-1,X[3]=-1,X[4]="",X[6]="");Y=Wg.googleIMState=Wg.googleIMState||{};Vg(Y[1])||(Y[1]=".google.com");"array"==ta(Y[5])||(Y[5]=[]);"boolean"==typeof Y[6]||(Y[6]=!1);"array"==ta(Y[7])||(Y[7]=[]);oa(Y[8])||(Y[8]=0)}var Z={N:function(){return 0<Y[8]},Ga:function(){Y[8]++},Ha:function(){0<Y[8]&&Y[8]--},Ia:function(){Y[8]=0},Oa:function(){return!1},aa:function(){return Y[5]},Y:function(a){try{a()}catch(b){r.setTimeout(function(){throw b;},0)}},ga:function(){if(!Z.N()){var a=r.document,b=function(b){b=Xg(b);a:{try{var c=pa();break a}catch(g){}c=void 0}xf(a,b,"preload","script",c);c=a.createElement("script");c.type="text/javascript";c.onerror=function(){return r.processGoogleToken({},2)};b=vb(b);sb(c,b);try{(a.head||a.body||a.documentElement).appendChild(c),Z.Ga()}catch(g){}},c=Y[1];b(c);".google.com"!=c&&b(".google.com");b={};var d=(b.newToken="FBT",b);r.setTimeout(function(){return r.processGoogleToken(d,1)},1E3)}}};function Zg(a){Yg();var b=Wg.googleToken[5]||0;a&&(0!=b||X[3]>=+new Date?Z.Y(a):(Z.aa().push(a),Z.ga()));X[3]>=+new Date&&X[2]>=+new Date||Z.ga()}function $g(a){r.processGoogleToken=r.processGoogleToken||function(a,c){var b=a;b=void 0===b?{}:b;c=void 0===c?0:c;a=b.newToken||"";var e="NT"==a,f=parseInt(b.freshLifetimeSecs||"",10),g=parseInt(b.validLifetimeSecs||"",10),h=b["1p_jar"]||"";b=b.pucrd||"";Yg();1==c?Z.Ia():Z.Ha();var k=Wg.googleToken=Wg.googleToken||{},m=0==c&&a&&t(a)&&!e&&oa(f)&&0<f&&oa(g)&&0<g&&t(h);e=e&&!Z.N()&&(!(X[3]>=+new Date)||"NT"==X[1]);var n=!(X[3]>=+new Date)&&0!=c;if(m||e||n)e=+new Date,f=e+1E3*f,g=e+1E3*g,1E-5>Math.random()&&Sb("https://pagead2.googlesyndication.com/pagead/gen_204?id=imerr&err="+c,void 0),k[5]=c,k[1]=a,k[2]=f,k[3]=g,k[4]=h,k[6]=b,Yg();if(m||!Z.N()){c=Z.aa();for(a=0;a<c.length;a++)Z.Y(c[a]);c.length=0}};Zg(a)}function ah(a){Sg=Sg||new Lg;Rg(function(b){b&&a()})};var bh=Va("script");function ch(){B.google_sa_impl&&!B.document.getElementById("google_shimpl")&&(B.google_sa_queue=null,B.google_sl_win=null,B.google_sa_impl=null);if(!B.google_sa_queue){B.google_sa_queue=[];B.google_sl_win=B;B.google_process_slots=function(){return dh(B)};var a=eh();xf(B.document,a,"preload","script");!v(x,"Chrome")&&!v(x,"CriOS")||v(x,"Edge")?Cb(B.document,a).id="google_shimpl":(a=document.createElement("IFRAME"),a.id="google_shimpl",a.style.display="none",B.document.documentElement.appendChild(a),Jf(B,"google_shimpl","<!doctype html><html><body>"+("<"+bh+">")+"google_sl_win=window.parent;google_async_iframe_id='google_shimpl';"+("</"+bh+">")+["<",bh,' src="',eh("/show_ads_impl.js"),'"></',bh,">"].join("")+"</body></html>"),a.contentWindow.document.close())}}var dh=qd(215,function(a){var b=a.google_sa_queue,c=b.shift();a.google_sa_impl||sd("shimpl",{t:"no_fn"});"function"==ta(c)&&pd(216,rd,c);b.length&&a.setTimeout(function(){return dh(a)},0)});function fh(a,b,c){a.google_sa_queue=a.google_sa_queue||[];a.google_sa_impl?c(b):a.google_sa_queue.push(b)}function eh(a){a=void 0===a?"/show_ads_impl.js":a;var b=Zb?"https":"http";a:{if(Xb)try{var c=B.google_cafe_host||B.top.google_cafe_host;if(c){var d=c;break a}}catch(e){}d=bc(void 0)}return zd(d,["/pagead/js/",Wb(),"/r20180604",a,""].join(""),b)}function hh(a,b,c,d){return function(){var e=!1;d&&Cg().al(3E4);try{Jf(a,b,c),e=!0}catch(g){var f=Fd().google_jobrunner;Bg(f)&&f.rl()}e&&(e=Hg("google_async_rrc",c),(new Gg(a)).set(b,hh(a,b,e,!1)))}}function ih(a){if(!Kf)a:{for(var b=Bb(),c=0;c<b.length;c++)try{var d=b[c].frames.google_esf;if(d){Kf=d;break a}}catch(e){}Kf=null}if(!Kf){if(/[^a-z0-9-]/.test(a))return null;b=document.createElement("IFRAME");b.id="google_esf";b.name="google_esf";c=zd(ac(),["/pagead/html/",Wb(),"/r20180604/zrt_lookup.html#",encodeURIComponent("")].join(""));b.src=c;b.style.display="none";b.setAttribute("data-ad-client",nf(a));return b}return null}function jh(a,b,c){kh(a,b,c,function(a,b,f){a=a.document;for(var d=b.id,e=0;!d||a.getElementById(d+"_anchor");)d="aswift_"+e++;b.id=d;b.name=d;d=Number(f.google_ad_width||0);e=Number(f.google_ad_height||0);var k=f.ds||"";k&&(k+=k.endsWith(";")?"":";");var m="";if(!f.google_enable_single_iframe){m=["<iframe"];for(n in b)b.hasOwnProperty(n)&&m.push(n+"="+b[n]);m.push('style="'+("left:0;position:absolute;top:0;border:0px;"+("width:"+d+"px;")+("height:"+e+"px;"))+'"');m.push("></iframe>");m=m.join(" ")}var n=b.id;var p="";p=void 0===p?"":p;d="border:none;height:"+e+"px;margin:0;padding:0;"+("position:relative;visibility:visible;width:"+d+"px;")+"background-color:transparent;";n=['<ins id="'+(n+"_expand")+'"',' style="display:inline-table;'+d+(void 0===k?"":k)+'"',p?' data-ad-slot="'+p+'">':">",'<ins id="'+(n+"_anchor")+'" style="display:block;'+d+'">',m,"</ins></ins>"].join("");16==f.google_reactive_ad_format?(f=a.createElement("div"),f.innerHTML=n,c.appendChild(f.firstChild)):c.innerHTML=n;return b.id})}function kh(a,b,c,d){var e=b.google_ad_width,f=b.google_ad_height;G(a,le.f)&&(b.google_enable_single_iframe=!0);var g={};null!=e&&(g.width=e&&'"'+e+'"');null!=f&&(g.height=f&&'"'+f+'"');g.frameborder='"0"';g.marginwidth='"0"';g.marginheight='"0"';g.vspace='"0"';g.hspace='"0"';g.allowtransparency='"true"';g.scrolling='"no"';g.allowfullscreen='"true"';g.onload='"'+Ig+'"';d=d(a,g,b);lh(a,c,b);(c=ih(b.google_ad_client))&&a.document.documentElement.appendChild(c);c=Ba;e=(new Date).getTime();b.google_lrv=Wb();b.google_async_iframe_id=d;b.google_unique_id=ic(a);b.google_start_time=c;b.google_bpp=e>c?e-c:1;b.google_async_rrc=0;a.google_sv_map=a.google_sv_map||{};a.google_sv_map[d]=b;a.google_t12n_vars=tf;if(b.google_enable_single_iframe){var h={pubWin:a,iframeWin:null,vars:b};fh(a,function(){a.google_sa_impl(h)},a.document.getElementById(d+"_anchor")?Dg:Eg)}else fh(a,hh(a,d,["<!doctype html><html><body>","<"+bh+">","google_sl_win=window.parent;google_iframe_start_time=new Date().getTime();",'google_async_iframe_id="'+d+'";',"</"+bh+">","<"+bh+">window.parent.google_sa_impl("+("{iframeWin: window, pubWin: window.parent, vars: "+("window.parent['google_sv_map']['"+d+"']")+"}")+");</"+bh+">","</body></html>"].join(""),!0),a.document.getElementById(d)?Dg:Eg)}function lh(a,b,c){var d=c.google_ad_output,e=c.google_ad_format,f=c.google_ad_width||0,g=c.google_ad_height||0;e||"html"!=d&&null!=d||(e=f+"x"+g);d=!c.google_ad_slot||c.google_override_format||!gb[c.google_ad_width+"x"+c.google_ad_height]&&"aa"==c.google_loader_used;e&&d?e=e.toLowerCase():e="";c.google_ad_format=e;if(!oa(c.google_reactive_sra_index)||!c.google_ad_unit_key){e=[c.google_ad_slot,c.google_orig_ad_format||c.google_ad_format,c.google_ad_type,c.google_orig_ad_width||c.google_ad_width,c.google_orig_ad_height||c.google_ad_height];d=[];f=0;for(g=b;g&&25>f;g=g.parentNode,++f)9===g.nodeType?d.push(""):d.push(g.id);(d=d.join())&&e.push(d);c.google_ad_unit_key=Fb(e.join(":")).toString();var h=void 0===h?!1:h;e=[];for(d=0;b&&25>d;++d){f="";void 0!==h&&h||(f=(f=9!==b.nodeType&&b.id)?"/"+f:"");a:{if(b&&b.nodeName&&b.parentElement){g=b.nodeName.toString().toLowerCase();for(var k=b.parentElement.childNodes,m=0,n=0;n<k.length;++n){var p=k[n];if(p.nodeName&&p.nodeName.toString().toLowerCase()===g){if(b===p){g="."+m;break a}++m}}}g=""}e.push((b.nodeName&&b.nodeName.toString().toLowerCase())+f+g);b=b.parentElement}h=e.join()+":";b=[];if(a)try{var q=a.parent;for(e=0;q&&q!==a&&25>e;++e){var w=q.frames;for(d=0;d<w.length;++d)if(a===w[d]){b.push(d);break}a=q;q=a.parent}}catch(ma){}c.google_ad_dom_fingerprint=Fb(h+b.join()).toString()}}function mh(a,b){var c=navigator;a&&b&&c&&(a=a.document,b=nf(b),/[^a-z0-9-]/.test(b)||((c=Ha("r20160913"))&&(c+="/"),Cb(a,zd("pagead2.googlesyndication.com","/pub-config/"+c+b+".js"))))};function nh(a,b){a=a.attributes;for(var c=a.length,d=0;d<c;d++){var e=a[d];if(/data-/.test(e.name)){var f=Ha(e.name.replace("data-matched-content","google_content_recommendation").replace("data","google").replace(/-/g,"_"));if(!b.hasOwnProperty(f)){e=e.value;var g={};g=(g.google_reactive_ad_format=Tb,g.google_allow_expandable_ads=Kb,g);e=g.hasOwnProperty(f)?g[f](e,null):e;null===e||(b[f]=e)}}}}function oh(a,b,c){nh(a,b);if(c.document&&c.document.body&&!ug(b)&&!b.google_reactive_ad_format){var d=parseInt(a.style.width,10),e=Fg(a,c);if(0<e&&d>e){var f=parseInt(a.style.height,10);d=!!gb[d+"x"+f];if(G(c,Wd.K))b.google_ad_resize=0;else{var g=e;if(d){var h=hb(e,f);if(h)g=h,b.google_ad_format=h+"x"+f+"_0ads_al";else throw Error("TSS="+e);}b.google_ad_resize=1;b.google_ad_width=g;d||(b.google_ad_format=null,b.google_override_format=!0);e=g;a.style.width=e+"px";f=hg(e,"auto",c,a,b);g=e;f.a.J(c,g,b,a);Mf(f,g,b);f=f.a;b.google_responsive_formats=null;f.minWidth()>e&&!d&&(b.google_ad_width=f.minWidth(),a.style.width=f.minWidth()+"px")}}}d=b.google_reactive_ad_format;if(!b.google_enable_content_recommendations||1!=d&&2!=d){d=a.offsetWidth||N(a,c,"width",E)||b.google_ad_width||0;a:{e=Aa(hg,d,"auto",c,a,b,!1,!0);h=G(c,$d.c);var k=G(c,$d.f);f=G(c,be.c);g=G(c,be.f);var m=qf(c,11,b.google_ad_client),n=G(c,de.f);var p=b.google_ad_client;p=null!=of(c,void 0===p?"":p);if(!(h||k||m||p)||!xb()||b.google_reactive_ad_format||ug(b)||Ae(a,b)||1==b.google_ad_resize||nc(c)!=c)d=!1;else{for(k=a;k;k=k.parentElement)if(m=D(k,c),(p=!m)||(p=!(0<=Ca(["static","relative"],m.position))),p){d=!1;break a}if(!0!==Ee(c,a,d,.3,b))d=!1;else{b.google_resizing_allowed=!0;k=lf(c.location,"google_responsive_slot_debug")||lf(c.location,"google_responsive_slot_preview")||Hf(c,$d.c,$d.f,be.c,be.f);m=O(wf(),142);if(k||Math.random()<m)b.ovlp=!0;h||g||n?(h={},Mf(e(),d,h),b.google_resizing_width=h.google_ad_width,b.google_resizing_height=h.google_ad_height,h.ds&&(b.ds=h.ds),b.iaaso=!1):(b.google_ad_format="auto",b.iaaso=!0);(d=f?"AutoOptimizeAdSizeVariant":g?"AutoOptimizeAdSizeOriginal":null)&&(b.google_ad_channel=b.google_ad_channel?[b.google_ad_channel,d].join("+"):d);d=!0}}}if(e=ug(b))vg(e,a,b,c,d);else{if(Ae(a,b)){if(d=D(a,c))a.style.width=d.width,a.style.height=d.height,ze(d,b);b.google_ad_width||(b.google_ad_width=a.offsetWidth);b.google_ad_height||(b.google_ad_height=a.offsetHeight);b.google_loader_features_used=256;d=cc(c);b.google_responsive_auto_format=d?d.data&&"rspv"==d.data.autoFormat?13:14:12}else ze(a.style,b),b.google_ad_output&&"html"!=b.google_ad_output||300!=b.google_ad_width||250!=b.google_ad_height||(d=a.style.width,a.style.width="100%",e=a.offsetWidth,a.style.width=d,b.google_available_width=e);c.location&&"#gfwmrp"==c.location.hash||12==b.google_responsive_auto_format&&"true"==b.google_full_width_responsive&&!G(c,Kd.f)?vg(10,a,b,c,!1):G(c,Ld.f)&&12==b.google_responsive_auto_format&&(a=Fe(a.offsetWidth||parseInt(a.style.width,10)||b.google_ad_width,c,a,b),!0!==a?(b.efwr=!1,b.gfwrnwer=a):b.efwr=!0)}}else b.google_ad_width=K(c),b.google_ad_height=50,a.style.display="none"};function ph(a){null!==Jb(a.getAttribute("width"))&&a.setAttribute("width",0);null!==Jb(a.getAttribute("height"))&&a.setAttribute("height",0);a.style.width="0px";a.style.height="0px"};var qh=!1,rh=0,sh=!1,th=!1,uh=!1,vh=!1;function wh(a){return mc.test(a.className)&&"done"!=a.getAttribute("data-adsbygoogle-status")}function xh(a,b){var c=window;a.setAttribute("data-adsbygoogle-status","done");yh(a,b,c)}function yh(a,b,c){var d=lc();d.google_spfd||(d.google_spfd=oh);(d=b.google_reactive_ads_config)||oh(a,b,c);if(!zh(a,b,c)){d||(c.google_lpabyc=zf(c,a));if(d){if(qh){if(d.page_level_pubvars&&d.page_level_pubvars.pltais)return;throw new J("Only one 'enable_page_level_ads' allowed per page.");}qh=!0}else hc(c);sh||(sh=!0,mh(c,b.google_ad_client));ec(Kg,function(a,d){b[d]=b[d]||c[d]});b.google_loader_used="aa";b.google_reactive_tag_first=1===rh;if((d=b.google_ad_output)&&"html"!=d)throw new J("No support for google_ad_output="+d);pd(164,rd,function(){jh(c,b,a)})}}function zh(a,b,c){var d=b.google_reactive_ads_config;if(d){var e=d.page_level_pubvars;e=(va(e)?e:{}).google_tag_origin}if("js"===b.google_ad_output)return!1;var f=e||b.google_tag_origin;e=t(a.className)&&/(\W|^)adsbygoogle-noablate(\W|$)/.test(a.className);var g=c.google_bfabyc,h=c.google_pbfabyc,k=Be(a,c),m=re(c).clientHeight;h&&!b.ebfa&&(b.ebfaca=!0,k-h<m&&(b.ebfana=!0));if((!g||b.google_bfa?0:H(c,Jd.w)||k&&H(c,Jd.A)&&k-g<m)&&!e)return ph(a),Ah(a),!0;h=b.google_ad_slot;g=oc(c);qc(g.ad_whitelist||[],h,f)?f=null:(f=g.space_collapsing||"none",f=(h=qc(g.ad_blacklist||[],h))?{W:!0,ka:h.space_collapsing||f}:g.remove_ads_by_default?{W:!0,ka:f,xa:g.dont_remove_atf}:null);if(e=f&&f.W&&"on"!=b.google_adtest&&!e){a:{try{if(a.parentNode&&0<a.offsetWidth&&0<a.offsetHeight&&a.style&&"none"!==a.style.display&&"hidden"!==a.style.visibility&&(!a.style.opacity||0!==Number(a.style.opacity))){var n=a.getBoundingClientRect();var p=0<n.right&&0<n.bottom;break a}}catch(q){}p=!1}p&&(p=Be(a,c)<re(c).clientHeight);e=!(p&&f.xa)}if(e)return Ah(a),c=c.google_sv_map=c.google_sv_map||{},b.google_ad_slot&&(c[b.google_ad_slot]=b,a.setAttribute("google_ad_slot",b.google_ad_slot)),"slot"==f.ka&&ph(a),!0;if((p=D(a,c))&&"none"==p.display&&!("on"==b.google_adtest||0<b.google_reactive_ad_format||d))return c.document.createComment&&a.appendChild(c.document.createComment("No ad requested because of display:none on the adsbygoogle tag")),!0;a=null==b.google_pgb_reactive||3===b.google_pgb_reactive;return 1!==b.google_reactive_ad_format&&8!==b.google_reactive_ad_format||!a?!1:(r.console&&r.console.warn("Adsbygoogle tag with data-reactive-ad-format="+b.google_reactive_ad_format+" is deprecated. Check out page-level ads at https://www.google.com/adsense"),!0)}function Bh(a){var b=document.getElementsByTagName("INS");for(var c=0,d=b[c];c<b.length;d=b[++c]){var e=d;if(wh(e)&&"reserved"!=e.getAttribute("data-adsbygoogle-status")&&(!a||d.id==a))return d}return null}function Ch(){var a=document.createElement("INS");a.className="adsbygoogle";a.className+=" adsbygoogle-noablate";Mb(a);return a}function Dh(a){var b={};ec(rc,function(c,d){!1===a.enable_page_level_ads?b[d]=!1:a.hasOwnProperty(d)&&(b[d]=a[d])});va(a.enable_page_level_ads)&&(b.page_level_pubvars=a.enable_page_level_ads);var c=Ch();fb.body.appendChild(c);var d={};d=(d.google_reactive_ads_config=b,d.google_ad_client=a.google_ad_client,d);d.google_pause_ad_requests=uh;xh(c,d)}function Eh(a){function b(){return Dh(a)}var c=F(window);if(!c)throw new J("Page-level tag does not work inside iframes.");qe(c).wasPlaTagProcessed=!0;fb.body||"complete"==fb.readyState||"interactive"==fb.readyState?b():Rb(fb,"DOMContentLoaded",id(191,b))}function Fh(a){var b={};pd(165,td,function(){Gh(a,b)},function(c){c.client=c.client||b.google_ad_client||a.google_ad_client;c.slotname=c.slotname||b.google_ad_slot;c.tag_origin=c.tag_origin||b.google_tag_origin})}function Gh(a,b){Ba=(new Date).getTime();ch();a:{if(void 0!=a.enable_page_level_ads){if(t(a.google_ad_client)){var c=!0;break a}throw new J("'google_ad_client' is missing from the tag config.");}c=!1}c?Hh(a,b):((c=a.params)&&ec(c,function(a,c){b[c]=a}),"js"===b.google_ad_output?console.warn("Ads with google_ad_output='js' have been deprecated and no longer work. Contact your AdSense account manager or switch to standard AdSense ads."):(a=Ih(a.element),nh(a,b),0===rh&&sf(b)&&(c=yf(b.google_ad_client),Hh(c),vh=!0),0===rh&&(rh=2),b.google_pause_ad_requests=uh,xh(a,b)))}function Hh(a,b){if(vh)vh=!1;else{0===rh&&(rh=1);b&&a.tag_partner&&(pc(r,a.tag_partner),pc(b,a.tag_partner));if(!th){th=!0;try{var c=r.localStorage.getItem("google_ama_config")}catch(sc){c=null}try{var d=c?new zc(c?JSON.parse(c):null):null}catch(sc){d=null}if(b=d)if(c=$a(b,Bc,3),!c||A(c,1)<=+new Date)try{r.localStorage.removeItem("google_ama_config")}catch(sc){yd(r,{lserr:1})}else{if($a(b,Ec,13))switch(c=!0,A($a(b,Ec,13),1)){case 1:case 2:case 3:c=!1;case 4:case 5:case 6:c=void 0===c?!1:c,d=oc(r),d.remove_ads_by_default=!0,d.space_collapsing="slot",d.dont_remove_atf=c}Cd(3,[bb(b)]);c=a.google_ad_client;d=xd;if(a.enable_page_level_ads&&a.enable_page_level_ads.google_ad_channel){var e={};e=new vd(null,(e.google_ad_channel=a.enable_page_level_ads.google_ad_channel,e));d=wd(d,e)}try{var f=Za(b,5);if(0<f.length){var g=new Cc,h=f||[];2<g.i?g.b[2+g.h]=h:(Ya(g),g.g[2]=h);var k=g}else b:{h=r.location.pathname;var m=ab(b,Cc,7);g={};for(f=0;f<m.length;++f){var n=A(m[f],1);oa(n)&&!g[n]&&(g[n]=m[f])}for(var p=h.replace(/(^\/)|(\/$)/g,"");;){var q=Fb(p);if(g[q]){k=g[q];break b}if(!p){k=null;break b}p=p.substring(0,p.lastIndexOf("/"))}}var w;if(w=k)a:{var ma=Za(k,2);if(ma)for(h=0;h<ma.length;h++)if(1==ma[h]){w=!0;break a}w=!1}if(w){if(A(k,4)){w={};var L=new vd(null,(w.google_package=A(k,4),w));d=wd(d,L)}var ia=new af;(new ff(new Ye(c,b,d),ia)).start();var za=ia.b;var gh=Aa(jf,r);if(za.b)throw Error("Then functions already set.");za.b=Aa(hf,r);za.g=gh;df(za)}}catch(sc){yd(r,{atf:-1})}}}Eh(a)}}function Ih(a){if(a){if(!wh(a)&&(a.id?a=Bh(a.id):a=null,!a))throw new J("'element' has already been filled.");if(!("innerHTML"in a))throw new J("'element' is not a good DOM element.");}else if(a=Bh(),!a)throw new J("All ins elements in the DOM with class=adsbygoogle already have ads in them.");return a}function Jh(){md();pd(166,ud,Kh)}function Kh(){var a=dc(cc(B))||B,b=oc(a);if(!b.plle){b.plle=!0;var c=b.eids=b.eids||[],d=b.loeids=b.loeids||[];b=wf();var e=wf();var f=F(a)||a;f=lf(f.location,"google_responsive_slot_debug")||lf(f.location,"google_responsive_slot_preview");var g=qf(a,11),h=null!=of(a,"");f?(f=$d,g=ae,e=f.f):h?(f=de,g=ee,e=If(a,new Sc(0,999),O(e,152),O(e,153),[f.c,f.f,f.F],2)):g?(f=be,g=ce,e=If(a,new Sc(0,999),O(e,120),O(e,121),[f.c,f.f],2)):(f=$d,g=ae,e=If(a,Ff,O(e,96),O(e,97),[f.c,f.f]));e?(h={},f=(h[f.c]=g.c,h[f.f]=g.f,h[f.F]=g.F,h)[e],e={Da:e,Fa:f}):e=null;f=e||{};e=f.Da;g=f.Fa;e&&g&&(P(c,e),P(c,g));f=Kd;e=Q(a,O(b,136),[f.c,f.f]);P(c,e);qf(a,12)&&(f=Hd,h=Gd,e=If(a,new Sc(0,999),O(b,149),O(b,150),[f.c,f.f],4),P(d,e),e==f.c?g=h.c:e==f.f?g=h.f:g="",P(c,g));f=Jd;e=If(a,Cf,O(b,160),O(b,161),[f.c,f.A,f.w,f.D]);P(d,e);h=Id;e==f.c?g=h.c:e==f.A?g=h.A:e==f.w?g=h.w:e==f.D?g=h.D:g="";P(c,g);f=Qd;P(c,If(a,Df,O(b,9),O(b,10),[f.c,f.sa]));Ha("")&&P(d,"");f=Wd;e=Q(a,O(b,11),[f.c,f.K]);P(c,e);h="";e===f.c?h="62710018":e===f.K&&(h="62710017");P(c,h);f=ie;e=Q(a,O(b,146),[f.c,f.f]);P(c,e);f=Xd;e=Q(a,O(b,56),[f.c,f.f]);P(c,e);f=Rd;e=Q(a,O(b,13),[f.m,f.c]);P(c,e);e=Q(a,0,[f.R]);P(c,e);f=Sd;e=Q(a,O(b,60),[f.m,f.c]);P(c,e);e==Sd.m&&(f=Td,e=Q(a,O(b,66),[f.m,f.c]),P(c,e),f=Vd,e=Q(a,O(b,137),[f.m,f.c]),P(c,e),e==Td.m&&(f=Ud,e=Q(a,O(b,135),[f.m,f.c]),P(c,e)));f=Ld;e=Q(a,O(b,98),[f.c,f.f]);P(c,e);if(Kb(b.a[77],!1)||Xb)f=Yd,e=Q(a,O(b,76),[f.c,f.V,f.L,f.U]),P(c,e),e||(e=Q(a,O(b,83),[f.T]),P(c,e));f=Md;e=If(a,Gf,O(b,157),O(b,158),[f.c,f.f,f.B]);P(d,e);h=Nd;e==f.c?g=h.c:e==f.f?g=h.f:e==f.B?g=h.B:g="";P(c,g);f=Od;e=If(a,Bf,O(b,166),O(b,167),[f.c,f.f]);P(c,e);h=Pd;e==f.c?g=h.c:e==f.f?g=h.f:g="";P(c,g);f=Zd;e=Q(a,O(b,92),[f.c,f.f]);P(c,e);f=fe;e=If(a,Ef,O(b,99),O(b,100),[f.c,f.f]);P(d,e);h=ge;e==f.c?g=h.c:e==f.f?g=h.f:g="";P(c,g);f=he;e=Q(a,O(b,127),[f.c,f.qa,f.ra]);P(c,e);f=je;if(e=If(a,Af,O(b,163),O(b,164),[f.c,f.f]))h=ke,d={},g=(d[f.c]=h.c,d[f.f]=h.f,d)[e],P(c,e),P(c,g);f=le;e=Q(a,O(b,165),[f.c,f.f]);P(c,e)}a=G(B,Td.m)||G(B,Rd.m)||G(B,Rd.R);ld(a);if(G(B,Yd.V)||G(B,Yd.L)||G(B,Yd.U)||G(B,Yd.T))Yg(),Vg(".google.com.om")&&(Y[1]=".google.com.om"),G(B,Yd.L)?(a=kb(),ah(a),$g(a)):$g(null);G(B,Zd.f)&&(a=oe()?Vb("","pagead2.googlesyndication.com"):ac(),xf(lc().document,a,"preconnect"));if(a=F(r))a=qe(a),a.tagSpecificState[1]||(a.tagSpecificState[1]=new kf);a=window.adsbygoogle;if(!a||!a.loaded){c={push:Fh,loaded:!0};try{Object.defineProperty(c,"requestNonPersonalizedAds",{set:Lh}),Object.defineProperty(c,"pauseAdRequests",{set:Mh}),Object.defineProperty(c,"onload",{set:Nh})}catch(m){}a&&(void 0!==a.requestNonPersonalizedAds&&(c.requestNonPersonalizedAds=a.requestNonPersonalizedAds),void 0!==a.pauseAdRequests&&(c.pauseAdRequests=a.pauseAdRequests));if(a&&a.shift)try{var k;for(b=20;0<a.length&&(k=a.shift())&&0<b;)Fh(k),--b}catch(m){throw window.setTimeout(Jh,0),m;}window.adsbygoogle=c;a&&(c.onload=a.onload)}}function Ah(a){a.className+=" adsbygoogle-ablated-ad-slot"}function Lh(a){if(+a){if((a=Ab())&&a.frames&&!a.frames.GoogleSetNPA)try{var b=a.document,c=new tb(b),d=b.body||b.head&&b.head.parentElement;if(d){var e=ub(c,"IFRAME");e.name="GoogleSetNPA";e.id="GoogleSetNPA";e.setAttribute("style","display:none;position:fixed;left:-999px;top:-999px;width:0px;height:0px;");d.appendChild(e)}}catch(f){}}else(b=Ab().document.getElementById("GoogleSetNPA"))&&b.parentNode&&b.parentNode.removeChild(b)}function Mh(a){+a?uh=!0:(uh=!1,a=function(){if(!uh){var a=lc(),c=lc();try{if(fb.createEvent){var d=fb.createEvent("CustomEvent");d.initCustomEvent("adsbygoogle-pub-unpause-ad-requests-event",!1,!1,"");a.dispatchEvent(d)}else if(fc(c.CustomEvent)){var e=new c.CustomEvent("adsbygoogle-pub-unpause-ad-requests-event",{bubbles:!1,cancelable:!1,detail:""});a.dispatchEvent(e)}else if(fc(c.Event)){var f=new Event("adsbygoogle-pub-unpause-ad-requests-event",{bubbles:!1,cancelable:!1});a.dispatchEvent(f)}}catch(g){}}},r.setTimeout(a,0),r.setTimeout(a,1E3))}function Nh(a){fc(a)&&window.setTimeout(a,0)};Jh();}).call(this);

(self.AMP=self.AMP||[]).push({n:"amp-auto-ads",v:"1812131718380",f:(function(AMP,_){
var h,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},k;if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var m;a:{var ba={a:!0},n={};try{n.__proto__=ba;m=n.a;break a}catch(a){}m=!1}k=m?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=k;function ca(a){return a?{top:a.top,bottom:a.bottom,left:a.left,right:a.right}:a};function da(){var a,b;this.promise=new Promise(function(c,e){a=c;b=e});this.resolve=a;this.reject=b}function ea(a){return new Promise(function(b){b(a())})};function t(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var fa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;var ga=Object.prototype.toString;self.log=self.log||{user:null,dev:null,userForEmbed:null};var v=self.log;function w(){if(!v.user)throw Error("failed to call initLogConstructor");return v.user};function x(a,b){a=a.__AMP_TOP||a;return y(a,b)}function z(a,b){var c=A(a);c=A(c);c=c.isSingleDoc()?c.win:c;return y(c,b)}function A(a){return a.nodeType?x((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function y(a,b){var c=a.services;c||(c=a.services={});var e=c;a=e[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var B=Object.prototype.hasOwnProperty;function C(a){return a||{}};function D(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function E(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};function F(a,b,c){a=a.createElement(b);for(var e in c)a.setAttribute(e,c[e]);return a}function ha(a,b){for(var c,e=a;e&&e!==c;e=e.parentElement)if(b(e))return e;return null}function ia(a,b){if(a.closest)return a.closest(b);b=b.toUpperCase();return ha(a,function(a){return a.tagName==b})}var G;
function ja(a,b){if(null==G){var c=a.ownerDocument;try{var e=c.createElement("div"),d=c.createElement("div");e.appendChild(d);G=e.querySelector(":scope div")===d}catch(f){G=!1}}if(G)return a.querySelectorAll(":scope "+b);a.classList.add("i-amphtml-scoped");b=a.querySelectorAll(".i-amphtml-scoped "+b);a.classList.remove("i-amphtml-scoped");return b}
function ka(a){E(a.tagName,"AMP-");if(a.createdCallback)return Promise.resolve(a);if(!a.__AMP_UPG_PRM){var b=new da;a.__AMP_UPG_PRM=b.promise;a.__AMP_UPG_RES=b.resolve}return a.__AMP_UPG_PRM};function I(a){return z(a,"viewport")};var la={type:!0};function J(a){if(!a.attributes)return{};if("[object Object]"!==ga.call(a.attributes)||Array.isArray(a.attributes))return w().warn("amp-auto-ads","attributes property not an object"),{};var b=a.attributes,c={},e;for(e in b)if(la[e]||E(e,"data-")){var d=typeof b[e];"number"!=d&&"string"!=d&&"boolean"!=d?w().warn("amp-auto-ads","Attribute type not supported: "+d):c[e]=String(b[e])}else w().warn("amp-auto-ads","Attribute not whitlisted: "+e);return c};var ma=["AMP-SIDEBAR","AMP-APP-BANNER"],na={1:function(a,b){a.parentNode.insertBefore(b,a)},4:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},2:function(a,b){a.insertBefore(b,a.firstChild)},3:function(a,b){a.appendChild(b)}};function K(a,b,c,e,d,f,g){this.ampdoc=a;this.C=b;this.l=c;this.T=e;this.P=d;this.K=f;this.H=g;this.F=null;this.j=0}K.prototype.getAdElement=function(){return this.F};
K.prototype.getEstimatedPosition=function(){var a=this;return this.C.getElementLayoutBox(this.l).then(function(b){a:{var c=b;switch(a.T){case 1:case 2:c=c.top;break a;case 3:case 4:c=c.bottom;break a;default:throw Error("Unknown position");}}return c})};
K.prototype.placeAd=function(a,b,c,e){var d=this;return this.getEstimatedPosition().then(function(f){return c.isTooNearAnAd(f).then(function(c){if(c)return d.j=3,d.j;d.F=oa(d,a,b.width);d.P(d.l,d.getAdElement());return pa(d,b,e).then(function(a){return ka(d.getAdElement()).then(function(){return d.getAdElement().whenBuilt()}).then(function(){return d.C.attemptChangeSize(d.getAdElement(),a.height,a.width,a.margins)}).then(function(){d.j=2;return d.j},function(){d.j=1;return d.j})})})})};
function pa(a,b,c){var e=a.C.getViewport(),d=e.getWidth();if(c&&1200>=d){var f=e.getHeight(),g=qa(d,f),l=ca(a.H);return z(a.l,"resources").getElementLayoutBox(a.l).then(function(b){var c;(c=a.ampdoc.win.getComputedStyle(a.l))||(c=Object.create(null));c=c.direction;0!==b.left&&(l=l||{},"rtl"==c?l.right=b.left:l.left=-b.left)}).then(function(){return Promise.resolve({width:d,height:g,margins:l})})}return Promise.resolve({height:b.height||250,margins:a.H})}
function oa(a,b,c){b=Object.assign(C({layout:c?"fixed":"fixed-height",height:"0",width:c?c:"auto","class":"i-amphtml-layout-awaiting-size"}),b,a.K);return F(a.ampdoc.win.document,"amp-ad",b)}function ra(a,b){var c=b.placements;if(!c)return w().info("amp-auto-ads","No placements in config"),[];var e=[];c.forEach(function(b){sa(a,b,e)});return e}
function sa(a,b,c){var e=na[b.pos];if(e){var d=b.anchor;if(d){var f=L(a.getRootNode(),d);if(f.length){var g=void 0;if(b.style){var l=parseInt(b.style.top_m,10),u=parseInt(b.style.bot_m,10);if(l||u)g={top:l||void 0,bottom:u||void 0}}f.forEach(function(d){if(ta(d,b.pos)){var f=J(b);c.push(new K(a,z(d,"resources"),d,b.pos,e,f,g))}})}else w().warn("amp-auto-ads","No anchor element found")}else w().warn("amp-auto-ads","No anchor in placement")}else w().warn("amp-auto-ads","No injector for position")}
function L(a,b){var c=b.selector;if(!c)return w().warn("amp-auto-ads","No selector in anchor"),[];c=[].slice.call(ja(a.documentElement||a,c));var e=b.min_c||0;0<e&&(c=c.filter(function(a){return a.textContent.length>=e}));"number"!=typeof b.index&&b.all||(c=(c=c[b.index||0])?[c]:[]);if(0==c.length)return[];if(b.sub){var d=[];c.forEach(function(a){d=d.concat(L(a,b.sub))});return d}return c}
function ta(a,b){var c=1==b||4==b?a.parentElement:a;if(!c)return w().warn("amp-auto-ads","Parentless anchor with BEFORE/AFTER position."),!1;var e=c;return!ma.some(function(a){return ia(e,a)?(w().warn("amp-auto-ads","Placement inside blacklisted ancestor: "+a),!0):!1})}function qa(a,b){var c=100,e=Math.min(300,b),d=Math.round(a/1.2);return Math.min(Math.max(d,c),e)};function M(){var a=100;this.M=a;this.A=this.D=0;this.w=Object.create(null)}M.prototype.has=function(a){return!!this.w[a]};M.prototype.get=function(a){var b=this.w[a];if(b)return b.access=++this.A,b.payload};
M.prototype.put=function(a,b){this.has(a)||this.D++;this.w[a]={payload:b,access:this.A};if(!(this.D<=this.M)){if(v.dev)a=v.dev;else throw Error("failed to call initLogConstructor");a.warn("lru-cache","Trimming LRU cache");a=this.w;var c=this.A+1,e;for(e in a){var d=a[e].access;if(d<c){c=d;var f=e}}void 0!==f&&(delete a[f],this.D--)}};C({c:!0,v:!0,a:!0,ad:!0});var N,O;
function P(a){var b;N||(N=self.document.createElement("a"),O=self.UrlCache||(self.UrlCache=new M));var c=b?null:O,e=N;if(c&&c.has(a))a=c.get(a);else{e.href=a;e.protocol||(e.href=e.href);var d={href:e.href,protocol:e.protocol,host:e.host,hostname:e.hostname,port:"0"==e.port?"":e.port,pathname:e.pathname,search:e.search,hash:e.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=
e.origin&&"null"!=e.origin?e.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;c&&c.put(a,d);a=d}return a};function Q(a,b){if(a.__AMP__EXPERIMENT_TOGGLES)var c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var e in a.AMP_CONFIG){var d=a.AMP_CONFIG[e];"number"===typeof d&&0<=d&&1>=d&&(c[e]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(e=a.AMP_CONFIG["allow-doc-opt-in"],d=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){d=
d.getAttribute("content").split(",");for(var f=0;f<d.length;f++)-1!=e.indexOf(d[f])&&(c[d[f]]=!0)}Object.assign(c,ua(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){e=a.AMP_CONFIG["allow-url-opt-in"];d=a.location.originalHash||a.location.hash;a=Object.create(null);if(d)for(var g;g=fa.exec(d);)f=t(g[1],g[1]),g=g[2]?t(g[2],g[2]):"",a[f]=g;for(d=0;d<e.length;d++)f=a["e-"+e[d]],"1"==f&&(c[e[d]]=!0),"0"==f&&(c[e[d]]=!1)}}var l=c;return!!l[b]}
function ua(a){a:{try{var b=a.document.cookie}catch(g){b=""}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var c=a[b].trim(),e=c.indexOf("=");if(-1!=e&&"AMP_EXP"==t(c.substring(0,e).trim(),void 0)){a=c.substring(e+1).trim();a=t(a,a);break a}}a=null}var d=a,f=d?d.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<f.length;b++)0!=f[b].length&&("-"==f[b][0]?a[f[b].substr(1)]=!1:a[f[b]]=!0);return a}
function R(a,b){a.experimentBranches=a.experimentBranches||{};for(var c in b)if(B.call(b,c)&&!B.call(a.experimentBranches,c))if(!b[c].isTrafficEligible||!b[c].isTrafficEligible(a))a.experimentBranches[c]=null;else if(!a.experimentBranches[c]&&Q(a,c)){var e=b[c].branches,d=e;a.experimentBranches[c]=d[Math.floor(Math.random()*d.length)]||null}};var va={isTrafficEligible:function(a){return!!a.document.querySelector("AMP-AUTO-ADS")},branches:["3782001","3782002"]};var wa={isTrafficEligible:function(a){return!!a.document.querySelector("AMP-AUTO-ADS")},branches:["19861210","19861211"]};function S(a){var b=4096,c,e=[],d=c&&null!=c.value&&""!==c.value?encodeURIComponent(c.name)+"="+encodeURIComponent(String(c.value)):null,f=b-45;d&&(f-=d.length+1);for(var g=Object.keys(a),l=0;l<g.length;l++){var u=g[l],H=a[u];if(null!=H&&""!==H){var r=encodeURIComponent(u)+"=",p=encodeURIComponent(String(H)),X=r.length+p.length+1;if(X>f){var Y=p.substr(0,f-r.length-1).replace(/%\w?$/,"");Y&&e.push(r+Y);d&&e.push(d);break}e.push(r+p);f-=X}}return e.length?"//pagead2.googlesyndication.com/getconfig/ama?"+
e.join("&"):"//pagead2.googlesyndication.com/getconfig/ama"};function xa(a,b){return"adsense"==a?new T(b):"doubleclick"==a?new ya(b):null}function T(a){this.h=a}h=T.prototype;h.isEnabled=function(a){R(a,{"amp-auto-ads-adsense-holdout":va});var b=(a.experimentBranches?a.experimentBranches["amp-auto-ads-adsense-holdout"]:null)||null;return"3782001"!=b};h.isResponsiveEnabled=function(a){R(a,{"amp-auto-ads-adsense-responsive":wa});return"19861210"!=((a.experimentBranches?a.experimentBranches["amp-auto-ads-adsense-responsive"]:null)||null)};
h.getConfigUrl=function(){var a=z(this.h,"documentInfo").get(),b=P(a.canonicalUrl).hostname;return S({client:this.h.getAttribute("data-ad-client"),plah:b,ama_t:"amp",url:a.canonicalUrl})};h.getAttributes=function(){return C({type:"adsense","data-ad-client":this.h.getAttribute("data-ad-client")})};h.getDefaultAdConstraints=function(){var a=I(this.h).getSize().height;return{initialMinSpacing:a,subsequentMinSpacing:[{adCount:3,spacing:2*a},{adCount:6,spacing:3*a}],maxAdCount:8}};h.getSizing=function(){return{}};
function ya(a){this.h=a}h=ya.prototype;h.isEnabled=function(){return!0};h.isResponsiveEnabled=function(){return!1};h.getConfigUrl=function(){var a=z(this.h,"documentInfo").get(),b=P(a.canonicalUrl).hostname;return S({client:this.h.getAttribute("data-ad-legacy-client"),plah:b,ama_t:"amp",url:a.canonicalUrl})};h.getAttributes=function(){return C({type:"doubleclick","data-slot":this.h.getAttribute("data-slot"),json:this.h.getAttribute("data-json")})};
h.getDefaultAdConstraints=function(){var a=I(this.h).getSize().height;return{initialMinSpacing:a,subsequentMinSpacing:[{adCount:3,spacing:2*a},{adCount:6,spacing:3*a}],maxAdCount:8}};h.getSizing=function(){a:{var a=this.h.getAttribute("data-experiment");try{var b=JSON.parse(a);break a}catch(e){}b=void 0}var c=b;return c?{height:c.height?Number(c.height):250,width:c.width?Number(c.width):void 0}:{}};function za(a,b,c,e,d){this.L=a.slice(0);this.B=b;this.U=c;this.m=e;this.G=0;this.R=void 0===d?!1:d}za.prototype.run=function(){var a=this;return this.m.isMaxAdCountReached()?ea(function(){return Aa(a)}):Ba(this).then(function(b){return b?a.run():Aa(a)})};function Aa(a){return{adsPlaced:a.G,totalAdsOnPage:a.m.getAdCount()}}
function Ba(a){var b=a.L.shift();return b?b.placeAd(a.B,a.U,a.m,a.R).then(function(c){return 2==c?(a.m.addAd(b.getAdElement()),a.G++,!0):Ba(a)}):(w().info("amp-auto-ads","unable to fulfill ad strategy"),Promise.resolve(!1))};function U(a,b){this.o=a;this.O=b.initialMinSpacing;this.J=b.subsequentMinSpacing.slice(0).sort(function(a,b){return a.adCount-b.adCount});this.S=b.maxAdCount;this.I=Ca(this)}U.prototype.addAd=function(a){this.o.push(a);this.I=Ca(this)};U.prototype.getAdCount=function(){return this.o.length};U.prototype.isMaxAdCountReached=function(){return this.getAdCount()>=this.S};U.prototype.isTooNearAnAd=function(a){return Da(this,a,0)};
function Da(a,b,c){return c>=a.o.length?Promise.resolve(!1):Ea(b,a.o[c]).then(function(e){return e<a.I?!0:Da(a,b,c+1)})}function Ea(a,b){return z(b,"resources").getElementLayoutBox(b).then(function(b){return a>=b.top&&a<=b.bottom?0:Math.min(Math.abs(a-b.top),Math.abs(a-b.bottom))})}function Ca(a){for(var b=a.getAdCount(),c=a.O,e=0;e<a.J.length;e++){var d=a.J[e];d.adCount<=b&&(c=d.spacing)}return c}
function Fa(a){return[].slice.call(a.getRootNode().getElementsByTagName("AMP-AD")).filter(function(a){return a.parentElement&&"AMP-STICKY-AD"==a.parentElement.tagName?!1:!0})}
function Ga(a,b){b=b.adConstraints;if(!b)return null;var c=I(a).getHeight(),e=Ha(b.initialMinSpacing,c);if(null==e)return w().warn("amp-auto-ads","Invalid initial min spacing"),null;var d=(b.subsequentMinSpacing||[]).map(function(a){var b=a.adCount;if(null==b)return w().warn("amp-auto-ads","No subsequentMinSpacing adCount specified"),null;a=Ha(a.spacing,c);return null==a?(w().warn("amp-auto-ads","Invalid subsequent min spacing"),null):{adCount:b,spacing:a}});return-1!=d.indexOf(null)?null:null==b.maxAdCount?
(w().warn("amp-auto-ads","No maxAdCount specified"),null):{initialMinSpacing:e,subsequentMinSpacing:d,maxAdCount:b.maxAdCount}}function Ha(a,b){if(!a)return null;var c=parseFloat(a);return isNaN(c)||0>c?null:D(a,"px")?c:D(a,"vp")?c*b:null};function Ia(a,b,c){this.ampdoc=a;this.B=b;this.N=c}
Ia.prototype.run=function(){var a;a:{if(a=this.N.optInStatus)for(var b=0;b<a.length;b++)if(2==a[b]){a=!0;break a}a=!1}if(!a)return Promise.resolve(!1);if(0<this.ampdoc.getRootNode().getElementsByTagName("AMP-STICKY-AD").length)return w().warn("amp-auto-ads","exists <amp-sticky-ad>"),Promise.resolve(!1);x(this.ampdoc.win,"extensions").installExtensionForDoc(this.ampdoc,"amp-sticky-ad");a=I(this.ampdoc).getWidth();b=Object.assign({},this.B,C({width:String(a),height:"100"}));a=this.ampdoc.win.document;
b=F(a,"amp-ad",b);a=F(a,"amp-sticky-ad",C({layout:"nodisplay"}));a.appendChild(b);b=this.ampdoc.getBody();b.insertBefore(a,b.firstChild);return Promise.resolve(!0)};function V(a){return AMP.BaseElement.apply(this,arguments)||this}var W=AMP.BaseElement;V.prototype=aa(W.prototype);V.prototype.constructor=V;if(q)q(V,W);else for(var Z in W)if("prototype"!=Z)if(Object.defineProperties){var Ja=Object.getOwnPropertyDescriptor(W,Z);Ja&&Object.defineProperty(V,Z,Ja)}else V[Z]=W[Z];V.V=W.prototype;
V.prototype.buildCallback=function(){var a=this;w().assert(Q(this.win,"amp-auto-ads"),"Experiment is off");var b=this.element.getAttribute("type");w().assert(b,"Missing type attribute");var c=xa(b,this.element);w().assert(c,"No AdNetworkConfig for type: "+b);if(c.isEnabled(this.win)){var e=this.getAmpDoc();x(this.win,"extensions").installExtensionForDoc(e,"amp-ad");var d=z(this.getAmpDoc(),"viewer"),f=d.whenFirstVisible();f.then(function(){return Ka(a,c.getConfigUrl())}).then(function(b){if(b){var d=
b.noConfigReason;if(d)a.user().warn("amp-auto-ads",d);else{var f=ra(e,b),g=Object.assign(c.getAttributes(),J(b)),r=c.getSizing(),p=Ga(e,b)||c.getDefaultAdConstraints();p=new U(Fa(e),p);(new za(f,g,r,p,c.isResponsiveEnabled(a.win))).run();(new Ia(e,g,b)).run()}}})}};V.prototype.isLayoutSupported=function(){return!0};
function Ka(a,b){var c={mode:"cors",method:"GET",credentials:"omit",requireAmpResponseSourceOrigin:!1};return x(a.win,"xhr").fetchJson(b,c).then(function(a){return a.json()}).catch(function(b){a.user().error("amp-auto-ads","amp-auto-ads config xhr failed: "+b);return null})}(function(a){a.registerElement("amp-auto-ads",V)})(self.AMP);
})});
//# sourceMappingURL=amp-auto-ads-0.1.js.map
